<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš PX4 SITL ç’°å¢ƒå®‰è£æ–‡ä»¶ v2.0</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet"/>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
    <style>
        :root {
            --bg: #0d0d0d; --bg2: #161b22; --bg3: #1e2430; --bg4: #252d3a;
            --border: #30363d; --accent: #00d4ff; --green: #3fb950;
            --orange: #f78166; --yellow: #e3b341; --purple: #a78bfa;
            --text: #c9d1d9; --text2: #8b949e;
        }
        [data-theme="light"] {
            --bg: #f6f8fa; --bg2: #ffffff; --bg3: #f0f4f8; --bg4: #e8edf3;
            --border: #d0d7de; --accent: #0969da; --green: #1a7f37;
            --orange: #cf222e; --yellow: #9a6700; --purple: #6639ba;
            --text: #1f2328; --text2: #656d76;
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
               background: var(--bg); color: var(--text); line-height: 1.7;
               transition: background .3s, color .3s; }

        /* NAV */
        nav { position:fixed; top:0; left:0; right:0; z-index:200;
              background: rgba(13,13,13,.9); backdrop-filter:blur(12px);
              border-bottom:1px solid var(--border);
              display:flex; align-items:center; padding:0 1.5rem; height:52px; gap:1rem; }
        [data-theme="light"] nav { background: rgba(246,248,250,.9); }
        .nav-logo { color:var(--accent); font-weight:700; font-size:1rem; white-space:nowrap; }
        .nav-links { display:flex; gap:.5rem; margin-left:auto; flex-wrap:wrap; }
        .nav-links a { color:var(--text2); text-decoration:none; font-size:.82rem;
                       padding:.25rem .6rem; border-radius:5px; transition:all .2s; white-space:nowrap; }
        .nav-links a:hover { color:var(--accent); background:rgba(0,212,255,.08); }
        .theme-btn { background:var(--bg3); border:1px solid var(--border); color:var(--text);
                     padding:.25rem .7rem; border-radius:15px; cursor:pointer; font-size:.8rem;
                     transition:all .2s; white-space:nowrap; }
        .theme-btn:hover { border-color:var(--accent); color:var(--accent); }

        /* HERO */
        .hero { margin-top:52px; padding:3rem 2rem 2.5rem; text-align:center;
                background:linear-gradient(135deg,#0d0d0d 0%,#0a1628 50%,#0d0d0d 100%);
                border-bottom:1px solid var(--border); position:relative; overflow:hidden; }
        [data-theme="light"] .hero { background:linear-gradient(135deg,#f6f8fa,#dbeafe,#f6f8fa); }
        .hero::before { content:""; position:absolute; inset:0;
                        background:radial-gradient(ellipse at 50% 0%,rgba(0,212,255,.1) 0%,transparent 65%);
                        pointer-events:none; }
        .hero h1 { font-size:2.4rem; color:var(--accent); margin-bottom:.4rem; position:relative; }
        .hero p { color:var(--text2); margin-bottom:1.2rem; font-size:1rem; }
        .badges { display:flex; gap:.6rem; justify-content:center; flex-wrap:wrap; }
        .badge { padding:.3rem .9rem; border-radius:20px; font-size:.82rem; font-weight:600; }
        .b-green  { background:rgba(63,185,80,.12);  color:var(--green);  border:1px solid rgba(63,185,80,.3); }
        .b-blue   { background:rgba(0,212,255,.1);   color:var(--accent); border:1px solid rgba(0,212,255,.3); }
        .b-yellow { background:rgba(227,179,65,.1);  color:var(--yellow); border:1px solid rgba(227,179,65,.3); }
        .b-purple { background:rgba(167,139,250,.1); color:var(--purple); border:1px solid rgba(167,139,250,.3); }

        /* LAYOUT */
        .layout { display:flex; max-width:1280px; margin:1.5rem auto; padding:0 1.5rem; gap:1.5rem; }
        .sidebar { width:210px; flex-shrink:0; position:sticky; top:64px; align-self:flex-start;
                   background:var(--bg2); border:1px solid var(--border); border-radius:10px;
                   padding:1rem; height:fit-content; }
        .sidebar h4 { color:var(--text2); font-size:.72rem; text-transform:uppercase;
                      letter-spacing:.08em; margin-bottom:.6rem; }
        .sidebar a { display:block; color:var(--text2); text-decoration:none; font-size:.84rem;
                     padding:.3rem .5rem; border-radius:5px; transition:all .2s; margin-bottom:1px; }
        .sidebar a:hover,.sidebar a.active { color:var(--accent); background:rgba(0,212,255,.1); }
        .sidebar .sep { height:1px; background:var(--border); margin:.5rem 0; }
        .content { flex:1; min-width:0; }

        /* SECTION */
        .section { background:var(--bg2); border:1px solid var(--border); border-radius:10px;
                   padding:1.8rem; margin-bottom:1.2rem;
                   box-shadow:0 2px 16px rgba(0,0,0,.2); }
        .sec-hdr { display:flex; align-items:center; gap:.7rem; margin-bottom:1.4rem;
                   padding-bottom:.9rem; border-bottom:1px solid var(--border); }
        .sec-icon { width:34px; height:34px; border-radius:8px; display:flex;
                    align-items:center; justify-content:center; font-size:1rem; flex-shrink:0; }
        .i-blue   { background:rgba(0,212,255,.12); }
        .i-green  { background:rgba(63,185,80,.12); }
        .i-purple { background:rgba(167,139,250,.12); }
        .i-yellow { background:rgba(227,179,65,.12); }
        .i-orange { background:rgba(247,129,102,.12); }
        .section h2 { font-size:1.25rem; color:var(--text); }
        .section h3 { font-size:1rem; color:var(--accent); margin:1.3rem 0 .6rem; }
        .section p  { color:var(--text2); margin-bottom:.8rem; font-size:.95rem; }

        /* ENV TABLE */
        .env-table { width:100%; border-collapse:collapse; font-size:.9rem; }
        .env-table th { background:var(--bg3); color:var(--text2); font-size:.75rem;
                        text-transform:uppercase; letter-spacing:.05em; padding:.6rem .9rem;
                        border:1px solid var(--border); text-align:left; }
        .env-table td { padding:.65rem .9rem; border:1px solid var(--border); vertical-align:top; }
        .env-table tr:hover td { background:rgba(0,212,255,.03); }
        .tag { display:inline-block; padding:.15rem .55rem; border-radius:12px;
               font-size:.78rem; font-weight:600; margin:1px; }
        .tag-green  { background:rgba(63,185,80,.15);  color:var(--green); }
        .tag-blue   { background:rgba(0,212,255,.12);  color:var(--accent); }
        .tag-yellow { background:rgba(227,179,65,.12); color:var(--yellow); }
        .tag-red    { background:rgba(247,129,102,.12);color:var(--orange); }

        /* PORT TABLE */
        .port-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:.8rem; margin:.8rem 0; }
        .port-card { background:var(--bg3); border:1px solid var(--border); border-radius:8px; padding:1rem; }
        .port-num  { font-size:1.4rem; font-weight:700; color:var(--accent); font-family:monospace; }
        .port-dir  { font-size:.75rem; color:var(--text2); margin:.2rem 0; }
        .port-desc { font-size:.88rem; color:var(--text); }

        /* STEP LIST */
        .steps { display:flex; flex-direction:column; gap:0; }
        .step { display:flex; gap:1rem; align-items:flex-start;
                background:var(--bg3); border:1px solid var(--border);
                padding:.9rem 1rem; border-bottom:none; transition:background .2s; }
        .step:first-child { border-radius:8px 8px 0 0; }
        .step:last-child  { border-radius:0 0 8px 8px; border-bottom:1px solid var(--border); }
        .step:hover { background:rgba(0,212,255,.04); }
        .step-n { width:26px; height:26px; border-radius:50%; background:var(--accent);
                  color:#000; display:flex; align-items:center; justify-content:center;
                  font-size:.78rem; font-weight:700; flex-shrink:0; margin-top:2px; }
        .step-title { font-weight:600; color:var(--text); font-size:.95rem; }
        .step-sub   { font-size:.85rem; color:var(--text2); margin-top:.2rem; }

        /* CODE */
        .code-wrap { background:var(--bg3); border:1px solid var(--border);
                     border-radius:8px; overflow:hidden; margin:.8rem 0; }
        .code-hdr  { display:flex; align-items:center; justify-content:space-between;
                     padding:.5rem .9rem; border-bottom:1px solid var(--border);
                     background:rgba(0,0,0,.15); }
        .code-lang { font-size:.77rem; color:var(--text2); font-family:monospace; }
        .copy-btn  { background:transparent; border:1px solid var(--border); color:var(--text2);
                     padding:.18rem .6rem; border-radius:4px; cursor:pointer; font-size:.76rem;
                     transition:all .2s; font-family:inherit; }
        .copy-btn:hover { border-color:var(--accent); color:var(--accent); }
        .code-wrap pre[class*="language-"] { margin:0!important; border-radius:0!important;
                                             background:transparent!important; padding:1rem 1.2rem!important;
                                             font-size:.85rem!important; }
        code.il { background:var(--bg3); border:1px solid var(--border);
                  padding:.12rem .4rem; border-radius:4px; font-family:monospace;
                  font-size:.87em; color:var(--accent); }

        /* WARN / NOTE BOX */
        .box { border-radius:8px; padding:.75rem 1rem; margin:.8rem 0; font-size:.88rem; display:flex; gap:.6rem; }
        .box-warn   { background:rgba(247,129,102,.08); border:1px solid rgba(247,129,102,.25); color:var(--orange); }
        .box-note   { background:rgba(0,212,255,.07);   border:1px solid rgba(0,212,255,.2);   color:var(--accent); }
        .box-ok     { background:rgba(63,185,80,.08);   border:1px solid rgba(63,185,80,.25);  color:var(--green); }
        .box-yellow { background:rgba(227,179,65,.08);  border:1px solid rgba(227,179,65,.25); color:var(--yellow); }

        /* ARCH DIAGRAM */
        .mermaid-wrap { background:var(--bg3); border:1px solid var(--border);
                        border-radius:8px; padding:1.2rem; margin:.8rem 0; text-align:center; overflow-x:auto; }

        /* CHECKLIST */
        .checklist { list-style:none; padding:0; }
        .checklist li { padding:.45rem 0; border-bottom:1px solid var(--border);
                        display:flex; align-items:center; gap:.7rem; font-size:.92rem; }
        .checklist li:last-child { border:none; }
        .ck { width:20px; height:20px; border-radius:4px; display:flex; align-items:center;
              justify-content:center; font-size:.8rem; flex-shrink:0; }
        .ck-ok { background:rgba(63,185,80,.2); color:var(--green); }
        .ck-warn { background:rgba(227,179,65,.2); color:var(--yellow); }

        /* GESTURE CARDS */
        .g-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:.8rem; margin:.8rem 0; }
        .g-card { background:var(--bg3); border:1px solid var(--border); border-radius:8px;
                  padding:1rem; text-align:center; transition:all .25s; cursor:default; }
        .g-card:hover { border-color:var(--accent); transform:translateY(-2px);
                        box-shadow:0 6px 20px rgba(0,212,255,.1); }
        .g-emoji { font-size:2.4rem; display:block; margin-bottom:.4rem; }
        .g-name  { font-weight:700; font-size:.9rem; color:var(--text); }
        .g-cmd   { font-size:.78rem; color:var(--accent); font-family:monospace; margin-top:.2rem; }

        /* SCROLL TOP */
        #scrolltop { position:fixed; bottom:1.5rem; right:1.5rem; width:38px; height:38px;
                     border-radius:50%; background:var(--accent); color:#000; border:none;
                     cursor:pointer; font-size:1rem; display:none; align-items:center;
                     justify-content:center; box-shadow:0 4px 14px rgba(0,212,255,.3);
                     transition:all .2s; z-index:99; }
        #scrolltop:hover { transform:scale(1.1); }
        #scrolltop.show { display:flex; }
        footer { text-align:center; padding:1.5rem; border-top:1px solid var(--border);
                 color:var(--text2); font-size:.82rem; margin-top:.5rem; }
        @media(max-width:900px){ .sidebar{display:none;} .layout{padding:0 1rem;} }
        @media(max-width:600px){ .hero h1{font-size:1.7rem;} .nav-links{display:none;} }
    </style>
</head>
<body>

<nav>
    <span class="nav-logo">ğŸš PX4 SITL å®‰è£æ–‡ä»¶ v2.0</span>
    <div class="nav-links">
        <a href="#env">ç’°å¢ƒè³‡è¨Š</a>
        <a href="#arch">ç³»çµ±æ¶æ§‹</a>
        <a href="#install">å®‰è£æ­¥é©Ÿ</a>
        <a href="#ports">Port å°ç…§</a>
        <a href="#startup">å•Ÿå‹• SOP</a>
        <a href="#gesture">æ‰‹å‹¢å°ç…§</a>
        <a href="#troubleshoot">æ’éŒ¯</a>
    </div>
    <button class="theme-btn" onclick="toggleTheme()" id="themeBtn">â˜€ï¸ æ·ºè‰²</button>
</nav>

<div class="hero">
    <h1>ğŸš PX4 SITL æ‰‹å‹¢æ§åˆ¶ç³»çµ±</h1>
    <p>å®Œæ•´ç’°å¢ƒå®‰è£æ–‡ä»¶ &mdash; æœ€çµ‚æˆåŠŸç‰ˆæœ¬ &mdash; 2026-02-20</p>
    <div class="badges">
        <span class="badge b-green">âœ… ç·¨è­¯æˆåŠŸ</span>
        <span class="badge b-blue">PX4 main branch</span>
        <span class="badge b-yellow">Gazebo Harmonic 8.10.0</span>
        <span class="badge b-purple">Ubuntu 24.04 WSL2</span>
    </div>
</div>

<div class="layout">
<aside class="sidebar">
    <h4>ç›®éŒ„</h4>
    <a href="#env">ç’°å¢ƒè³‡è¨Š</a>
    <a href="#arch">ç³»çµ±æ¶æ§‹</a>
    <div class="sep"></div>
    <a href="#install">å®‰è£æ­¥é©Ÿ</a>
    <a href="#step1">Step 1ï¼šWSL ç¢ºèª</a>
    <a href="#step2">Step 2ï¼šGazebo</a>
    <a href="#step3">Step 3ï¼šclone PX4</a>
    <a href="#step4">Step 4ï¼šä¾è³´å®‰è£</a>
    <a href="#step5">Step 5ï¼šç·¨è­¯</a>
    <div class="sep"></div>
    <a href="#ports">Port å°ç…§</a>
    <a href="#startup">å•Ÿå‹• SOP</a>
    <a href="#gesture">æ‰‹å‹¢å°ç…§</a>
    <a href="#troubleshoot">æ’éŒ¯ç´€éŒ„</a>
</aside>

<main class="content">

<!-- ç’°å¢ƒè³‡è¨Š -->
<section class="section" id="env">
    <div class="sec-hdr">
        <div class="sec-icon i-blue">ğŸ’»</div>
        <h2>æˆåŠŸç’°å¢ƒè³‡è¨Š</h2>
    </div>
    <table class="env-table">
        <tr><th>é …ç›®</th><th>ç‰ˆæœ¬ / è©³ç´°</th><th>ç‹€æ…‹</th></tr>
        <tr><td><strong>WSL2 OS</strong></td>
            <td>Ubuntu 24.04.2 LTS (Noble Numbat)</td>
            <td><span class="tag tag-green">âœ… ç¢ºèª</span></td></tr>
        <tr><td><strong>PX4 ç‰ˆæœ¬</strong></td>
            <td>main branch (2026-02-19 clone)</td>
            <td><span class="tag tag-green">âœ… ç·¨è­¯æˆåŠŸ</span></td></tr>
        <tr><td><strong>Gazebo ç‰ˆæœ¬</strong></td>
            <td>Gazebo Harmonic 8.10.0 (gz-sim8)</td>
            <td><span class="tag tag-green">âœ… é‹è¡Œæ­£å¸¸</span></td></tr>
        <tr><td><strong>gz-transport</strong></td>
            <td>gz-transport13 v13.5.0</td>
            <td><span class="tag tag-green">âœ…</span></td></tr>
        <tr><td><strong>Python</strong></td>
            <td>3.12.3</td>
            <td><span class="tag tag-green">âœ…</span></td></tr>
        <tr><td><strong>OpenCV</strong></td>
            <td>4.6.0</td>
            <td><span class="tag tag-green">âœ…</span></td></tr>
        <tr><td><strong>GStreamer</strong></td>
            <td>1.24.2</td>
            <td><span class="tag tag-green">âœ…</span></td></tr>
        <tr><td><strong>æ¨¡æ“¬æ©Ÿé«”</strong></td>
            <td>X500 (Quadrotor) â€” <code class="il">gz_x500</code></td>
            <td><span class="tag tag-green">âœ…</span></td></tr>
        <tr><td><strong>Windows ç«¯</strong></td>
            <td>Windows 11, Python 3.x, QGroundControl</td>
            <td><span class="tag tag-blue">Bridge</span></td></tr>
        <tr><td><strong>RPI5 ç«¯</strong></td>
            <td>Raspberry Pi OS (Bookworm) 64-bit, Python 3.11+</td>
            <td><span class="tag tag-blue">Edge AI</span></td></tr>
        <tr><td><strong>âš ï¸ æ³¨æ„</strong></td>
            <td colspan="2">v1.14.3 ä¸ç›¸å®¹ Ubuntu 24.04 + Gazebo Harmonicï¼Œå¿…é ˆä½¿ç”¨ <strong>main branch</strong></td></tr>
    </table>
</section>

<!-- ç³»çµ±æ¶æ§‹ -->
<section class="section" id="arch">
    <div class="sec-hdr">
        <div class="sec-icon i-blue">ğŸ—ï¸</div>
        <h2>ç³»çµ±æ¶æ§‹</h2>
    </div>
    <div class="mermaid-wrap">
        <div class="mermaid">
graph LR
    User["ğŸ‘¤ ä½¿ç”¨è€…æ‰‹å‹¢"] -->|Camera 30fps| RPI5["ğŸ“ Raspberry Pi 5
ai_vision_rpi5.py"]
    RPI5 -->|"MediaPipe
Hands"| Logic["ğŸ§  æ‰‹å‹¢è¾¨è­˜"]
    Logic -->|"PyMavlink
MAVLink v1"| UDP1["UDP:14540"]

    subgraph Edge["Edge Device Â· RPI5 Â· 192.168.31.40"]
        RPI5
        Logic
        UDP1
    end

    UDP1 -->|"å€åŸŸç¶²è·¯"| Win["ğŸ–¥ï¸ Windows 11
192.168.31.220
windows_udp_bridge.py"]

    subgraph PC["PC Host Â· Windows 11"]
        Win
    end

    Win -->|"UDP Forward
WSL IP"| WSL["ğŸ§ WSL2 Ubuntu 24.04"]

    subgraph Sim["Simulation Â· WSL2"]
        WSL
        PX4["âš™ï¸ PX4 Autopilot
main branch"]
        Gazebo["ğŸŒ Gazebo Harmonic
8.10.0"]
    end

    WSL --> PX4
    PX4 -->|"gz-transport13"| Gazebo
        </div>
    </div>

    <div class="box box-note">
        â„¹ï¸ <strong>é—œéµè®Šæ›´</strong>ï¼šmain branch çš„ Bridge è½‰ç™¼ Port æ”¹ç‚º <code class="il">14540</code>ï¼ˆåŸ v1.14 æ˜¯ 14550ï¼‰ï¼ŒQGC é€£ç·š Port æ”¹ç‚º <code class="il">18570</code>ã€‚
    </div>
</section>

<!-- å®‰è£æ­¥é©Ÿ -->
<section class="section" id="install">
    <div class="sec-hdr">
        <div class="sec-icon i-green">âš™ï¸</div>
        <h2>å®Œæ•´å®‰è£æ­¥é©Ÿ</h2>
    </div>
    <div class="box box-warn">
        âš ï¸ æ‰€æœ‰ WSL æŒ‡ä»¤éƒ½åœ¨ <strong>WSL Ubuntu çµ‚ç«¯æ©Ÿ</strong>å…§åŸ·è¡Œï¼Œä¸æ˜¯ Windows PowerShellã€‚
    </div>

    <!-- Step 1 -->
    <h3 id="step1">Step 1ï¼šç¢ºèª WSL ç‰ˆæœ¬</h3>
    <div class="code-wrap">
        <div class="code-hdr"><span class="code-lang">bash Â· WSL</span><button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ è¤‡è£½</button></div>
        <pre><code class="language-bash">lsb_release -a
# ç¢ºèªé¡¯ç¤ºï¼šUbuntu 24.04.x LTS (Noble)</code></pre>
    </div>

    <!-- Step 2 -->
    <h3 id="step2">Step 2ï¼šå®‰è£ Gazebo Harmonic</h3>
    <div class="code-wrap">
        <div class="code-hdr"><span class="code-lang">bash Â· WSL</span><button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ è¤‡è£½</button></div>
        <pre><code class="language-bash"># åŠ å…¥ OSRF apt source
sudo apt install curl lsb-release gnupg -y
sudo curl https://packages.osrfoundation.org/gazebo.key | sudo tee /etc/apt/trusted.gpg.d/gazebo.asc
sudo sh -c 'echo "deb http://packages.osrfoundation.org/gazebo/ubuntu-stable noble main" > /etc/apt/sources.list.d/gazebo-stable.list'
sudo apt update

# å®‰è£ Gazebo Harmonic å®Œæ•´å¥—ä»¶
sudo apt install -y   gz-harmonic   libgz-sim8-dev   libgz-transport13-dev   libgz-math7-dev   libgz-msgs10-dev   libgz-plugin2-dev   libgz-common5-dev   gz-tools2

# ç¢ºèªå®‰è£
gz sim --version
# æ‡‰é¡¯ç¤ºï¼šGazebo Sim, version 8.x.x</code></pre>
    </div>

    <!-- Step 3 -->
    <h3 id="step3">Step 3ï¼šclone PX4 main branch</h3>
    <div class="box box-warn">
        âš ï¸ å¿…é ˆ clone åˆ° WSL Linux è·¯å¾‘ (<code class="il">~/</code>)ï¼Œ<strong>ä¸èƒ½æ”¾åœ¨ /mnt/d/ ç­‰ Windows ç£ç¢Ÿ</strong>ï¼Œå¦å‰‡æ•ˆèƒ½æ¥µå·®ä¸”æœƒæœ‰å¥‡æ€ª bugã€‚
    </div>
    <div class="code-wrap">
        <div class="code-hdr"><span class="code-lang">bash Â· WSL</span><button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ è¤‡è£½</button></div>
        <pre><code class="language-bash">cd ~
# å¦‚æœ‰èˆŠç‰ˆå…ˆæ¸…é™¤
rm -rf PX4-Autopilot

# clone main branchï¼ˆå«æ‰€æœ‰ submodulesï¼‰
git clone https://github.com/PX4/PX4-Autopilot.git --recursive -b main

# ç¢ºèªç›®éŒ„
ls ~/PX4-Autopilot</code></pre>
    </div>

    <!-- Step 4 -->
    <h3 id="step4">Step 4ï¼šå®‰è£æ‰€æœ‰ä¾è³´</h3>
    <div class="code-wrap">
        <div class="code-hdr"><span class="code-lang">bash Â· WSL</span><button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ è¤‡è£½</button></div>
        <pre><code class="language-bash">cd ~/PX4-Autopilot

# å®˜æ–¹å®‰è£è…³æœ¬ï¼ˆGazebo éƒ¨åˆ†ï¼‰
bash ./Tools/setup/ubuntu.sh --no-sim-tools

# Python ä¾è³´ï¼ˆUbuntu 24.04 éœ€è¦åŠ  --break-system-packagesï¼‰
pip3 install --break-system-packages -r ./Tools/setup/requirements.txt

# OpenCVï¼ˆoptical flow éœ€è¦ï¼‰
sudo apt install libopencv-dev -y

# GStreamer
sudo apt install -y   libgstreamer1.0-dev   libgstreamer-plugins-base1.0-dev   gstreamer1.0-plugins-bad   gstreamer1.0-libav</code></pre>
    </div>
    <div class="box box-note">
        â„¹ï¸ å®‰è£è…³æœ¬å®Œæˆå¾Œï¼Œåœ¨ <strong>Windows PowerShell</strong> åŸ·è¡Œ <code class="il">wsl --shutdown</code> é‡å•Ÿ WSLï¼Œå†ç¹¼çºŒã€‚
    </div>

    <!-- Step 5 -->
    <h3 id="step5">Step 5ï¼šç·¨è­¯ä¸¦å•Ÿå‹•</h3>
    <div class="code-wrap">
        <div class="code-hdr"><span class="code-lang">bash Â· WSL</span><button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ è¤‡è£½</button></div>
        <pre><code class="language-bash">cd ~/PX4-Autopilot

# æ¸…é™¤èˆŠ cmake cacheï¼ˆé‡è¦ï¼ï¼‰
make distclean

# ç·¨è­¯ä¸¦å•Ÿå‹•ï¼ˆç¬¬ä¸€æ¬¡ç´„ 10~15 åˆ†é˜ï¼‰
make px4_sitl gz_x500</code></pre>
    </div>
    <div class="box box-ok">
        âœ… æˆåŠŸè¨Šè™Ÿï¼šçœ‹åˆ° <code class="il">INFO [px4] Startup script returned successfully</code> ä¸” Gazebo è¦–çª—å½ˆå‡º
    </div>
</section>

<!-- Port å°ç…§ -->
<section class="section" id="ports">
    <div class="sec-hdr">
        <div class="sec-icon i-yellow">ğŸ”Œ</div>
        <h2>Port å°ç…§è¡¨ï¼ˆmain branchï¼‰</h2>
    </div>
    <div class="box box-yellow">
        âš ï¸ <strong>é‡è¦ï¼š</strong>main branch Port èˆ‡ v1.14 ä¸åŒï¼Œ<code class="il">windows_udp_bridge.py</code> çš„ <code class="il">WSL_PORT</code> å¿…é ˆæ”¹æˆ <strong>14540</strong>ã€‚
    </div>
    <div class="port-grid">
        <div class="port-card">
            <div class="port-num">14540</div>
            <div class="port-dir">RPI5 â†’ Windows â†’ WSL</div>
            <div class="port-desc">MAVLink Onboardï¼ˆBridge è½‰ç™¼ç›®æ¨™ï¼‰</div>
        </div>
        <div class="port-card">
            <div class="port-num">18570</div>
            <div class="port-dir">WSL â†’ QGC</div>
            <div class="port-desc">QGC é€£ç·š Portï¼ˆmain branch æ–°å¢ï¼‰</div>
        </div>
        <div class="port-card">
            <div class="port-num">14580</div>
            <div class="port-dir">WSL â†” å¤–éƒ¨</div>
            <div class="port-desc">MAVLink Onboardï¼ˆå‚™ç”¨ï¼‰</div>
        </div>
        <div class="port-card">
            <div class="port-num">14280</div>
            <div class="port-dir">WSL â†” å¤–éƒ¨</div>
            <div class="port-desc">MAVLink Onboardï¼ˆä½é€Ÿï¼‰</div>
        </div>
    </div>

    <h3>windows_udp_bridge.py ä¿®æ”¹é …ç›®</h3>
    <div class="code-wrap">
        <div class="code-hdr"><span class="code-lang">python Â· windows_udp_bridge.py</span><button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ è¤‡è£½</button></div>
        <pre><code class="language-python">EXTERNAL_PORT = 14540   # æ¥æ”¶ RPI5 å‚³ä¾†çš„ MAVLink
WSL_PORT      = 14540   # â† main branch æ”¹ç‚º 14540ï¼ˆåŸ v1.14 æ˜¯ 14550ï¼‰</code></pre>
    </div>
</section>

<!-- å•Ÿå‹• SOP -->
<section class="section" id="startup">
    <div class="sec-hdr">
        <div class="sec-icon i-green">ğŸš€</div>
        <h2>æ¯æ¬¡å•Ÿå‹• SOP</h2>
    </div>
    <div class="steps">
        <div class="step">
            <div class="step-n">1</div>
            <div>
                <div class="step-title">WSLï¼šå•Ÿå‹• PX4 SITL + Gazebo</div>
                <div class="step-sub"><code class="il">cd ~/PX4-Autopilot && make px4_sitl gz_x500</code></div>
                <div class="step-sub">ç­‰å¾… Gazebo è¦–çª—å½ˆå‡º + <code class="il">pxh&gt;</code> æç¤ºå‡ºç¾</div>
            </div>
        </div>
        <div class="step">
            <div class="step-n">2</div>
            <div>
                <div class="step-title">WSL pxh&gt;ï¼šå•Ÿç”¨ç¶²è·¯å»£æ’­</div>
                <div class="step-sub"><code class="il">param set MAV_0_BROADCAST 1</code> ç„¶å¾Œ <code class="il">param save</code></div>
            </div>
        </div>
        <div class="step">
            <div class="step-n">3</div>
            <div>
                <div class="step-title">Windowsï¼šå•Ÿå‹• UDP Bridge</div>
                <div class="step-sub"><code class="il">cd D:\PX4_Gesture_Control && python windows_udp_bridge.py</code></div>
                <div class="step-sub">çœ‹åˆ° WSL IP è‡ªå‹•åµæ¸¬æˆåŠŸå³å¯</div>
            </div>
        </div>
        <div class="step">
            <div class="step-n">4</div>
            <div>
                <div class="step-title">QGroundControlï¼šé€£ç·šç¢ºèª</div>
                <div class="step-sub">QGC æ‡‰è‡ªå‹•é€£ä¸Šï¼Œå³ä¸Šè§’é¡¯ç¤º <code class="il">Armed/Ready</code> ç‹€æ…‹</div>
                <div class="step-sub">è‹¥ç„¡æ³•é€£ç·šï¼Œæ‰‹å‹•è¨­å®š UDP Port: <code class="il">18570</code></div>
            </div>
        </div>
        <div class="step">
            <div class="step-n">5</div>
            <div>
                <div class="step-title">RPI5ï¼šå•Ÿå‹•æ‰‹å‹¢æ§åˆ¶</div>
                <div class="step-sub"><code class="il">python ai_vision_rpi5.py</code></div>
                <div class="step-sub">ç¢ºèª <code class="il">SITL_IP = "192.168.31.220"</code>ï¼ˆWindows IPï¼‰</div>
            </div>
        </div>
        <div class="step">
            <div class="step-n">6</div>
            <div>
                <div class="step-title">æ¸¬è©¦é£›è¡Œ</div>
                <div class="step-sub">âœŒï¸ 2æŒ‡ â†’ ARM ï½œ âœ‹ å±•æŒ â†’ èµ·é£› ï½œ âœŠ æ‹³é ­ â†’ é™è½</div>
            </div>
        </div>
    </div>

    <h3>pxh&gt; æ‰‹å‹•æ¸¬è©¦æŒ‡ä»¤</h3>
    <div class="code-wrap">
        <div class="code-hdr"><span class="code-lang">pxh console</span><button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ è¤‡è£½</button></div>
        <pre><code class="language-bash">param set MAV_0_BROADCAST 1
param save
commander arm -f
commander takeoff</code></pre>
    </div>
</section>

<!-- æ‰‹å‹¢å°ç…§ -->
<section class="section" id="gesture">
    <div class="sec-hdr">
        <div class="sec-icon i-orange">ğŸ¤š</div>
        <h2>æ‰‹å‹¢æŒ‡ä»¤å°ç…§</h2>
    </div>
    <div class="g-grid">
        <div class="g-card">
            <span class="g-emoji">âœŒï¸</span>
            <div class="g-name">2 æŒ‡ (YA)</div>
            <div class="g-cmd">force_arm()</div>
            <div style="font-size:.78rem;color:var(--text2);margin-top:.2rem">GROUND â†’ ARMED</div>
        </div>
        <div class="g-card">
            <span class="g-emoji">âœ‹</span>
            <div class="g-name">5 æŒ‡ (å±•æŒ)</div>
            <div class="g-cmd">takeoff(alt=2.5m)</div>
            <div style="font-size:.78rem;color:var(--text2);margin-top:.2rem">ARMED â†’ AIRBORNE</div>
        </div>
        <div class="g-card">
            <span class="g-emoji">âœŠ</span>
            <div class="g-name">0 æŒ‡ (æ‹³é ­)</div>
            <div class="g-cmd">land()</div>
            <div style="font-size:.78rem;color:var(--text2);margin-top:.2rem">AIRBORNE â†’ LANDING</div>
        </div>
        <div class="g-card">
            <span class="g-emoji">â±ï¸</span>
            <div class="g-name">é˜²æŠ–å»¶é²</div>
            <div class="g-cmd">DEBOUNCE = 2.0s</div>
            <div style="font-size:.78rem;color:var(--text2);margin-top:.2rem">é˜²èª¤è§¸</div>
        </div>
    </div>
</section>

<!-- æ’éŒ¯ç´€éŒ„ -->
<section class="section" id="troubleshoot">
    <div class="sec-hdr">
        <div class="sec-icon i-purple">ğŸ”§</div>
        <h2>æ’éŒ¯ç´€éŒ„ï¼ˆè¸©éçš„å‘ï¼‰</h2>
    </div>

    <h3>âŒ å•é¡Œ 1ï¼šbattery warning â†’ Failsafe å¼·åˆ¶é™è½</h3>
    <div class="box box-warn">åŸå› ï¼šBridge æŠŠ RPI5 çš„ 0% å‡é›»æ± å°åŒ…è¦†è“‹äº† SITL æ¨¡æ“¬é›»æ± </div>
    <div class="box box-ok">è§£æ³•ï¼šæ›ç”¨ main branchï¼Œæ¨¡æ“¬é›»æ± é è¨­æ­£å¸¸ï¼Œå•é¡Œè‡ªå‹•æ¶ˆå¤±</div>

    <h3>âŒ å•é¡Œ 2ï¼šninja: error: unknown target 'gazebo-classic'</h3>
    <div class="box box-warn">åŸå› ï¼šUbuntu 24.04 ä¸æ”¯æ´ Gazebo Classic 11ï¼Œå¥—ä»¶ä¸å­˜åœ¨</div>
    <div class="box box-ok">è§£æ³•ï¼šæ”¹ç”¨ Gazebo Harmonic (gz-harmonic) + PX4 main branch</div>

    <h3>âŒ å•é¡Œ 3ï¼šCould NOT find gz-transport</h3>
    <div class="box box-warn">åŸå› ï¼šPX4 v1.14.3 cmake æ‰¾ä¸åˆ° gz-transportï¼ˆç‰ˆæœ¬å‘½åä¸ç¬¦ï¼‰</div>
    <div class="box box-ok">è§£æ³•ï¼šæ›ç”¨ PX4 main branchï¼ŒåŸç”Ÿæ”¯æ´ gz-transport13</div>

    <h3>âŒ å•é¡Œ 4ï¼šCould NOT find OpenCV</h3>
    <div class="box box-warn">åŸå› ï¼šoptical_flow æ¨¡çµ„éœ€è¦ OpenCV dev å¥—ä»¶</div>
    <div class="code-wrap">
        <div class="code-hdr"><span class="code-lang">bash</span><button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ è¤‡è£½</button></div>
        <pre><code class="language-bash">sudo apt install libopencv-dev -y</code></pre>
    </div>

    <h3>âŒ å•é¡Œ 5ï¼šexternally-managed-environment (pip)</h3>
    <div class="box box-warn">åŸå› ï¼šUbuntu 24.04 + Python 3.12 çš„ PEP 668 ä¿è­·</div>
    <div class="code-wrap">
        <div class="code-hdr"><span class="code-lang">bash</span><button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ è¤‡è£½</button></div>
        <pre><code class="language-bash">pip3 install --break-system-packages -r ./Tools/setup/requirements.txt</code></pre>
    </div>

    <h3>âŒ å•é¡Œ 6ï¼šMAVLink only on localhost</h3>
    <div class="box box-warn">åŸå› ï¼šPX4 é è¨­åªæ¥å—æœ¬æ©Ÿé€£ç·šï¼Œæ‹’çµ• Bridge çš„å¤–éƒ¨ IP</div>
    <div class="code-wrap">
        <div class="code-hdr"><span class="code-lang">pxh console</span><button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ è¤‡è£½</button></div>
        <pre><code class="language-bash">param set MAV_0_BROADCAST 1
param save</code></pre>
    </div>

    <h3>âŒ å•é¡Œ 7ï¼šPX4 æ”¾åœ¨ /mnt/d/ æ•ˆèƒ½æ¥µå·®</h3>
    <div class="box box-warn">åŸå› ï¼šWSL å­˜å– Windows NTFS ç£ç¢Ÿæ•ˆèƒ½åªæœ‰ Linux ext4 çš„ 1/10</div>
    <div class="box box-ok">è§£æ³•ï¼šå¿…é ˆ clone åˆ° <code class="il">~/PX4-Autopilot</code>ï¼ˆWSL Linux è·¯å¾‘ï¼‰</div>
</section>

</main>
</div>

<footer>
    æœ€çµ‚æˆåŠŸç‰ˆæœ¬ Â· 2026-02-20 Â· PX4 main branch + Gazebo Harmonic 8.10.0 + Ubuntu 24.04 WSL2 Â· by Marlon
</footer>

<button id="scrolltop" onclick="window.scrollTo({top:0,behavior:'smooth'})" title="å›åˆ°é ‚éƒ¨">â†‘</button>

<script>
mermaid.initialize({
    startOnLoad: true, theme: 'dark',
    themeVariables: {
        primaryColor: '#1e2430', primaryTextColor: '#c9d1d9',
        primaryBorderColor: '#00d4ff', lineColor: '#555',
        secondaryColor: '#161b22', tertiaryColor: '#0d0d0d',
        clusterBkg: '#161b22', edgeLabelBackground: '#1e2430'
    }
});

function toggleTheme() {
    const isLight = document.body.getAttribute('data-theme') === 'light';
    const t = isLight ? 'dark' : 'light';
    document.body.setAttribute('data-theme', t);
    localStorage.setItem('theme', t);
    document.getElementById('themeBtn').textContent = t === 'light' ? 'ğŸŒ™ æ·±è‰²' : 'â˜€ï¸ æ·ºè‰²';
}
const st = localStorage.getItem('theme') || 'dark';
document.body.setAttribute('data-theme', st);
document.getElementById('themeBtn').textContent = st === 'light' ? 'ğŸŒ™ æ·±è‰²' : 'â˜€ï¸ æ·ºè‰²';

function copyCode(btn) {
    const code = btn.closest('.code-wrap').querySelector('code');
    navigator.clipboard.writeText(code.innerText).then(() => {
        btn.textContent = 'âœ… å·²è¤‡è£½';
        setTimeout(() => btn.textContent = 'ğŸ“‹ è¤‡è£½', 2000);
    });
}

const scrollBtn = document.getElementById('scrolltop');
window.addEventListener('scroll', () => scrollBtn.classList.toggle('show', scrollY > 400));

const secs = document.querySelectorAll('[id]');
const links = document.querySelectorAll('.sidebar a');
window.addEventListener('scroll', () => {
    let cur = '';
    secs.forEach(s => { if (scrollY >= s.offsetTop - 80) cur = s.id; });
    links.forEach(a => a.classList.toggle('active', a.getAttribute('href') === '#' + cur));
});
</script>
</body>
</html>