<!DOCTYPE html>
<html lang="zh-TW" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UAS R&D Hub (ç¹é«”ä¸­æ–‡å·¥ç¨‹ç‰ˆ V3.3)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');
        
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: #020617; 
            color: #cbd5e1; 
        }
        .mono-font { font-family: 'JetBrains Mono', monospace; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        /* UI Components */
        #reading-progress { 
            position: fixed; top: 0; left: 0; height: 3px; 
            background: linear-gradient(90deg, #38bdf8, #10b981); 
            z-index: 9999; transition: width 0.2s ease; width: 0%; 
        }
        #back-to-top { 
            position: fixed; bottom: 2rem; right: 2rem; width: 3rem; height: 3rem; 
            background: #0ea5e9; color: white; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; 
            cursor: pointer; opacity: 0; transform: translateY(100px); 
            transition: all 0.3s ease; z-index: 1000; box-shadow: 0 4px 12px rgba(14, 165, 233, 0.4); 
        }
        #back-to-top.visible { opacity: 1; transform: translateY(0); }
        #back-to-top:hover { background: #0284c7; transform: translateY(-4px); }

        .search-container { position: relative; }
        .search-results { 
            position: absolute; top: 100%; left: 0; right: 0; 
            background: #1e293b; border: 1px solid #334155; border-radius: 0.5rem; 
            margin-top: 0.5rem; max-height: 400px; overflow-y: auto; z-index: 50; 
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5); 
        }
        .search-result-item { padding: 0.75rem 1rem; border-bottom: 1px solid #334155; cursor: pointer; transition: all 0.2s; }
        .search-result-item:hover { background: #334155; padding-left: 1.5rem; }

        .bookmark-badge { 
            position: absolute; top: 1rem; right: 1rem; cursor: pointer; 
            font-size: 1.5rem; color: #64748b; transition: all 0.2s; z-index: 10; 
        }
        .bookmark-badge.bookmarked { color: #fbbf24; }

        .nav-item.active { background-color: rgba(14, 165, 233, 0.15); color: #38bdf8; border-left: 3px solid #38bdf8; }
        
        .interactive-card, .port-connector, .topo-block, .tool-card { 
            transition: all 0.2s ease; cursor: pointer; border: 1px solid #334155; min-height: 44px; 
        }
        .interactive-card:hover, .port-connector:hover, .topo-block:hover, .tool-card:hover { 
            transform: translateY(-2px); box-shadow: 0 0 15px rgba(56, 189, 248, 0.15); 
            border-color: #38bdf8; background-color: rgba(30, 41, 59, 0.8); 
        }

        .voltage-tag { padding: 2px 6px; border-radius: 4px; font-size: 0.65rem; font-weight: bold; margin-right: 4px; display: inline-block;}
        .v-5 { background: rgba(244, 63, 94, 0.15); color: #fb7185; border: 1px solid rgba(244, 63, 94, 0.3); }
        .v-33 { background: rgba(56, 189, 248, 0.15); color: #38bdf8; border: 1px solid rgba(56, 189, 248, 0.3); }
        
        .source-badge { display: inline-flex; align-items: center; padding: 0.125rem 0.5rem; border-radius: 9999px; font-size: 0.65rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge-datasheet { background-color: rgba(168, 85, 247, 0.1); border: 1px solid rgba(168, 85, 247, 0.3); color: #c084fc; }
        .badge-procurement { background-color: rgba(236, 72, 153, 0.1); border: 1px solid rgba(236, 72, 153, 0.3); color: #f472b6; }
        .badge-protocol { background-color: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); color: #60a5fa; }
        .badge-aiot { background-color: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3); color: #a78bfa; }
        .badge-log { background-color: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.3); color: #fbbf24; }
        .badge-exam { background-color: rgba(132, 204, 22, 0.1); border: 1px solid rgba(132, 204, 22, 0.3); color: #a3e635; }
        .badge-official { background-color: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); color: #818cf8; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.3s ease; }

        /* Topology Diagram Styles */
        .topo-container { display: flex; flex-direction: column; gap: 1rem; }
        .topo-box { flex: 1; background: #0f172a; border: 1px solid #334155; padding: 1rem; border-radius: 0.5rem; position: relative; }
        .border-l-accent { border-left: 3px solid; }

        .foc-step { position: relative; }
        .foc-step::after { content: 'âœ'; position: absolute; right: -20px; top: 50%; transform: translateY(-50%); color: #475569; font-size: 1.2rem; }
        .foc-step:last-child::after { display: none; }
        @media (max-width: 768px) { .foc-step::after { right: 50%; top: auto; bottom: -25px; transform: translateX(50%) rotate(90deg); } }
        
        .pin-table th { text-align: left; padding: 0.5rem; color: #94a3b8; font-size: 0.7rem; text-transform: uppercase; border-bottom: 1px solid #334155; }
        .pin-table td { padding: 0.5rem; border-bottom: 1px solid #1e293b; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; color: #cbd5e1; }
        .chart-container { position: relative; width: 100%; height: 300px; max-height: 400px; }

        /* Theme Toggle */
        .theme-toggle { width: 3rem; height: 1.5rem; background: #334155; border-radius: 9999px; position: relative; cursor: pointer; transition: background 0.3s; }
        .theme-toggle.active { background: #0ea5e9; }
        .theme-toggle-slider { position: absolute; top: 2px; left: 2px; width: 1.25rem; height: 1.25rem; background: white; border-radius: 50%; transition: transform 0.3s; }
        .theme-toggle.active .theme-toggle-slider { transform: translateX(1.5rem); }

        /* Tour Overlay */
        .tour-overlay { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); z-index: 9998; display: none; }
        .tour-overlay.active { display: block; }
        .tour-tooltip { position: fixed; background: #1e293b; border: 2px solid #38bdf8; border-radius: 8px; padding: 1.5rem; max-width: 350px; z-index: 10000; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5); }
        .tour-btn { padding: 0.5rem 1rem; border-radius: 0.375rem; font-size: 0.875rem; font-weight: 600; cursor: pointer; transition: all 0.2s; border: none; }
        .tour-btn-primary { background: #0ea5e9; color: white; }
        .tour-btn-secondary { background: #334155; color: #cbd5e1; }
        .tour-highlight { position: relative; z-index: 9999 !important; box-shadow: 0 0 0 4px rgba(56, 189, 248, 0.5); background-color: #1e293b; border-radius: 0.5rem; }
        
        /* IO Logic Flow */
        .io-flow-container { position: relative; display: flex; align-items: center; justify-content: space-between; font-size: 0.75rem; }
        .io-box { padding: 0.5rem; border-radius: 4px; border: 1px solid #475569; background: #1e293b; text-align: center; font-weight: bold; width: 22%; }
        .io-arrow { color: #64748b; font-size: 1rem; }
        
        /* Official Docs Table Styles */
        .specs-table td { padding: 0.5rem; border-bottom: 1px solid #334155; vertical-align: top; }
        .specs-table tr:last-child td { border-bottom: none; }
        .specs-key { font-weight: bold; color: #94a3b8; width: 30%; }
        .specs-val { color: #e2e8f0; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; }
        .pinout-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1rem; }
        .connector-box { background: #1e293b; border: 1px solid #334155; border-radius: 0.5rem; padding: 1rem; }
        .connector-title { font-weight: bold; color: #38bdf8; border-bottom: 1px solid #475569; padding-bottom: 0.5rem; margin-bottom: 0.5rem; display: flex; justify-content: space-between; }
        .pin-row { display: flex; justify-content: space-between; font-size: 0.75rem; padding: 0.25rem 0; border-bottom: 1px dashed #334155; }
        .pin-row:last-child { border-bottom: none; }
    </style>
</head>
<body class="flex flex-col md:flex-row min-h-screen">

    <div id="reading-progress"></div>
    <div id="back-to-top"><i class="fa-solid fa-arrow-up"></i></div>

    <!-- Tour Overlay -->
    <div id="tour-overlay" class="tour-overlay"></div>

    <!-- Mobile Header -->
    <div class="md:hidden bg-slate-900 border-b border-slate-800 p-4 flex justify-between items-center sticky top-0 z-50">
        <h1 class="font-bold text-lg text-slate-100"><i class="fa-solid fa-code mr-2"></i>UAS R&D Hub</h1>
        <button id="mobile-menu-btn" class="text-slate-400 focus:outline-none text-2xl">â˜°</button>
    </div>

    <!-- Sidebar -->
    <nav id="sidebar" class="hidden md:flex flex-col w-64 bg-slate-900 border-r border-slate-800 h-screen sticky top-0 z-40 overflow-y-auto" data-tour="sidebar">
        <div class="p-6 border-b border-slate-800">
            <h1 class="text-xl font-bold text-slate-100 tracking-tight mono-font">UAS<span class="text-sky-500">_Dev</span></h1>
            <p class="text-xs text-slate-500 mt-1">ç¹é«”ä¸­æ–‡å·¥ç¨‹ç‰ˆ V3.3</p>
        </div>

        <div class="p-4 border-b border-slate-800 search-container" data-tour="search">
            <input type="text" id="search-input" placeholder="æœå°‹ (Ctrl+K)..." class="w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-sm text-slate-200 focus:outline-none focus:border-sky-500 transition">
            <div id="search-results" class="search-results hidden"></div>
        </div>

        <div class="px-4 py-3 border-b border-slate-800 flex items-center justify-between">
            <span class="text-xs text-slate-500">æ·±è‰²æ¨¡å¼</span>
            <div class="theme-toggle active" id="theme-toggle"><div class="theme-toggle-slider"></div></div>
        </div>

        <div class="px-4 py-3 border-b border-slate-800" data-tour="bookmarks">
            <div class="flex items-center justify-between mb-2">
                <span class="text-xs font-bold text-slate-500 uppercase">æ›¸ç±¤</span>
                <span id="bookmark-count" class="text-xs text-sky-400">0</span>
            </div>
            <div id="bookmark-list" class="space-y-1 text-xs"></div>
        </div>

        <div class="flex-1 py-4 space-y-1">
            <div class="px-4 py-2 text-xs font-bold text-slate-600 uppercase">æˆ°ç•¥èˆ‡è³‡æº (Strategic)</div>
            <a href="#" data-section="section-roadmap" class="nav-item block px-6 py-3 text-sm font-medium text-orange-400 hover:bg-slate-800 hover:text-orange-200 border-l-4 border-transparent transition-colors active bg-orange-900/10"><i class="fa-solid fa-chess-knight mr-2 w-4"></i>æŠ€è¡“è·¯ç·šåœ– (Roadmap)</a>
            <a href="#" data-section="section-official-docs" class="nav-item block px-6 py-3 text-sm font-medium text-indigo-400 hover:bg-slate-800 hover:text-indigo-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-book-atlas mr-2 w-4"></i>å®˜æ–¹æŠ€è¡“æ‰‹å†Š (Docs)</a>
            <a href="#" data-section="section-teardown" class="nav-item block px-6 py-3 text-sm font-medium text-emerald-400 hover:bg-slate-800 hover:text-emerald-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-box-open mr-2 w-4"></i>X500 ç¡¬é«”æ‹†è§£ (Ref)</a>
            <a href="#" data-section="section-build-aiot" class="nav-item block px-6 py-3 text-sm font-medium text-pink-400 hover:bg-slate-800 hover:text-pink-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-cart-shopping mr-2 w-4"></i>X500 AIoT å»ºç½® (Build)</a>
            <a href="#" data-section="section-logs" class="nav-item block px-6 py-3 text-sm font-medium text-amber-400 hover:bg-slate-800 hover:text-amber-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-clipboard-list mr-2 w-4"></i>å°ˆæ¡ˆå¯¦ä½œæ—¥èªŒ (SOP)</a>
            <a href="#" data-section="section-resources" class="nav-item block px-6 py-3 text-sm font-medium text-teal-400 hover:bg-slate-800 hover:text-teal-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-microchip mr-2 w-4"></i>è³‡æºåº« (BOM/Glossary)</a>

            <div class="px-4 py-2 mt-4 text-xs font-bold text-slate-600 uppercase">ç¡¬é«”å·¥ç¨‹ (Hardware)</div>
            <a href="#" data-section="section-mcu" class="nav-item block px-6 py-3 text-sm font-medium text-purple-400 hover:bg-slate-800 hover:text-purple-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-brain mr-2 w-4"></i>MCU æ¶æ§‹èˆ‡å®‰å…¨</a>
            <a href="#" data-section="section-hardware" class="nav-item block px-6 py-3 text-sm font-medium text-slate-400 hover:bg-slate-800 hover:text-slate-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-dna mr-2 w-4"></i>ç¡¬é«”è§£å‰–èˆ‡æ„Ÿæ¸¬å™¨</a>
            <a href="#" data-section="section-pixhawk" class="nav-item block px-6 py-3 text-sm font-medium text-slate-400 hover:bg-slate-800 hover:text-slate-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-server mr-2 w-4"></i>Pixhawk 6C æ¥å£</a>
            <a href="#" data-section="section-design" class="nav-item block px-6 py-3 text-sm font-medium text-pink-400 hover:bg-slate-800 hover:text-pink-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-compass-drafting mr-2 w-4"></i>è‡ªè£½è¼‰æ¿æŒ‡å— (Design)</a>
            <a href="#" data-section="section-bldc" class="nav-item block px-6 py-3 text-sm font-medium text-sky-400 hover:bg-slate-800 hover:text-sky-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-bolt mr-2 w-4"></i>BLDC é¦¬é”å¯¦é©—å®¤ (Full)</a>
            
            <div class="px-4 py-2 mt-4 text-xs font-bold text-slate-600 uppercase">é‚è¼¯èˆ‡è»Ÿé«” (Logic/Soft)</div>
            <a href="#" data-section="section-intro" class="nav-item block px-6 py-3 text-sm font-medium text-slate-400 hover:bg-slate-800 hover:text-slate-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-chart-pie mr-2 w-4"></i>é£›è¡Œç‰©ç†èˆ‡æ··æ§</a>
            <a href="#" data-section="section-protocols" class="nav-item block px-6 py-3 text-sm font-medium text-blue-400 hover:bg-slate-800 hover:text-blue-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-wave-square mr-2 w-4"></i>é€šè¨Šå”å®š (RF/DShot)</a>
            <a href="#" data-section="section-pid" class="nav-item block px-6 py-3 text-sm font-medium text-slate-400 hover:bg-slate-800 hover:text-slate-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-arrow-trend-up mr-2 w-4"></i>PID æ§åˆ¶ç†è«–</a>
            <a href="#" data-section="section-software" class="nav-item block px-6 py-3 text-sm font-medium text-slate-400 hover:bg-slate-800 hover:text-slate-200 border-l-4 border-transparent transition-colors"><i class="fa-brands fa-git-alt mr-2 w-4"></i>è»Ÿé«”æ£§ (PX4/Ardu)</a>
            <a href="#" data-section="section-devenv" class="nav-item block px-6 py-3 text-sm font-medium text-indigo-400 hover:bg-slate-800 hover:text-indigo-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-laptop-code mr-2 w-4"></i>é–‹ç™¼ç’°å¢ƒ (Toolchain)</a>
            <a href="#" data-section="section-aiot" class="nav-item block px-6 py-3 text-sm font-medium text-violet-400 hover:bg-slate-800 hover:text-violet-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-network-wired mr-2 w-4"></i>AIoT èˆ‡ Trainer Port</a>
            <a href="#" data-section="section-maint" class="nav-item block px-6 py-3 text-sm font-medium text-slate-400 hover:bg-slate-800 hover:text-slate-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-wrench mr-2 w-4"></i>æ•…éšœè¨ºæ–· (Debug)</a>
            <!-- æ–°å¢: è€ƒè©¦æŒ‡å— -->
            <a href="#" data-section="section-exam" class="nav-item block px-6 py-3 text-sm font-medium text-lime-400 hover:bg-slate-800 hover:text-lime-200 border-l-4 border-transparent transition-colors"><i class="fa-solid fa-graduation-cap mr-2 w-4"></i>CAA è¡“ç§‘æ¸¬é©— (Exam)</a>
        </div>
        <div class="p-4 border-t border-slate-800">
            <button onclick="startTour()" class="w-full bg-sky-600 hover:bg-sky-500 text-white py-2 rounded text-sm font-bold transition">
                <i class="fa-solid fa-route mr-2"></i>é–‹å§‹å°è¦½
            </button>
        </div>
        <div class="p-4 bg-slate-950 border-t border-slate-800 text-xs text-slate-500">Engineer: Marlon | V3.3 Official Specs</div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 p-4 md:p-10 overflow-x-hidden">

        <!-- ==================== 1. Roadmap ==================== -->
        <section id="section-roadmap" class="mb-16 animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-roadmap"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">æŠ€è¡“æ¼”é€²èˆ‡å®šä½ (Tech Roadmap & Evolution)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-holybro">Official</span>
                    <span>FMUv6 vs FMUv7 (RT)</span>
                </div>
            </header>
            
            <div class="grid lg:grid-cols-2 gap-8 mb-8">
                <!-- Current Gen: Pixhawk 6C -->
                <div class="bg-slate-900 p-6 rounded-xl border-l-4 border-emerald-500 shadow-lg relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-10"><i class="fa-solid fa-microchip text-9xl"></i></div>
                    <span class="bg-emerald-900/50 text-emerald-400 px-2 py-1 rounded text-xs font-bold uppercase mb-2 inline-block">Current Standard (ç¾åœ¨ä¸»æµ)</span>
                    <h3 class="text-2xl font-bold text-white mb-2">Pixhawk 6C (FMUv6C)</h3>
                    <p class="text-sm text-slate-400 mb-6">ç›®å‰å¸‚å ´ä¸Šç›¸å®¹æ€§æœ€é«˜ã€æœ€ç©©å®šçš„æ¨™æº–ã€‚å°ˆç‚ºä¸­é«˜éšç„¡äººæ©Ÿè¨­è¨ˆï¼Œå¼·èª¿æ€§åƒ¹æ¯”èˆ‡æ•´åˆåº¦ã€‚</p>
                    
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="w-8 mt-1 text-emerald-500"><i class="fa-solid fa-brain"></i></div>
                            <div>
                                <strong class="text-slate-200 block text-sm">STM32H743 (MCU)</strong>
                                <span class="text-xs text-slate-500">480MHz, Cortex-M7ã€‚æ•ˆèƒ½è¶³ä»¥æ‡‰ä»˜é«˜é »ç‡ EKF3 èˆ‡æŒ¯å‹•æ¿¾æ³¢ï¼Œæ˜¯ç›®å‰ PX4/ArduPilot çš„ç”œèœœé»ã€‚</span>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-8 mt-1 text-emerald-500"><i class="fa-solid fa-cubes"></i></div>
                            <div>
                                <strong class="text-slate-200 block text-sm">All-in-One è¨­è¨ˆ</strong>
                                <span class="text-xs text-slate-500">é£›æ§æ ¸å¿ƒèˆ‡æ¥å£è¼‰æ¿ (Baseboard) æ•´åˆåœ¨ä¸€èµ· (é™¤ Mini ç‰ˆå¤–)ï¼Œæ¸›å°‘æ¥è§¸ä¸è‰¯é¢¨éšªï¼Œé©åˆé‡ç”¢æ©Ÿã€‚</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Next Gen: FMURT7 -->
                <div class="bg-slate-900 p-6 rounded-xl border-l-4 border-orange-500 shadow-lg relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-10"><i class="fa-solid fa-rocket text-9xl"></i></div>
                    <span class="bg-orange-900/50 text-orange-400 px-2 py-1 rounded text-xs font-bold uppercase mb-2 inline-block">Next Gen (æœªä¾†æ¶æ§‹)</span>
                    <h3 class="text-2xl font-bold text-white mb-2">Pixhawk RT (FMURT7)</h3>
                    <p class="text-sm text-slate-400 mb-6">ç‚ºäº†è§£æ±º H7 é »å¯¬ç“¶é ¸è€Œç”Ÿçš„æ¬¡ä¸–ä»£æ¶æ§‹ã€‚é‡å°é‚Šç·£é‹ç®— (Edge AI) èˆ‡å·¥æ¥­ç´šæ¨¡çµ„åŒ–éœ€æ±‚ã€‚</p>
                    
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="w-8 mt-1 text-orange-500"><i class="fa-solid fa-bolt"></i></div>
                            <div>
                                <strong class="text-slate-200 block text-sm">i.MX RT1176 (Crossover)</strong>
                                <span class="text-xs text-slate-500">1GHz é›™æ ¸å¿ƒ (M7+M4)ã€‚åŸç”Ÿæ”¯æ´ Gigabit Ethernetï¼Œæ‰“ç ´ STM32 çš„é »å¯¬å¤©èŠ±æ¿ã€‚</span>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-8 mt-1 text-orange-500"><i class="fa-solid fa-puzzle-piece"></i></div>
                            <div>
                                <strong class="text-slate-200 block text-sm">PAB æ¨™æº– (æ¨¡çµ„åŒ–)</strong>
                                <span class="text-xs text-slate-500">Pixhawk Autopilot Busã€‚å°‡ã€Œé‹ç®—æ ¸å¿ƒã€åšæˆé¡ä¼¼ SIM å¡çš„æ¨¡çµ„ï¼Œå¯æ’æ‹”å‡ç´šï¼Œè¼‰æ¿å¯é€šç”¨ã€‚</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Key Peripherals -->
            <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                <h4 class="font-bold text-slate-200 mb-4 text-sm uppercase tracking-wider flex items-center">
                    <i class="fa-solid fa-plug mr-2 text-indigo-400"></i>
                    6C é—œéµå‘¨é‚Šæ”¯æ´ (Key Peripherals)
                </h4>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-slate-950 p-3 rounded border border-slate-700 flex items-start">
                        <i class="fa-solid fa-satellite-dish text-sky-500 mt-1 mr-3"></i>
                        <div>
                            <strong class="text-slate-300 text-sm block">Unicore UM982 (é›™å¤©ç·š RTK)</strong>
                            <p class="text-xs text-slate-500 mt-1">6C åŸç”Ÿæ”¯æ´ã€‚é€éé›™å¤©ç·šç›´æ¥è¨ˆç®—èˆªå‘ (Heading)ï¼Œå–ä»£å‚³çµ±ç£ç¾…ç›¤ï¼Œå¾¹åº•è§£æ±ºé«˜å£“é›»å¡”/æ©‹æ¨‘ä¸‹çš„ç£å¹²æ“¾å•é¡Œã€‚</p>
                        </div>
                    </div>
                    <div class="bg-slate-950 p-3 rounded border border-slate-700 flex items-start">
                        <i class="fa-solid fa-car-battery text-rose-500 mt-1 mr-3"></i>
                        <div>
                            <strong class="text-slate-300 text-sm block">PM08D (æ•¸ä½é›»æºæ¨¡çµ„)</strong>
                            <p class="text-xs text-slate-500 mt-1">6C æ¨™é…ã€‚é€é I2C (INA226) é€šè¨Šï¼Œæ¯”å‚³çµ±é¡æ¯” ADC æ›´ç²¾æº–ã€‚æ”¯æ´ 14S é«˜å£“ (60V) èˆ‡ 200A å¤§é›»æµã€‚</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== NEW SECTION: Official Docs ==================== -->
        <section id="section-official-docs" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-official-docs"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">Pixhawk 6C å®˜æ–¹æŠ€è¡“æ‰‹å†Š (Official Docs)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-official">Holybro Docs</span>
                    <span>FMUv6C Open Standard</span>
                </div>
            </header>

            <div class="bg-slate-900 rounded-xl border border-slate-800 overflow-hidden mb-8">
                <div class="flex border-b border-slate-800 bg-slate-950 overflow-x-auto">
                    <button onclick="switchDocsTab('specs')" id="tab-docs-specs" class="px-6 py-4 text-sm font-bold text-indigo-400 bg-slate-900 border-r border-slate-800 transition whitespace-nowrap">è¦æ ¼ç¸½è¦½ (Specs)</button>
                    <button onclick="switchDocsTab('ports')" id="tab-docs-ports" class="px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap">æ¥å£å®šç¾©å¤§å…¨ (Ports)</button>
                </div>

                <!-- Tab 1: Specs -->
                <div id="content-docs-specs" class="p-6 md:p-8 animate-fade-in">
                    <div class="grid lg:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-bold text-white mb-4">è™•ç†å™¨èˆ‡æ„Ÿæ¸¬å™¨ (Processors & Sensors)</h3>
                            <table class="w-full text-sm specs-table">
                                <tr><td class="specs-key">FMU Processor</td><td class="specs-val">STM32H743 (Cortex-M7, 480MHz, 2MB Flash, 1MB RAM)</td></tr>
                                <tr><td class="specs-key">IO Processor</td><td class="specs-val">STM32F103 (Cortex-M3, 72MHz, 64KB SRAM)</td></tr>
                                <tr><td class="specs-key">Accel/Gyro 1</td><td class="specs-val text-emerald-400">ICM-42688-P (High Performance)</td></tr>
                                <tr><td class="specs-key">Accel/Gyro 2</td><td class="specs-val text-emerald-400">BMI088 (Replaces discontinued BMI055)</td></tr>
                                <tr><td class="specs-key">Magnetometer</td><td class="specs-val">IST8310</td></tr>
                                <tr><td class="specs-key">Barometer</td><td class="specs-val">MS5611</td></tr>
                            </table>

                            <h3 class="text-xl font-bold text-white mb-4 mt-8">é›»æ°£ç‰¹æ€§ (Electrical Data)</h3>
                            <table class="w-full text-sm specs-table">
                                <tr><td class="specs-key">Max Input</td><td class="specs-val text-rose-400">6V</td></tr>
                                <tr><td class="specs-key">USB Power</td><td class="specs-val">4.75 ~ 5.25V</td></tr>
                                <tr><td class="specs-key">Servo Rail</td><td class="specs-val">0 ~ 36V</td></tr>
                                <tr><td class="specs-key">Telem1 Limit</td><td class="specs-val">1.5A (Independent)</td></tr>
                                <tr><td class="specs-key">Other Ports</td><td class="specs-val">1.5A (Combined Limit)</td></tr>
                            </table>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-white mb-4">æ©Ÿæ¢°æ•¸æ“š (Mechanical)</h3>
                            <table class="w-full text-sm specs-table">
                                <tr><td class="specs-key">Dimensions</td><td class="specs-val">84.8 x 44 x 12.4 mm</td></tr>
                                <tr><td class="specs-key">Weight</td><td class="specs-val">59.3g (Aluminum) / 34.6g (Plastic)</td></tr>
                                <tr><td class="specs-key">Operating Temp</td><td class="specs-val">-40 ~ 85Â°C</td></tr>
                            </table>

                            <h3 class="text-xl font-bold text-white mb-4 mt-8">ä¸»è¦æ¥å£ (Interfaces)</h3>
                            <ul class="list-disc list-inside text-sm text-slate-400 space-y-2 mono-font">
                                <li>16x PWM (8 IO, 8 FMU) w/ 3.3V/5V switch</li>
                                <li>3x General Purpose Serial (Telem 1/2/3)</li>
                                <li>2x GPS Ports (GPS1 Full, GPS2 Basic)</li>
                                <li>2x CAN Buses (CAN FD)</li>
                                <li>1x I2C Port</li>
                                <li>1x Dedicated RC Input (Spektrum/SBUS/PPM)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: Ports -->
                <div id="content-docs-ports" class="hidden p-6 md:p-8 animate-fade-in">
                    <div class="bg-amber-900/20 border border-amber-800 p-4 rounded mb-6">
                        <strong class="text-amber-400 block mb-1"><i class="fa-solid fa-triangle-exclamation mr-2"></i>ç‰ˆæœ¬å·®ç•°è­¦å‘Š (Critical Notes)</strong>
                        <ul class="list-disc list-inside text-xs text-slate-300">
                            <li><strong>Telem 3:</strong> åºè™Ÿç‚º <code>XXXX 001 XXXXXX</code> çš„ç‰ˆæœ¬ï¼ŒPin 4/5 å›ºå®šé€£æ¥åˆ° I2C4 (3.3V)ã€‚ä¸å¯é€£æ¥é I2C è¨­å‚™ã€‚</li>
                            <li><strong>I2C Port:</strong> åºè™Ÿ <code>XXXX XXX 20221100</code> åŠä»¥å‰çš„ç‰ˆæœ¬ï¼Œé€£æ¥çš„æ˜¯ I2C4ã€‚</li>
                        </ul>
                    </div>

                    <div class="pinout-grid">
                        <!-- Power -->
                        <div class="connector-box">
                            <div class="connector-title"><span>POWER 1 & 2</span> <span class="text-xs text-slate-500">6-Pin</span></div>
                            <div class="pin-row"><span class="text-rose-400">1</span> <span>VDD_5V (In)</span></div>
                            <div class="pin-row"><span class="text-rose-400">2</span> <span>VDD_5V (In)</span></div>
                            <div class="pin-row"><span class="text-slate-400">3</span> <span>CURRENT (3.3V)</span></div>
                            <div class="pin-row"><span class="text-slate-400">4</span> <span>VOLTAGE (3.3V)</span></div>
                            <div class="pin-row"><span class="text-slate-500">5</span> <span>GND</span></div>
                            <div class="pin-row"><span class="text-slate-500">6</span> <span>GND</span></div>
                        </div>

                        <!-- Telem 1 -->
                        <div class="connector-box">
                            <div class="connector-title"><span>TELEM 1</span> <span class="text-xs text-slate-500">6-Pin</span></div>
                            <div class="pin-row"><span class="text-rose-400">1</span> <span>VCC_5V</span></div>
                            <div class="pin-row"><span class="text-slate-400">2</span> <span>UART7_TX</span></div>
                            <div class="pin-row"><span class="text-slate-400">3</span> <span>UART7_RX</span></div>
                            <div class="pin-row"><span class="text-slate-400">4</span> <span>UART7_CTS</span></div>
                            <div class="pin-row"><span class="text-slate-400">5</span> <span>UART7_RTS</span></div>
                            <div class="pin-row"><span class="text-slate-500">6</span> <span>GND</span></div>
                        </div>

                        <!-- GPS 1 -->
                        <div class="connector-box">
                            <div class="connector-title"><span>GPS 1</span> <span class="text-xs text-slate-500">10-Pin</span></div>
                            <div class="pin-row"><span class="text-rose-400">1</span> <span>VCC_5V</span></div>
                            <div class="pin-row"><span class="text-slate-400">2</span> <span>TX1</span></div>
                            <div class="pin-row"><span class="text-slate-400">3</span> <span>RX1</span></div>
                            <div class="pin-row"><span class="text-emerald-400">4</span> <span>SCL1</span></div>
                            <div class="pin-row"><span class="text-emerald-400">5</span> <span>SDA1</span></div>
                            <div class="pin-row"><span class="text-amber-400">6</span> <span>SAFETY_SW</span></div>
                            <div class="pin-row"><span class="text-amber-400">7</span> <span>SAFETY_LED</span></div>
                            <div class="pin-row"><span class="text-slate-400">9</span> <span>BUZZER</span></div>
                            <div class="pin-row"><span class="text-slate-500">10</span> <span>GND</span></div>
                        </div>

                        <!-- USB -->
                        <div class="connector-box">
                            <div class="connector-title"><span>USB Port</span> <span class="text-xs text-slate-500">4-Pin</span></div>
                            <div class="pin-row"><span class="text-rose-400">1</span> <span>VBUS (+5V)</span></div>
                            <div class="pin-row"><span class="text-slate-400">2</span> <span>DM (D-)</span></div>
                            <div class="pin-row"><span class="text-slate-400">3</span> <span>DP (D+)</span></div>
                            <div class="pin-row"><span class="text-slate-500">4</span> <span>GND</span></div>
                        </div>

                        <!-- CAN -->
                        <div class="connector-box">
                            <div class="connector-title"><span>CAN 1 & 2</span> <span class="text-xs text-slate-500">4-Pin</span></div>
                            <div class="pin-row"><span class="text-rose-400">1</span> <span>VCC_5V</span></div>
                            <div class="pin-row"><span class="text-slate-400">2</span> <span>CAN_H</span></div>
                            <div class="pin-row"><span class="text-slate-400">3</span> <span>CAN_L</span></div>
                            <div class="pin-row"><span class="text-slate-500">4</span> <span>GND</span></div>
                        </div>

                        <!-- I2C -->
                        <div class="connector-box">
                            <div class="connector-title"><span>I2C Port</span> <span class="text-xs text-slate-500">4-Pin</span></div>
                            <div class="pin-row"><span class="text-rose-400">1</span> <span>VCC_5V</span></div>
                            <div class="pin-row"><span class="text-emerald-400">2</span> <span>SCL (I2C2/4*)</span></div>
                            <div class="pin-row"><span class="text-emerald-400">3</span> <span>SDA (I2C2/4*)</span></div>
                            <div class="pin-row"><span class="text-slate-500">4</span> <span>GND</span></div>
                        </div>

                        <!-- RC PPM/SBUS -->
                        <div class="connector-box">
                            <div class="connector-title"><span>RC Port</span> <span class="text-xs text-slate-500">PPM/SBUS</span></div>
                            <div class="pin-row"><span class="text-rose-400">1</span> <span>VDD_5V</span></div>
                            <div class="pin-row"><span class="text-sky-400">2</span> <span>PPM/SBUS_IN</span></div>
                            <div class="pin-row"><span class="text-slate-400">3</span> <span>RSSI_IN</span></div>
                            <div class="pin-row"><span class="text-slate-500">5</span> <span>GND</span></div>
                        </div>

                        <!-- Debug -->
                        <div class="connector-box">
                            <div class="connector-title"><span>FMU Debug</span> <span class="text-xs text-slate-500">JST-SH 10-Pin</span></div>
                            <div class="pin-row"><span class="text-rose-400">1</span> <span>VDD_3V3</span></div>
                            <div class="pin-row"><span class="text-slate-400">2</span> <span>UART3_TX</span></div>
                            <div class="pin-row"><span class="text-slate-400">3</span> <span>UART3_RX</span></div>
                            <div class="pin-row"><span class="text-slate-400">4</span> <span>SWD_IO</span></div>
                            <div class="pin-row"><span class="text-slate-400">5</span> <span>SWD_CK</span></div>
                            <div class="pin-row"><span class="text-slate-500">10</span> <span>GND</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== 2. Teardown (Updated) ==================== -->
        <section id="section-teardown" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-teardown"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">X500 V2 ç¡¬é«”æ‹†è§£ (Hardware Teardown)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-teardown">å¯¦æ©Ÿæ‹†è§£</span>
                    <span>Holybro X500 V2 Kit</span>
                </div>
            </header>
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                    <h3 class="text-xl font-bold text-emerald-400 mb-4 flex items-center">
                        <i class="fa-solid fa-microchip mr-2"></i>é£›æ§ç³»çµ± (Updated)
                    </h3>
                    <div class="space-y-3 text-sm text-slate-300">
                        <div class="flex justify-between py-2 border-b border-slate-800">
                            <span class="text-slate-500">é£›æ§:</span>
                            <span class="font-bold">Pixhawk 6C</span>
                        </div>
                        <div class="flex justify-between py-2 border-b border-slate-800">
                            <span class="text-slate-500">MCU:</span>
                            <span class="font-mono text-xs">STM32H743 @ 480MHz</span>
                        </div>
                        <div class="flex justify-between py-2 border-b border-slate-800">
                            <span class="text-slate-500">IMU:</span>
                            <span>ICM-42688-P + BMI088</span>
                        </div>
                        <div class="flex justify-between py-2 border-b border-slate-800">
                            <span class="text-slate-500">Mag:</span>
                            <span>IST8310</span>
                        </div>
                        <div class="flex justify-between py-2">
                            <span class="text-slate-500">Baro:</span>
                            <span>MS5611</span>
                        </div>
                    </div>
                </div>
                <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                    <h3 class="text-xl font-bold text-sky-400 mb-4 flex items-center">
                        <i class="fa-solid fa-bolt mr-2"></i>å‹•åŠ›ç³»çµ±
                    </h3>
                    <div class="space-y-3 text-sm text-slate-300">
                        <div class="flex justify-between py-2 border-b border-slate-800">
                            <span class="text-slate-500">é¦¬é”:</span>
                            <span class="font-bold">2216 KV880</span>
                        </div>
                        <div class="flex justify-between py-2 border-b border-slate-800">
                            <span class="text-slate-500">ESC:</span>
                            <span>BLHeli_S 20A (DShot)</span>
                        </div>
                        <div class="flex justify-between py-2 border-b border-slate-800">
                            <span class="text-slate-500">èºæ—‹æ§³:</span>
                            <span>10" ç¢³çº–ç¶­</span>
                        </div>
                        <div class="flex justify-between py-2">
                            <span class="text-slate-500">é›»æ± :</span>
                            <span>4S 5200mAh LiPo</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                <h3 class="text-lg font-bold text-slate-200 mb-4">
                    <i class="fa-solid fa-weight-hanging mr-2 text-amber-500"></i>é‡é‡åˆ†æ
                </h3>
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="bg-slate-900 p-4 rounded border border-slate-700 text-center">
                        <div class="text-2xl font-bold text-emerald-400">1.3 kg</div>
                        <div class="text-xs text-slate-500 mt-1">æ©Ÿæ¶ + é£›æ§</div>
                    </div>
                    <div class="bg-slate-900 p-4 rounded border border-slate-700 text-center">
                        <div class="text-2xl font-bold text-sky-400">0.6 kg</div>
                        <div class="text-xs text-slate-500 mt-1">å‹•åŠ›ç³»çµ±</div>
                    </div>
                    <div class="bg-slate-900 p-4 rounded border border-slate-700 text-center">
                        <div class="text-2xl font-bold text-amber-400">0.5 kg</div>
                        <div class="text-xs text-slate-500 mt-1">é›»æ± </div>
                    </div>
                </div>
                <div class="mt-4 p-4 bg-slate-800 rounded border-l-4 border-emerald-500">
                    <strong class="text-emerald-400">ç¸½é‡:</strong>
                    <span class="text-slate-300 ml-2">ç´„ 2.4 kg (ç©ºè¼‰)</span>
                    <span class="text-slate-500 text-xs ml-4">| æœ€å¤§èµ·é£›é‡é‡: 3.5 kg</span>
                </div>
            </div>
        </section>

        <!-- ==================== 3. X500-AIoT Build ==================== -->
        <section id="section-build-aiot" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-build-aiot"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">X500-AIoT-V1 ç¡¬é«”æ¡è³¼èˆ‡æ¶æ§‹ (Procurement)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-procurement">Project Spec</span>
                    <span>2026/02/12 Updated</span>
                </div>
            </header>

            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Left: BOM -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Flight Platform -->
                    <div class="bg-slate-900 rounded-xl border border-slate-800 overflow-hidden">
                        <div class="px-6 py-4 bg-slate-950 border-b border-slate-800 flex justify-between">
                            <h3 class="font-bold text-sky-400">1. æ ¸å¿ƒé£›è¡Œå¹³å° (Flight Platform)</h3>
                            <span class="text-xs text-slate-500">åº•å±¤æ§åˆ¶èˆ‡å‹•åŠ›</span>
                        </div>
                        <table class="w-full text-sm text-left text-slate-400">
                            <tbody class="divide-y divide-slate-800">
                                <tr>
                                    <td class="p-4"><strong class="text-white block">Holybro X500 V2 ARF</strong><span class="text-xs">å«é¦¬é” 2216/920KV, é›»è®Š 20A, PDB</span></td>
                                    <td class="p-4 text-right">ARF é ç„Šç‰ˆç¯€çœä½ˆç·šæ™‚é–“ã€‚</td>
                                </tr>
                                <tr>
                                    <td class="p-4"><strong class="text-white block">Pixhawk 6C (Alu Case)</strong><span class="text-xs">STM32H743 + F103</span></td>
                                    <td class="p-4 text-right">é‹æ®¼ç‰ˆæŠ— EMI å¹²æ“¾èƒ½åŠ›è¼ƒä½³ã€‚</td>
                                </tr>
                                <tr>
                                    <td class="p-4"><strong class="text-white block">Holybro M10 GPS</strong><span class="text-xs">u-blox M10 Chip</span></td>
                                    <td class="p-4 text-right">å¤šæ˜Ÿç³»å®šä½ï¼Œå†·å•Ÿå‹•å¿«ã€‚</td>
                                </tr>
                                <tr>
                                    <td class="p-4"><strong class="text-white block">RadioMaster RP1</strong><span class="text-xs">ELRS 2.4GHz</span></td>
                                    <td class="p-4 text-right">CRSF å”å®šï¼Œä½å»¶é²æ§åˆ¶ã€‚</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Edge AI -->
                    <div class="bg-slate-900 rounded-xl border border-slate-800 overflow-hidden">
                        <div class="px-6 py-4 bg-slate-950 border-b border-slate-800 flex justify-between">
                            <h3 class="font-bold text-violet-400">2. é‚Šç·£é‹ç®—èˆ‡è¦–è¦º (Edge AI)</h3>
                            <span class="text-xs text-slate-500">YOLOv8 / VSLAM</span>
                        </div>
                        <table class="w-full text-sm text-left text-slate-400">
                            <tbody class="divide-y divide-slate-800">
                                <tr>
                                    <td class="p-4"><strong class="text-white block">Raspberry Pi 5 (8GB)</strong><span class="text-xs">Cortex-A76 Quad</span></td>
                                    <td class="p-4 text-right">8GB é©åˆè·‘ YOLOv8 Nano/Smallã€‚</td>
                                </tr>
                                <tr>
                                    <td class="p-4"><strong class="text-white block">Active Cooler</strong><span class="text-xs">åŸå» ä¸»å‹•æ•£ç†±</span></td>
                                    <td class="p-4 text-right">é˜²æ­¢ AI å…¨é€Ÿé‹ç®—æ™‚ç†±é™é »ã€‚</td>
                                </tr>
                                <tr>
                                    <td class="p-4"><strong class="text-white block">Global Shutter Cam</strong><span class="text-xs">Raspberry Pi GS / OAK-D</span></td>
                                    <td class="p-4 text-right">å…¨åŸŸå¿«é–€æ¶ˆé™¤é£›è¡Œæœå‡æ•ˆæ‡‰ (Jello)ã€‚</td>
                                </tr>
                                <tr>
                                    <td class="p-4 border-l-4 border-rose-500 bg-rose-900/10"><strong class="text-rose-300 block">UBEC 5.1V/5A (Low Noise)</strong><span class="text-xs">Matek/Mauch ç­‰ç´š</span></td>
                                    <td class="p-4 text-right text-rose-300">Pi 5 éœ€ç¨ç«‹ä½å£“é™ä¾›é›»ï¼Œä¸å¯åƒé£›æ§é›»æºï¼</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Right: Topology & Notes -->
                <div class="space-y-8">
                    <!-- Topology Visualized -->
                    <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                        <h3 class="font-bold text-emerald-400 mb-4"><i class="fa-solid fa-sitemap mr-2"></i>ç³»çµ±æ•´åˆæ¶æ§‹</h3>
                        <div class="topo-container text-xs">
                            <div class="topo-box border-l-accent border-rose-500">
                                <h4 class="text-rose-400">âš¡ é›»æºå±¤ (Power)</h4>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="bg-slate-800 px-2 py-1 rounded">LiPo 4S</span>
                                    <i class="fa-solid fa-arrow-right text-slate-600"></i>
                                    <span class="bg-slate-800 px-2 py-1 rounded">PDB</span>
                                </div>
                                <div class="space-y-1 pl-2 border-l border-slate-700">
                                    <div class="flex justify-between"><span>â¡ Power Module</span> <span class="text-sky-400">Pixhawk</span></div>
                                    <div class="flex justify-between"><span>â¡ XT30/UBEC</span> <span class="text-violet-400">RPi 5</span></div>
                                </div>
                            </div>
                            <div class="topo-box border-l-accent border-sky-500">
                                <h4 class="text-sky-400">ğŸ® æ§åˆ¶å±¤ (Control)</h4>
                                <div class="flex justify-between">
                                    <span class="bg-slate-800 px-2 py-1 rounded">Pixhawk 6C</span>
                                    <span class="text-slate-500 text-center">TELEM2<br>921600</span>
                                    <span class="bg-slate-800 px-2 py-1 rounded">RPi 5</span>
                                </div>
                            </div>
                            <div class="topo-box border-l-accent border-violet-500">
                                <h4 class="text-violet-400">ğŸ§  AI å±¤ (Vision)</h4>
                                <div class="flex flex-col gap-2">
                                    <div class="flex justify-between"><span>RPi 5</span> <i class="fa-solid fa-link"></i> <span>Global Cam</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tech Notes -->
                    <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                        <h3 class="font-bold text-amber-400 mb-4"><i class="fa-solid fa-user-graduate mr-2"></i>å·¥ç¨‹å¸«ç­†è¨˜</h3>
                        <ul class="text-sm text-slate-300 space-y-3 list-disc list-inside">
                            <li><strong class="text-white">ä¾›é›»éš”é›¢:</strong> Pi 5 é‹ç®—çªæ³¢æ¥µå¤§ï¼Œå‹™å¿…ä½¿ç”¨ä½å£“é™ UBEC èª¿è‡³ 5.1V è£œå„Ÿç·šæã€‚</li>
                            <li><strong class="text-white">æ•£ç†±å¹²æ“¾:</strong> Active Cooler çš„ PWM è¨Šè™Ÿæœ‰å¾®å¼± EMIï¼Œè«‹èˆ‡ GPS æ¡…æ†ä¿æŒç‰©ç†è·é›¢ã€‚</li>
                            <li><strong class="text-white">é¿éœ‡:</strong> å…¨åŸŸå¿«é–€ç›¸æ©Ÿä»éœ€çŸ½è† æ¸›éœ‡çƒï¼Œé¿å…é«˜é »éœ‡å‹•å½±éŸ¿ IMU/å½±åƒã€‚</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== 4. R&D Logs (SOP) ==================== -->
        <section id="section-logs" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-logs"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">å°ˆæ¡ˆå¯¦ä½œæ—¥èªŒèˆ‡ SOP (Project Logs & SOP)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-log">å¯¦ä½œç´€éŒ„</span>
                    <span>2026/02/12 æ›´æ–° (X500-V2)</span>
                </div>
            </header>

            <div class="bg-slate-900 rounded-xl border border-slate-800 overflow-hidden mb-8">
                <div class="flex border-b border-slate-800 bg-slate-950 overflow-x-auto">
                    <button onclick="switchLogsTab('status')" id="tab-log-status" class="px-6 py-4 text-sm font-bold text-amber-400 bg-slate-900 border-r border-slate-800 transition whitespace-nowrap">å°ˆæ¡ˆç¾æ³ (Status)</button>
                    <button onclick="switchLogsTab('sop')" id="tab-log-sop" class="px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap">SOP é…ç½®æŒ‡å— (Configuration)</button>
                </div>

                <!-- Tab 1: Status -->
                <div id="content-logs-status" class="p-6 md:p-8 animate-fade-in">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-xl font-bold text-amber-400"><i class="fa-solid fa-helicopter mr-2"></i>Holybro X500 V2 ç³»çµ±æ•´åˆ</h3>
                            <p class="text-sm text-slate-400 mt-1">Pixhawk 6C / PX4 v1.14.x / Operator: Marlon</p>
                        </div>
                        <div class="text-right">
                            <span class="bg-emerald-900/30 text-emerald-400 px-3 py-1 rounded text-sm font-bold border border-emerald-800">Flight Ready</span>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-slate-900 p-4 rounded border border-slate-700">
                            <strong class="text-sky-400 block mb-2">ç³»çµ±é©—æ”¶ç‹€æ…‹</strong>
                            <ul class="text-sm text-slate-300 space-y-2">
                                <li><i class="fa-solid fa-check text-emerald-500 mr-2"></i><strong>æ©Ÿæ¶:</strong> Holybro X500 V2 (Quad X)</li>
                                <li><i class="fa-solid fa-check text-emerald-500 mr-2"></i><strong>æ„Ÿæ¸¬å™¨:</strong> Accel, Gyro, Mag, Level æ ¡æ­£å®Œæˆ</li>
                                <li><i class="fa-solid fa-check text-emerald-500 mr-2"></i><strong>å‹•åŠ›:</strong> é¦¬é”è½‰å‘é©—è­‰é€šé (1000-2000us PWM)</li>
                                <li><i class="fa-regular fa-square text-slate-500 mr-2"></i><strong>é™æ§:</strong> R81 æ¥æ”¶æ©Ÿå®‰è£æ ¡æ­£å®Œæˆ</li>
                            </ul>
                        </div>
                        <div class="bg-slate-900 p-4 rounded border border-slate-700">
                            <strong class="text-amber-400 block mb-2">æ¶æ§‹æ“ä½œå®šç¾©</strong>
                            <table class="w-full text-xs text-left text-slate-400">
                                <thead>
                                    <tr><th class="pb-1">çµ„ä»¶</th><th class="pb-1">é€£ç·š</th><th class="pb-1">åŠŸèƒ½å®šç¾©</th></tr>
                                </thead>
                                <tbody class="divide-y divide-slate-800">
                                    <tr><td class="py-1">QGC (PC)</td><td>USB</td><td>å·¥å» é…ç½®ã€éŸŒé«”æ›´æ–°</td></tr>
                                    <tr><td class="py-1">QGC (PC)</td><td>433MHz</td><td>åœ°é¢ç«™ç›£æ§ (Telemetry)</td></tr>
                                    <tr><td class="py-1">RC (TX16S)</td><td>2.4GHz</td><td>å³æ™‚å§¿æ…‹æ§åˆ¶ (Real-time)</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: SOP -->
                <div id="content-logs-sop" class="hidden p-6 md:p-8 animate-fade-in">
                    <div class="space-y-6">
                        <div class="bg-slate-900 p-4 rounded border border-slate-800">
                            <h4 class="text-lg font-bold text-emerald-400 mb-3 border-l-4 border-emerald-500 pl-3">1. æ„Ÿæ¸¬å™¨æ ¡æ­£ (Calibration)</h4>
                            <p class="text-sm text-slate-300 mb-2"><strong>åŠ é€Ÿåº¦è¨ˆ (Wall-Assist):</strong> é‡å° Nose Down è¶…æ™‚å•é¡Œï¼Œæ¡ç”¨ã€Œé ç‰†æ³•ã€ç‰©ç†å›ºå®šæ©Ÿèº«ï¼Œæ¶ˆé™¤æ‰‹æŒå¾®éœ‡å‹•ã€‚é©—è­‰ Z è»¸ â‰ˆ 9.8 m/sÂ²ã€‚</p>
                            <p class="text-sm text-slate-300 mb-2"><strong>ç¾…ç›¤:</strong> æ—‹è½‰æ©Ÿèº« 6 é¢ã€‚è‹¥å ±éŒ¯ "Inconsistent"ï¼Œéœ€é‡å•Ÿæˆ–é é›¢ç£å¹²æ“¾ã€‚</p>
                            <p class="text-xs text-slate-500 italic mt-2">*æ ¡æ­£å¾Œå‹™å¿…æ–·é›»é‡å•Ÿä»¥æ›´æ–° EKFã€‚</p>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-slate-900 p-4 rounded border border-slate-800">
                                <h4 class="text-lg font-bold text-sky-400 mb-3 border-l-4 border-sky-500 pl-3">2. é™æ§å™¨å°é »èˆ‡é…ç½®</h4>
                                <ul class="text-sm text-slate-300 space-y-1">
                                    <li><strong>TX16S:</strong> Mode 2 (å·¦æ‰‹æ²¹é–€)</li>
                                    <li><strong>Internal RF:</strong> FrSkyX2 (D16)</li>
                                    <li><strong>é€šé“é©—è­‰:</strong> å³æ‰‹æ–æ¡¿å‘å³ &rarr; QGC Roll æ•¸å€¼å¢åŠ ã€‚</li>
                                </ul>
                            </div>
                            <div class="bg-slate-900 p-4 rounded border border-slate-800">
                                <h4 class="text-lg font-bold text-rose-400 mb-3 border-l-4 border-rose-500 pl-3">3. é£›è¡Œæ¨¡å¼ (Flight Modes)</h4>
                                <ul class="text-sm text-slate-300 space-y-1">
                                    <li><strong>High (ä¸Š):</strong> Stabilized (è‡ªç©©ï¼Œå®¤å…§ç„¡ GPS å¿…ç”¨)</li>
                                    <li><strong>Mid (ä¸­):</strong> Position (å®šé»ï¼Œæˆ¶å¤–æ¨™æº–)</li>
                                    <li><strong>Low (ä¸‹):</strong> Return (è‡ªå‹•è¿”èˆª RTL)</li>
                                </ul>
                            </div>
                        </div>

                        <div class="bg-slate-900 p-4 rounded border border-slate-800">
                            <h4 class="text-lg font-bold text-amber-400 mb-3 border-l-4 border-amber-500 pl-3">4. å‹•åŠ›èˆ‡è§£é–é©—è­‰ (Props OFF)</h4>
                            <div class="grid grid-cols-2 gap-4 text-sm text-slate-300">
                                <div>
                                    <strong>è§£é–æŒ‡ä»¤ (Arming):</strong><br>
                                    æ²¹é–€ç½®æ–¼æœ€ä½ï¼Œä¸¦å‘å³ä¸‹è§’ (Yaw Right) ä¿æŒ 3 ç§’ã€‚
                                </div>
                                <div>
                                    <strong>è½‰å‘é©—è­‰ (Quad-X):</strong><br>
                                    M1(å³ä¸Š)/M2(å·¦ä¸‹): CCW (éŠ€å¸½)<br>
                                    M3(å·¦ä¸Š)/M4(å³ä¸‹): CW (é»‘å¸½)
                                </div>
                            </div>
                            <div class="mt-3 p-2 bg-amber-900/20 border border-amber-800 rounded text-xs text-amber-400">
                                <strong>é—œéµä¿®æ­£:</strong> æ›¾é‡é¦¬é”ç„¡åæ‡‰ï¼Œç¶“æŸ¥ç‚ºæ¥ç·šéŒ¯èª¤ã€‚ESC è¨Šè™Ÿç·šå¿…é ˆæ¥åœ¨ <strong>IO PWM OUT (Main)</strong>ï¼Œä¸¦ç¢ºèª <code>CBRK_IO_SAFETY</code> åƒæ•¸è¨­å®šæ­£ç¢ºã€‚
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== 5. MCU Deep Dive ==================== -->
        <section id="section-mcu" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-mcu"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">STM32 æ™¶ç‰‡æ¶æ§‹è©³è§£ (MCU Deep Dive)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-datasheet">Datasheet</span>
                    <span>STM32H753 / H743 / F103</span>
                </div>
            </header>
            
            <div class="grid lg:grid-cols-2 gap-8 mb-8">
                <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fa-solid fa-brain mr-2 text-purple-500"></i>
                        ä¸»é£›æ§æ ¸å¿ƒ (FMU): H7 ç³»åˆ—
                    </h3>
                    <div class="space-y-6">
                        <div class="bg-slate-900 p-4 rounded-lg border border-slate-700">
                            <div class="grid grid-cols-2 gap-4 border-b border-slate-800 pb-2 mb-2">
                                <div>
                                    <h4 class="text-emerald-400 font-bold">STM32H753</h4>
                                    <span class="text-xs text-slate-500">Pixhawk 6X (ä¼æ¥­ç´š)</span>
                                </div>
                                <div>
                                    <h4 class="text-sky-400 font-bold">STM32H743</h4>
                                    <span class="text-xs text-slate-500">Pixhawk 6C (æ¨™æº–ç´š)</span>
                                </div>
                            </div>
                            <ul class="text-sm text-slate-300 space-y-2 list-disc list-inside">
                                <li><strong>é‹ç®—æ ¸å¿ƒ:</strong> Cortex-M7 @ 480MHz (æ¼”ç®—æ³•ä¸»ç®—åŠ›)ã€‚</li>
                                <li><strong>AXI Bus Matrix:</strong> ç¢ºä¿ RAM èˆ‡é€±é‚Š (Ethernet/SDMMC) çš„ä½µç™¼å­˜å–ä¸å¡è»Šã€‚</li>
                                <li><strong>å·®ç•°é» (Security):</strong> <br>
                                    <span class="text-emerald-400">H753</span> ç¨æœ‰ç¡¬é«”åŠ å¯†å¼•æ“ (Crypto/Hash),æ”¯æ´é«˜å¼·åº¦ Secure Boot é˜²ç¯¡æ”¹ã€‚
                                </li>
                            </ul>
                        </div>
                        <div class="bg-slate-800 p-3 rounded text-xs text-slate-400 border-l-4 border-purple-500">
                            <strong>DMA æ¶æ§‹é‡é»:</strong>H7 å…·å‚™ MDMA (Master DMA),å¯åœ¨ä¸ä½”ç”¨ CPU æƒ…æ³ä¸‹,è‡ªä¸»æ¬é‹å¤§é‡æ„Ÿæ¸¬å™¨ SPI æ•¸æ“šåˆ° RAM,é€™æ˜¯é«˜é »ç‡ (8kHz Loop) é‹ä½œçš„é—œéµã€‚
                        </div>
                    </div>
                </div>

                <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fa-solid fa-shield-halved mr-2 text-rose-500"></i>
                        IO å”è™•ç†å™¨ (STM32F103)
                    </h3>
                    <div class="bg-slate-900 p-4 rounded-lg border border-slate-700 h-full">
                        <div class="mb-4 pb-2 border-b border-slate-800">
                            <h4 class="text-rose-400 font-bold">PX4IO æ¶æ§‹ (Safety Island)</h4>
                            <span class="text-xs text-slate-500">ç›®çš„:ç•¶ä¸»æ ¸ (H7) ç•¶æ©Ÿæ™‚,ç¢ºä¿é£›æ©Ÿä»å—æ§åˆ¶ã€‚</span>
                        </div>
                        <div class="io-flow-container mb-6 bg-slate-900 p-2 rounded border border-slate-800">
                            <div class="io-box border-emerald-900 text-emerald-400">RC Input<br><span class="text-[10px] text-slate-500">SBUS/PPM</span></div>
                            <i class="fa-solid fa-arrow-right io-arrow"></i>
                            <div class="io-box border-rose-900 text-rose-400">F103 IO<br><span class="text-[10px] text-slate-500">Mixing/Mux</span></div>
                            <i class="fa-solid fa-arrow-right io-arrow"></i>
                            <div class="io-box border-sky-900 text-sky-400">Main Out<br><span class="text-[10px] text-slate-500">PWM 1-8</span></div>
                        </div>
                        <div class="space-y-4 text-sm text-slate-300">
                            <div>
                                <strong class="text-white block mb-1">é—œéµåŠŸèƒ½:</strong>
                                <ul class="list-none space-y-3 mt-2">
                                    <li class="relative pl-4 border-l-2 border-emerald-500">
                                        <strong class="text-emerald-300 text-xs uppercase block">1. RC Decoding</strong> 
                                        è² è²¬ç¹é‡çš„ä¸­æ–·è§£ç¢¼,æ¸›è¼• H7 è² æ“”ã€‚
                                    </li>
                                    <li class="relative pl-4 border-l-2 border-rose-500">
                                        <strong class="text-rose-300 text-xs uppercase block">2. Failsafe Mux</strong> 
                                        è‹¥ H7 å¿ƒè·³åœæ­¢,IO è‡ªå‹•åˆ‡æ› RC ç›´é€šæ¨¡å¼ (Manual Override)ã€‚
                                    </li>
                                    <li class="relative pl-4 border-l-2 border-amber-500">
                                        <strong class="text-amber-300 text-xs uppercase block">3. FMU Link (1.5Mbps)</strong> 
                                        å°ˆç”¨äºŒé€²åˆ¶å”è­°,CRC æ ¡é©—,500ms Watchdog æ©Ÿåˆ¶ã€‚
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== 6. Hardware Anatomy ==================== -->
        <section id="section-hardware" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-hardware"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">ç¡¬é«”è§£å‰–å­¸ (Hardware Anatomy)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-teardown">ç¡¬é«”æ¨¡çµ„æ¶æ§‹</span>
                </div>
            </header>
            <div class="grid md:grid-cols-4 gap-4" id="anatomy-grid"></div>
            <div id="anatomy-detail" class="mt-6 bg-slate-800/50 border border-slate-700 p-6 rounded-xl shadow-lg hidden">
                <h3 id="detail-title" class="text-xl font-bold text-sky-400 mb-2"></h3>
                <p id="detail-desc" class="text-slate-300 mb-4"></p>
                <div class="bg-slate-900 p-4 rounded border border-slate-800">
                    <h4 class="text-xs text-slate-500 uppercase font-bold mb-2">æŠ€è¡“è¦æ ¼ (Technical Specs)</h4>
                    <ul class="space-y-2 text-sm text-emerald-400 mono-font" id="detail-specs"></ul>
                </div>
            </div>
        </section>

        <!-- ==================== 7. Pixhawk 6X vs 6C ==================== -->
        <section id="section-pixhawk" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-pixhawk"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">Pixhawk 6X/6C æ¥å£å®šç¾© (Pinouts)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-standard">DS-012/018</span>
                    <span>è¦æ ¼å·²é©—è­‰</span>
                </div>
            </header>

            <div class="grid lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 bg-slate-900 p-6 rounded-xl border border-slate-800">
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        <div class="port-connector bg-slate-900/50 p-3 rounded text-center" data-port="power">
                            <div class="port-label text-rose-400">POWER 1/2</div>
                            <i class="fa-solid fa-battery-full text-xl text-rose-500 my-2"></i>
                        </div>
                        <div class="port-connector bg-slate-900/50 p-3 rounded text-center" data-port="gps">
                            <div class="port-label text-emerald-400">GPS 1/2</div>
                            <i class="fa-solid fa-satellite text-xl text-emerald-500 my-2"></i>
                        </div>
                        <div class="port-connector bg-slate-900/50 p-3 rounded text-center" data-port="telem">
                            <div class="port-label text-sky-400">TELEM 1-3</div>
                            <i class="fa-solid fa-wifi text-xl text-sky-500 my-2"></i>
                        </div>
                        <div class="port-connector bg-slate-900/50 p-3 rounded text-center" data-port="fmu_pwm">
                            <div class="port-label text-amber-400">FMU PWM</div>
                            <i class="fa-solid fa-fan text-xl text-amber-500 my-2"></i>
                        </div>
                        <div class="port-connector bg-slate-900/50 p-3 rounded text-center" data-port="io_pwm">
                            <div class="port-label text-slate-300">IO PWM</div>
                            <i class="fa-solid fa-gears text-xl text-slate-400 my-2"></i>
                        </div>
                        <div class="port-connector bg-slate-900/50 p-3 rounded text-center" data-port="can">
                            <div class="port-label text-indigo-400">CAN 1/2</div>
                            <i class="fa-solid fa-network-wired text-xl text-indigo-500 my-2"></i>
                        </div>
                    </div>
                </div>
                <div class="lg:col-span-1">
                    <div id="port-detail-panel" class="bg-slate-900 border border-slate-700 h-full rounded-xl p-6 shadow-lg animate-fade-in flex flex-col">
                        <div class="flex items-center mb-4 pb-4 border-b border-slate-800">
                            <div id="port-icon" class="text-2xl mr-3"></div>
                            <div><h4 id="port-title" class="text-xl font-bold text-white">è«‹é¸æ“‡æ¥å£</h4></div>
                        </div>
                        <div id="port-content" class="text-sm text-slate-400 flex-1 overflow-y-auto">
                            <p class="italic opacity-70">é»æ“Šå·¦å´åœ–è¡¨æŸ¥çœ‹é›»æµé™åˆ¶èˆ‡é‚è¼¯é›»å¹³ã€‚</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== 8. Design Guide ==================== -->
        <section id="section-design" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-design"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">è‡ªè£½è¼‰æ¿æŒ‡å— (Hardware Design Guide)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-design">Reference Design</span>
                    <span>ç›¸å®¹ FMUv6C æ¨™æº–</span>
                </div>
            </header>
            <div class="bg-amber-900/10 border border-amber-800 p-4 rounded-lg mb-8 flex items-start">
                <i class="fa-solid fa-circle-exclamation text-amber-500 mt-1 mr-3"></i>
                <div class="text-sm text-slate-300">
                    <strong class="text-amber-400 block mb-1">é—œæ–¼ Pixhawk 6C åŸç†åœ–</strong>
                    <p>å®˜æ–¹ä¸¦æœªå…¬é–‹ 6C åŸç†åœ– (SCH)ã€‚å»ºè­°æ¡ç”¨ <strong>FMUv6C æ¨™æº– + é–‹æºè¨­è¨ˆ (å¦‚ Pix32 v6)</strong> çš„ç­–ç•¥ã€‚ä¸‹æ–¹æä¾›å¯¦ä½œå°å‘çš„æ¨¡çµ„æ‹†è§£èˆ‡å®Œæ•´ H743 Pin Mappingã€‚</p>
                </div>
            </div>
            
            <!-- Tab Navigation for Design -->
            <div class="bg-slate-900 rounded-xl border border-slate-800 overflow-hidden mb-8">
                <div class="flex border-b border-slate-800 bg-slate-950 overflow-x-auto">
                    <button onclick="showDesignTab('modules')" id="tab-design-modules" class="px-6 py-4 text-sm font-bold text-pink-400 bg-slate-900 border-r border-slate-800 transition whitespace-nowrap">æ¨¡çµ„æ‹†è§£æ¸…å–®</button>
                    <button onclick="showDesignTab('pinout')" id="tab-design-pinout" class="px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap">All Pin Define (Searchable)</button>
                </div>
                
                <!-- Content: Modules -->
                <div id="content-design-modules" class="p-6 md:p-8 animate-fade-in">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="text-sky-400 font-bold mb-3 border-b border-sky-900 pb-2">1. æ ¸å¿ƒèˆ‡ IO (Core)</h4>
                            <ul class="space-y-3 text-sm text-slate-400">
                                <li><strong class="text-white">FMU:</strong> STM32H743ZIT6 (LQFP144)ã€‚å¤–æ› QSPI Flash (å„²å­˜)ã€FRAM (åƒæ•¸)ã€‚</li>
                                <li><strong class="text-white">IO MCU:</strong> STM32F103C8T6ã€‚è² è²¬ PWM è¼¸å‡ºèˆ‡ RC è§£ç¢¼ã€‚</li>
                            </ul>
                            <h4 class="text-emerald-400 font-bold mb-3 mt-6 border-b border-emerald-900 pb-2">2. æ„Ÿæ¸¬å™¨ (Sensors)</h4>
                            <ul class="space-y-3 text-sm text-slate-400">
                                <li><strong class="text-white">IMU 1 (SPI):</strong> ICM-42688-P (High Performance).</li>
                                <li><strong class="text-white">IMU 2 (SPI):</strong> BMI088 (Robustness).</li>
                                <li><strong class="text-white">Mag (I2C):</strong> IST8310.</li>
                                <li><strong class="text-white">Baro (I2C):</strong> MS5611.</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="text-rose-400 font-bold mb-3 border-b border-rose-900 pb-2">3. é›»æºæ¶æ§‹ (Power)</h4>
                            <ul class="space-y-3 text-sm text-slate-400">
                                <li><strong class="text-white">è¼¸å…¥å†—é¤˜:</strong> POWER1 / POWER2 / USB ä¸‰è·¯è¼¸å…¥ (Ideal Diode OR-ing)ã€‚</li>
                                <li><strong class="text-white">é›»å£“è»Œ:</strong> 5V (ä¸»ä¾›é›»), 3.3V_FMU, 3.3V_SENSORS (åˆ†é–‹ LDO æ¸›å°‘é›œè¨Š)ã€‚</li>
                            </ul>
                            <h4 class="text-amber-400 font-bold mb-3 mt-6 border-b border-amber-900 pb-2">4. é€šè¨Šèˆ‡æ¥å£ (Comms)</h4>
                            <ul class="space-y-3 text-sm text-slate-400">
                                <li><strong class="text-white">Connectors:</strong> JST-GH 1.25mm (Pixhawk æ¨™æº–)ã€‚</li>
                                <li><strong class="text-white">CAN:</strong> 2x CAN-FD (éœ€å¤–æ› Transceiver)ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Content: Pinout (Full List) -->
                <div id="content-design-pinout" class="hidden p-6 md:p-8 animate-fade-in flex flex-col h-[600px]">
                    <div class="mb-4">
                        <input type="text" id="pinout-search" placeholder="æœå°‹è…³ä½å®šç¾© (ä¾‹å¦‚: PA9, UART, FMU...)" class="w-full bg-slate-800 border border-slate-700 rounded px-4 py-2 text-sm text-slate-200 focus:outline-none focus:border-sky-500 transition">
                    </div>
                    <div class="flex-1 overflow-y-auto border border-slate-700 rounded-lg">
                        <table class="w-full text-left border-collapse text-sm" id="pinout-table">
                            <thead class="bg-slate-950 text-slate-300 sticky top-0 z-10">
                                <tr>
                                    <th class="p-3 border-b border-slate-700 font-bold w-1/4">STM32 Pin</th>
                                    <th class="p-3 border-b border-slate-700 w-1/3">STM32 Signal</th>
                                    <th class="p-3 border-b border-slate-700">FMU Usage</th>
                                </tr>
                            </thead>
                            <tbody class="text-slate-400 font-mono divide-y divide-slate-800 bg-slate-900">
                                <!-- Generated by JS -->
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-2 text-xs text-slate-500 text-right">Source: FMUv6C_stm32_pinout_v1.pdf</div>
                </div>
            </div>
        </section>

        <!-- ==================== 9. BLDC é¦¬é”æ§åˆ¶ ==================== -->
        <section id="section-bldc" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-bldc"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">FOC é¦¬é”æ§åˆ¶ (BLDC Lab)</h2>
            </header>
            
            <div class="bg-slate-950 p-6 rounded-xl border border-slate-800 shadow-inner mb-8 overflow-x-auto">
                <h3 class="text-sm font-bold text-slate-500 uppercase tracking-wider mb-4">é€†è®Šå™¨æ‹“æ’² (Inverter Topology)</h3>
                <div class="flex flex-col md:flex-row gap-4 items-stretch min-w-[700px]">
                    <div class="topo-box flex-1 bg-slate-900 rounded-lg p-4 cursor-pointer hover:border-sky-500 transition" onclick="showBldcDetail('mcu')">
                        <div class="text-center mt-2">
                            <i class="fa-solid fa-microchip text-3xl text-sky-500 mb-2"></i>
                            <h4 class="font-bold text-slate-200">STM32 G4</h4>
                        </div>
                    </div>
                    <div class="flex items-center justify-center text-slate-600">
                        <i class="fa-solid fa-arrow-right-long text-xl"></i>
                    </div>
                    <div class="topo-box flex-1 bg-slate-900 rounded-lg p-4 cursor-pointer hover:border-amber-500 transition" onclick="showBldcDetail('driver')">
                        <div class="text-center mt-2">
                            <i class="fa-solid fa-charging-station text-3xl text-amber-500 mb-2"></i>
                            <h4 class="font-bold text-slate-200">Gate Driver</h4>
                        </div>
                    </div>
                    <div class="flex items-center justify-center text-slate-600">
                        <i class="fa-solid fa-arrow-right-long text-xl"></i>
                    </div>
                    <div class="topo-box flex-1 bg-slate-900 rounded-lg p-4 cursor-pointer hover:border-rose-500 transition" onclick="showBldcDetail('mosfet')">
                        <div class="text-center mt-2">
                            <i class="fa-solid fa-bolt text-3xl text-rose-500 mb-2"></i>
                            <h4 class="font-bold text-slate-200">MOSFETs</h4>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="bldc-detail-box" class="bg-slate-800 border border-slate-700 p-6 rounded-xl shadow-lg mb-8 hidden">
                <div class="flex items-start">
                    <div class="mr-4 text-3xl" id="bldc-icon"></div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-slate-100 mb-2" id="bldc-title"></h3>
                        <p class="text-slate-300 mb-4 text-sm" id="bldc-desc"></p>
                        <div class="bg-slate-950 p-4 rounded border border-slate-800">
                            <h4 class="text-xs text-sky-500 font-bold uppercase mb-3">é¸å‹å…¬å¼</h4>
                            <ul class="text-sm text-slate-400 mono-font space-y-3" id="bldc-specs"></ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                <h3 class="text-lg font-bold text-slate-200 mb-6 flex items-center">
                    <i class="fa-solid fa-wave-square mr-2 text-emerald-500"></i>FOC æ§åˆ¶æµç¨‹ (Control Loop)
                </h3>
                <div class="grid md:grid-cols-4 gap-4 text-center">
                    <div class="foc-step bg-slate-800 p-4 rounded border border-slate-700">
                        <h4 class="font-bold text-emerald-400 text-sm">1. ADC æ¡æ¨£</h4>
                        <p class="text-xs text-slate-400 mt-2">è®€å–ç›¸é›»æµ Ia, Ib</p>
                    </div>
                    <div class="foc-step bg-slate-800 p-4 rounded border border-slate-700">
                        <h4 class="font-bold text-emerald-400 text-sm">2. åº§æ¨™è®Šæ›</h4>
                        <p class="text-xs text-slate-400 mt-2">Clarke / Park (abcè½‰dq)</p>
                    </div>
                    <div class="foc-step bg-slate-800 p-4 rounded border border-slate-700">
                        <h4 class="font-bold text-emerald-400 text-sm">3. PID æ§åˆ¶</h4>
                        <p class="text-xs text-slate-400 mt-2">é›»æµç’°/é€Ÿåº¦ç’°è¨ˆç®—</p>
                    </div>
                    <div class="foc-step bg-slate-800 p-4 rounded border border-slate-700">
                        <h4 class="font-bold text-emerald-400 text-sm">4. SVPWM</h4>
                        <p class="text-xs text-slate-400 mt-2">ç©ºé–“å‘é‡èª¿è®Šè¼¸å‡º</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== 10. é£›è¡Œç‰©ç†èˆ‡æ··æ§ ==================== -->
        <section id="section-intro" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-intro"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">é£›è¡Œç‰©ç†èˆ‡æ··æ§ (Physics)</h2>
            </header>
            <div class="grid lg:grid-cols-2 gap-8">
                <div class="space-y-6">
                    <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                        <h3 class="text-lg font-bold text-sky-400 mb-3">æ¨é‡æ¯” (Thrust-to-Weight Ratio)</h3>
                        <p class="text-xs text-slate-400 mb-2">æ±ºå®šé£›è¡Œæ€§èƒ½çš„é—œéµæŒ‡æ¨™ã€‚X500 V2 å»ºè­°å€¼ç‚º 2.0+ã€‚</p>
                        <div class="bg-slate-950 p-4 rounded text-center border border-slate-700">
                            <p class="text-slate-200 text-lg mono-font">$$ TWR = \frac{Total Thrust (g)}{AUW (g)} $$</p>
                        </div>
                    </div>
                    <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                        <h3 class="text-lg font-bold text-emerald-400 mb-3">æ··æ§çŸ©é™£ (Mixer Matrix)</h3>
                        <p class="text-xs text-slate-400 mb-2">Quad-X æ§‹å‹çš„åŠ›çŸ©åˆ†é…åŸç†ã€‚</p>
                        <div class="bg-slate-950 p-4 rounded text-center border border-slate-700 overflow-x-auto">
                            <p class="text-slate-200 text-xs mono-font whitespace-pre">
Motor 1 (RR):  -Roll, +Pitch, -Yaw
Motor 2 (RL):  +Roll, -Pitch, -Yaw
Motor 3 (FL):  +Roll, +Pitch, +Yaw
Motor 4 (FR):  -Roll, -Pitch, +Yaw
                            </p>
                        </div>
                    </div>
                </div>
                <div class="bg-slate-900 p-6 rounded-xl border border-slate-800 shadow-lg">
                    <div class="chart-container"><canvas id="vehicleChart"></canvas></div>
                </div>
            </div>
        </section>

        <!-- ==================== 11. é€šè¨Šå”å®š (PWM/DShot/RF) ==================== -->
        <section id="section-protocols" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-protocols"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">é€šè¨Šå”å®šæ·±åº¦è§£æ (Communication Protocols)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-protocol">PWM/DShot/RF</span>
                    <span>Control & Telemetry</span>
                </div>
            </header>

            <div class="bg-slate-900 rounded-xl border border-slate-800 overflow-hidden mb-8">
                <div class="flex border-b border-slate-800 bg-slate-950 overflow-x-auto">
                    <button onclick="switchProtoTab('pwm')" id="tab-proto-pwm" class="px-6 py-4 text-sm font-bold text-blue-400 bg-slate-900 border-r border-slate-800 transition whitespace-nowrap">PWM ç‰©ç†å±¤èˆ‡éŸŒé«”</button>
                    <button onclick="switchProtoTab('dshot')" id="tab-proto-dshot" class="px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap">Pixhawk 6C DShot å¯¦ä½œ</button>
                    <!-- æ–°å¢: RF Tab -->
                    <button onclick="switchProtoTab('rf')" id="tab-proto-rf" class="px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap">RF éˆè·¯å”è­° (ELRS/WiFi)</button>
                </div>

                <!-- Tab 1: PWM -->
                <div id="content-proto-pwm" class="p-6 md:p-8 animate-fade-in">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-bold text-blue-400 mb-4">æ ¸å¿ƒç‰©ç†å±¤å®šç¾© (Physical Layer)</h3>
                            <ul class="space-y-2 text-sm text-slate-300 bg-slate-950 p-4 rounded border border-slate-700">
                                <li><strong>åŸºæº–é »ç‡:</strong> 50Hz (20ms é€±æœŸ) è‡³ 490Hzã€‚</li>
                                <li><strong>æœ‰æ•ˆè„ˆå¯¬:</strong> 1000Âµs (æœ€å°/0%) ~ 2000Âµs (æœ€å¤§/100%)ã€‚</li>
                                <li><strong>ä¸­ç«‹é»:</strong> 1500Âµsã€‚</li>
                                <li><strong>æ­»å€ (Deadband):</strong> é¦¬é”é€šå¸¸éœ€é«˜æ–¼ ~1050Âµs æ‰æœƒå…‹æœéœæ‘©æ“¦åŠ›ã€‚</li>
                            </ul>
                            
                            <h3 class="text-xl font-bold text-emerald-400 mt-6 mb-4">è½‰é€Ÿæ˜ å°„ (Logic & RPM)</h3>
                            <div class="bg-slate-950 p-4 rounded text-center border border-slate-700">
                                <p class="text-slate-200 text-sm mono-font mb-2">$$ Throttle \% = \frac{PulseWidth - 1000}{1000} \times 100\% $$</p>
                                <p class="text-slate-200 text-sm mono-font">$$ RPM_{theory} = KV \times V_{battery} \times Throttle \% $$</p>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-amber-400 mb-4">å”å®šæ¼”é€²å°æ¯” (Evolution)</h3>
                            <table class="w-full text-sm text-left text-slate-400 mb-6">
                                <thead class="bg-slate-950 text-xs uppercase text-slate-500">
                                    <tr><th class="p-2">å”å®š</th><th class="p-2">ç¯„åœ</th><th class="p-2">ç‰¹æ€§</th></tr>
                                </thead>
                                <tbody class="divide-y divide-slate-800">
                                    <tr><td class="p-2 text-white">Standard PWM</td><td class="p-2">1000-2000Âµs</td><td>é€šç”¨æ€§æœ€å¼·ï¼Œéœ€æ ¡æº–</td></tr>
                                    <tr><td class="p-2 text-white">OneShot125</td><td class="p-2">125-250Âµs</td><td>é€Ÿåº¦å¿« 8 å€ï¼ŒåŒæ­¥ PID</td></tr>
                                    <tr><td class="p-2 text-sky-400 font-bold">DShot</td><td class="p-2">0-2047 (æ•¸ä½)</td><td>ç„¡é ˆæ ¡æº–ï¼Œæ”¯æ´é›™å‘ RPM</td></tr>
                                </tbody>
                            </table>

                            <h3 class="text-xl font-bold text-purple-400 mb-4">éŸŒé«”å¯¦ä½œè¦é» (Firmware)</h3>
                            <div class="bg-slate-950 p-4 rounded border border-slate-700 text-sm text-slate-300">
                                <strong class="text-white">STM32 (C/HAL):</strong>
                                <ul class="list-disc list-inside ml-2 mt-1 mb-3 text-xs text-slate-400">
                                    <li>ä½¿ç”¨ TIMx çš„ PWM Mode 1ã€‚</li>
                                    <li>Prescaler è¨­ç‚º 1MHz (1æ¬¡è¨ˆæ•¸=1Âµs)ã€‚</li>
                                    <li>é‡å°å¤šé€šé“ï¼Œå»ºè­°ä½¿ç”¨ DMA æ›´æ–° CCR æš«å­˜å™¨ï¼Œç¢ºä¿ Jitter æœ€å°ã€‚</li>
                                </ul>
                                <strong class="text-white">ESP32 (Arduino/IDF):</strong>
                                <ul class="list-disc list-inside ml-2 mt-1 text-xs text-slate-400">
                                    <li>ä½¿ç”¨ LEDC æˆ– MCPWM (å°ˆç‚ºé¦¬é”è¨­è¨ˆ)ã€‚</li>
                                    <li>å»ºè­°è§£æåº¦è¨­å®šç‚º 16-bit ä»¥ä¸Šã€‚</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: DShot -->
                <div id="content-proto-dshot" class="hidden p-6 md:p-8 animate-fade-in">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-bold text-sky-400 mb-4">DShot æ¥ç·šèˆ‡éŸŒé«”é…ç½® (PX4)</h3>
                            <div class="bg-slate-950 p-4 rounded border border-slate-700 text-sm text-slate-300 space-y-4">
                                <div>
                                    <strong class="text-rose-400 block mb-1">ç¡¬é«”æ¥ç·šè®Šæ›´ (Critical):</strong>
                                    Pixhawk 6C è‹¥è¦ä½¿ç”¨ DShot (è®€å– RPM)ï¼ŒESC è¨Šè™Ÿç·šå¿…é ˆå¾å·¦å´çš„ <code class="text-emerald-400">I/O PWM OUT (MAIN)</code> ç§»è‡³å³å´çš„ <code class="text-amber-400">FMU PWM OUT (AUX)</code> æ¥å£ã€‚
                                </div>
                                <div>
                                    <strong class="text-sky-400 block mb-1">é›™å‘ DShot (Bidirectional):</strong>
                                    <ul class="list-disc list-inside text-xs text-slate-400">
                                        <li>éœ€åˆ·å…¥ <code>default-bdshot</code> éŸŒé«”ç‰ˆæœ¬ã€‚</li>
                                        <li>åƒæ•¸ <code>DSHOT_BIDIR_EN</code> = 1 (å•Ÿç”¨)ã€‚</li>
                                        <li>åƒæ•¸ <code>MOT_POLE_COUNT</code> = 14 (ä¾ 2216 é¦¬é”è¨­å®š)ã€‚</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-amber-400 mb-4">Actuators è¨­å®šèˆ‡é˜²è­·</h3>
                            <div class="bg-slate-950 p-4 rounded border border-slate-700 text-sm text-slate-300 space-y-4">
                                <div>
                                    <strong class="text-white block mb-1">QGC è¨­å®š:</strong>
                                    éœ€åœ¨ Actuators é é¢å°‡é¦¬é”æ˜ å°„è‡³æ­£ç¢ºçš„ FMU é€šé“ã€‚å»ºè­° Minimum PWM è¨­ç‚º <code class="text-sky-400">1100us</code> ç¢ºä¿åŒæ­¥å•Ÿå‹•ã€‚
                                </div>
                                <div class="border-l-4 border-rose-500 pl-3 bg-rose-900/10 py-2">
                                    <strong class="text-rose-400 text-xs block uppercase">é–‹ç™¼å»ºè­°èˆ‡å®‰å…¨:</strong>
                                    éŸŒé«”åˆå§‹åŒ–æ™‚ï¼ŒPWM å¿…é ˆå¼·åˆ¶è¼¸å‡º 1000Âµs (æˆ– 0)ï¼Œé˜²æ­¢ä¸Šé›»å³é£›äººçš„æ„å¤–ã€‚ç›£æ¸¬æ³¢å½¢å»ºè­°ä½¿ç”¨é‚è¼¯åˆ†æå„€ã€‚
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 3: RF Link (NEW) -->
                <div id="content-proto-rf" class="hidden p-6 md:p-8 animate-fade-in">
                    <div class="grid lg:grid-cols-2 gap-8 mb-8">
                        <div>
                            <h3 class="text-xl font-bold text-teal-400 mb-4">
                                <i class="fa-solid fa-tower-broadcast mr-2"></i>WiFi vs RC å”è­°ï¼šæœ¬è³ªå·®ç•°
                            </h3>
                            <div class="bg-slate-950 p-4 rounded border border-slate-700 space-y-4">
                                <p class="text-sm text-slate-300">é›–ç„¶é »ç‡éƒ½æ˜¯ 2.4GHzï¼Œä½†è¨­è¨ˆç›®æ¨™å®Œå…¨ä¸åŒï¼š</p>
                                <ul class="space-y-3">
                                    <li class="flex items-start">
                                        <div class="w-20 font-bold text-sky-400 text-sm">WiFi (802.11)</div>
                                        <div class="text-xs text-slate-400 flex-1">
                                            <span class="block text-white">é«˜é »å¯¬ï¼Œé›™å‘æ¡æ‰‹</span>
                                            å°åŒ…çµæ§‹å¤§ï¼Œå°å»¶é²å®¹å¿é«˜ã€‚è¦–è·é€šå¸¸åƒ…æ•¸ç™¾ç±³ï¼Œä¸é©åˆé—œéµæ§åˆ¶ã€‚
                                        </div>
                                    </li>
                                    <li class="flex items-start">
                                        <div class="w-20 font-bold text-amber-400 text-sm">RC éˆè·¯</div>
                                        <div class="text-xs text-slate-400 flex-1">
                                            <span class="block text-white">ä½å»¶é²ï¼ŒæŠ—å¹²æ“¾</span>
                                            ä½¿ç”¨ <strong>FHSS (è·³é »æ“´é »)</strong> æˆ– <strong>LoRa</strong>ã€‚åœ¨å¹¾åå€‹é »é“é–“æ¥µé€Ÿè·³é »ï¼Œç¢ºä¿æŒ‡ä»¤é€£çºŒã€‚
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-bold text-rose-400 mb-4">
                                <i class="fa-solid fa-ruler-horizontal mr-2"></i>è·é›¢æ¥µé™åˆ†æ
                            </h3>
                            <div class="overflow-x-auto bg-slate-950 rounded border border-slate-700">
                                <table class="w-full text-xs text-left text-slate-400">
                                    <thead class="bg-slate-900 uppercase">
                                        <tr><th class="p-2">å”è­°</th><th class="p-2">å…¸å‹è·é›¢</th><th class="p-2">æŠ€è¡“é»è©•</th></tr>
                                    </thead>
                                    <tbody class="divide-y divide-slate-800">
                                        <tr><td class="p-2 text-white">FrSky D16</td><td class="p-2">1.5 ~ 2.5 Km</td><td>å‚³çµ± FSK èª¿è®Šï¼Œ2Km æ¥µé™ã€‚</td></tr>
                                        <tr><td class="p-2 text-emerald-400 font-bold">ExpressLRS</td><td class="p-2">10 ~ 30 Km+</td><td>LoRa æ“´é »ï¼Œéˆæ•åº¦ -110dBmã€‚</td></tr>
                                        <tr><td class="p-2 text-white">WiFi</td><td class="p-2">< 500m</td><td>åŠŸç‡é™åˆ¶èˆ‡å”è­°é–‹éŠ·å¤§ã€‚</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="mt-4 p-3 bg-slate-900 border-l-4 border-amber-500 rounded">
                                <strong class="text-amber-400 text-xs block mb-1">Fresnel Zone (è²æ¶…è€³å€) æ•ˆæ‡‰:</strong>
                                <p class="text-xs text-slate-400">2Km å¤–é£›è¡Œæ™‚ï¼Œéœ€ä¿æŒè¶³å¤ é«˜åº¦ï¼Œé¿å…åœ°çƒæ›²ç‡æˆ–åœ°é¢éšœç¤™ç‰©åˆ‡å…¥ä¿¡è™Ÿå‚³è¼¸çš„æ©¢åœ“å€åŸŸï¼Œå°è‡´è¨Šè™Ÿè¡°æ¸›ã€‚</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-slate-950 p-6 rounded-xl border border-slate-800">
                        <h3 class="text-lg font-bold text-slate-200 mb-4">
                            <i class="fa-solid fa-wrench mr-2 text-emerald-500"></i>çµ¦ Marlon çš„è¡Œå‹•æŒ‡å— (Actionable Advice)
                        </h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <strong class="text-emerald-400 text-sm block mb-2">1. TX16S å‡ç´šç­–ç•¥</strong>
                                <ul class="list-disc list-inside text-xs text-slate-400 space-y-2">
                                    <li><strong>è‹¥ç‚º ELRS ç‰ˆ:</strong> æ­å–œï¼Œå·²å…·å‚™æœ€å¼·é•·è·é›¢èƒ½åŠ›ã€‚</li>
                                    <li><strong>è‹¥ç‚º 4-in-1 ç‰ˆ:</strong> å»ºè­°è³¼è²· <strong>å¤–éƒ¨ ELRS æ¨¡çµ„ (Micro/Nano)</strong> æ’åœ¨èƒŒå¾Œ JR Bayï¼Œå¾¹åº•è§£æ±ºè·é›¢ç„¦æ…®ã€‚</li>
                                </ul>
                            </div>
                            <div>
                                <strong class="text-emerald-400 text-sm block mb-2">2. æ¥æ”¶æ©Ÿèˆ‡å¤©ç·š</strong>
                                <ul class="list-disc list-inside text-xs text-slate-400 space-y-2">
                                    <li>å‡ç´šè‡³ <strong>Radiomaster RP3</strong> (é›™å¤©ç·š Diversity)ã€‚</li>
                                    <li>å¤©ç·šå®‰è£éœ€å‘ˆç¾ <strong>90åº¦å‚ç›´å¤¾è§’</strong>ã€‚</li>
                                    <li><strong>åš´ç¦</strong> è¢«ç¢³çº–ç¶­æ©Ÿæ¶é®æ“‹ (ç¢³çº–ç¶­å°é›»æœƒå±è”½ RF)ã€‚</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== 12. PID æ§åˆ¶ç†è«– ==================== -->
        <section id="section-pid" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-pid"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">PID æ§åˆ¶ç†è«–èˆ‡å¯¦ä½œ (Control Theory)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-software">Control Loop</span>
                    <span>Inner & Outer Loop Tuning</span>
                </div>
            </header>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Theory -->
                <div class="space-y-6">
                    <div class="bg-slate-900 p-6 rounded-xl border border-slate-800 shadow-lg">
                        <h3 class="text-lg font-bold text-emerald-400 mb-4">æ¨™æº– PID å…¬å¼ + å‰é¥‹ (Feed Forward)</h3>
                        <div class="bg-slate-950 p-4 rounded text-center border border-slate-700 mb-4">
                            <p class="text-slate-200 text-sm mono-font">$$ u(t) = K_p e(t) + K_i \int_0^t e(\tau)d\tau + K_d \frac{de(t)}{dt} + FF $$</p>
                        </div>
                        <ul class="text-sm text-slate-300 space-y-3">
                            <li><strong class="text-emerald-400">P (æ¯”ä¾‹):</strong> å°æŠ—ç•¶å‰èª¤å·®ã€‚éé«˜æœƒå°è‡´é«˜é »éœ‡ç›ª (Oscillation)ã€‚</li>
                            <li><strong class="text-sky-400">I (ç©åˆ†):</strong> æ¶ˆé™¤ç©©æ…‹èª¤å·® (å¦‚é‡å¿ƒåç§»)ã€‚éé«˜æœƒå°è‡´ä½é »ç•«åœˆã€‚</li>
                            <li><strong class="text-rose-400">D (å¾®åˆ†):</strong> é æ¸¬è¶¨å‹¢ï¼Œæä¾›é˜»å°¼ (Damping)ã€‚å°é›œè¨Šæ¥µæ•æ„Ÿã€‚</li>
                            <li><strong class="text-amber-400">FF (å‰é¥‹):</strong> ç›´æ¥å°‡ç›®æ¨™æŒ‡ä»¤è½‰æ›ç‚ºè¼¸å‡ºï¼Œå¤§å¹…é™ä½éŸ¿æ‡‰å»¶é²ã€‚</li>
                        </ul>
                    </div>
                    
                    <div class="bg-slate-900 p-6 rounded-xl border border-slate-800 shadow-lg">
                        <h3 class="text-lg font-bold text-violet-400 mb-4">ä¸²ç´š PID æ¶æ§‹ (Cascaded PID)</h3>
                        <div class="bg-slate-950 p-4 rounded border border-slate-700 text-xs font-mono text-slate-400 whitespace-pre overflow-x-auto">
[æ–æ¡¿æŒ‡ä»¤ Target Angle] 
  â†“ (å¤–ç’° P: å§¿æ…‹ç’° 50-100Hz)
[ç›®æ¨™è§’é€Ÿåº¦ Target Rate]
  â†“ (å…§ç’° PID: è§’é€Ÿåº¦ç’° 400-800Hz)
[é¦¬é”è¼¸å‡º Motor Output]</div>
                    </div>
                </div>

                <!-- Simulation -->
                <div class="bg-slate-900 p-6 rounded-xl border border-slate-800 shadow-lg flex flex-col">
                    <h3 class="text-lg font-bold text-sky-400 mb-4">é–‰è¿´è·¯éŸ¿æ‡‰æ¨¡æ“¬ (Step Response)</h3>
                    <div class="chart-container flex-1 min-h-[250px] bg-slate-950 rounded border border-slate-700 p-2 mb-4">
                        <canvas id="pidChart"></canvas>
                    </div>
                    <div class="flex flex-wrap justify-center gap-3">
                        <button onclick="updatePidChart('balanced')" class="px-3 py-1.5 bg-emerald-900/30 text-emerald-400 border border-emerald-800 rounded hover:bg-emerald-900/50 transition font-bold text-sm">å®Œç¾èª¿æ ¡</button>
                        <button onclick="updatePidChart('highP')" class="px-3 py-1.5 bg-rose-900/30 text-rose-400 border border-rose-800 rounded hover:bg-rose-900/50 transition font-bold text-sm">På€¼éé«˜</button>
                        <button onclick="updatePidChart('lowD')" class="px-3 py-1.5 bg-amber-900/30 text-amber-400 border border-amber-800 rounded hover:bg-amber-900/50 transition font-bold text-sm">Då€¼éä½</button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- ==================== 13. è»Ÿé«”æ£§ ==================== -->
        <section id="section-software" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-software"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">é£›æ§è»Ÿé«”æ¡†æ¶ (Software Stack)</h2>
            </header>
            <div class="bg-slate-900 rounded-xl border border-slate-800 overflow-hidden mb-8">
                <div class="flex border-b border-slate-800 bg-slate-950">
                    <button id="tab-soft-px4" onclick="switchSoftTab('px4')" class="flex-1 py-4 font-bold text-sky-400 bg-slate-900 border-r border-slate-800 transition">PX4 Autopilot (BVLOS æ¨è–¦)</button>
                    <button id="tab-soft-ardupilot" onclick="switchSoftTab('ardupilot')" class="flex-1 py-4 font-bold text-slate-500 bg-slate-950 transition">ArduPilot (DIY/æ•™è‚² æ¨è–¦)</button>
                </div>
                
                <div id="content-soft-px4" class="p-8 animate-fade-in">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <ul class="space-y-3 text-sm text-slate-300">
                                <li><strong>æ ¸å¿ƒç‰ˆæœ¬:</strong> v1.14.x / v1.16.1 (ç©©å®š)</li>
                                <li><strong>RTOS:</strong> NuttX 11.4 (POSIX ç›¸å®¹)</li>
                                <li><strong>æ¶æ§‹å„ªå‹¢:</strong> 
                                    <ul class="list-disc list-inside ml-4 mt-1 text-slate-400">
                                        <li>uORB ç™¼ä½ˆ-è¨‚é–±æ¨¡å¼ï¼Œä½å»¶é²</li>
                                        <li>ROS 2 XRCE-DDS åŸç”Ÿæ•´åˆ</li>
                                        <li>æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œé©åˆäºŒæ¬¡é–‹ç™¼</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <div class="bg-slate-900 p-4 rounded border border-slate-700">
                            <strong class="text-sky-400 text-xs block mb-2">å®‰è£èˆ‡ç·¨è­¯ (Ubuntu 22.04+):</strong>
                            <code class="text-xs text-slate-400 block whitespace-pre">git clone https://github.com/PX4/PX4-Autopilot.git
bash Tools/setup/ubuntu.sh
make px4_fmu-v6c_default</code>
                        </div>
                    </div>
                </div>

                <div id="content-soft-ardupilot" class="p-8 hidden animate-fade-in">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <ul class="space-y-3 text-sm text-slate-300">
                                <li><strong>æ ¸å¿ƒç‰ˆæœ¬:</strong> v4.6.3 (ç©©å®š)</li>
                                <li><strong>RTOS:</strong> ChibiOS 21.x</li>
                                <li><strong>æ¶æ§‹å„ªå‹¢:</strong> 
                                    <ul class="list-disc list-inside ml-4 mt-1 text-slate-400">
                                        <li>Lua è…³æœ¬æ”¯æ´ï¼Œå¿«é€Ÿæ¼”ç®—æ³•è¿­ä»£</li>
                                        <li>è±å¯Œçš„é©…å‹•æ”¯æ´èˆ‡ç¤¾ç¾¤è³‡æº</li>
                                        <li>å°èˆŠç¡¬é«”ç›¸å®¹æ€§æ¥µä½³</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <div class="bg-slate-900 p-4 rounded border border-slate-700">
                            <strong class="text-rose-400 text-xs block mb-2">å®‰è£èˆ‡ç·¨è­¯ (Ubuntu 22.04+):</strong>
                            <code class="text-xs text-slate-400 block whitespace-pre">git clone https://github.com/ArduPilot/ardupilot.git
Tools/environment_install/install-prereqs-ubuntu.sh -y
./waf configure --board Pixhawk6C
./waf copter</code>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== 14. é–‹ç™¼ç’°å¢ƒ ==================== -->
        <section id="section-devenv" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-devenv"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">é–‹ç™¼ç’°å¢ƒå»ºç½® (Development Setup)</h2>
            </header>
            <div class="bg-slate-900 p-6 rounded-xl border border-slate-800 mb-8">
                <h3 class="text-xl font-bold text-indigo-400 mb-4 flex items-center"><i class="fa-solid fa-layer-group mr-2"></i>åŸºç¤ MCU é–‹ç™¼å·¥å…·</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-left text-sm text-slate-400">
                        <thead class="text-xs text-slate-500 uppercase bg-slate-950">
                            <tr><th class="px-4 py-2">å·¥å…·</th><th class="px-4 py-2">ç”¨é€”</th><th class="px-4 py-2">å„ªå…ˆåº¦</th></tr>
                        </thead>
                        <tbody class="divide-y divide-slate-800">
                            <tr>
                                <td class="px-4 py-3 font-bold text-white">STM32CubeIDE 1.16.1+</td>
                                <td>ST å®˜æ–¹èª¿è©¦ã€é›™æ ¸ H7 æ”¯æ´</td>
                                <td class="text-emerald-400">â­â­â­â­â­</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 font-bold text-white">STM32CubeMX 6.11.1</td>
                                <td>åœ–å½¢åŒ– Pinout é…ç½®ã€FreeRTOS ç”Ÿæˆ</td>
                                <td class="text-emerald-400">â­â­â­â­â­</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 font-bold text-white">PlatformIO (VSCode)</td>
                                <td>è¼•é‡ç´šé–‹ç™¼ã€è·¨å¹³å°å°ˆæ¡ˆç®¡ç†</td>
                                <td class="text-sky-400">â­â­â­â­</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 font-bold text-white">arm-none-eabi-gcc 12.2+</td>
                                <td>ARM äº¤å‰ç·¨è­¯å™¨ (åŸºç¤ Toolchain)</td>
                                <td class="text-emerald-400">â­â­â­â­â­</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="bg-slate-900 p-6 rounded-xl border border-slate-800 mb-8">
                <h3 class="text-xl font-bold text-amber-400 mb-4 flex items-center"><i class="fa-solid fa-vr-cardboard mr-2"></i>ä»¿çœŸé©—è­‰ç’°å¢ƒ (SITL)</h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-slate-900 p-4 rounded border border-slate-700">
                        <strong class="text-white block mb-2">Gazebo Ignition (æ¨è–¦)</strong>
                        <p class="text-xs text-slate-400 mb-2">é«˜ä¿çœŸç‰©ç†å¼•æ“ï¼Œæ”¯æ´ ROS 2 æ•´åˆã€‚</p>
                        <code class="block bg-slate-900 p-2 rounded text-emerald-400 text-xs">make px4_sitl_default gazebo</code>
                    </div>
                    <div class="bg-slate-900 p-4 rounded border border-slate-700">
                        <strong class="text-white block mb-2">jMAVSim</strong>
                        <p class="text-xs text-slate-400 mb-2">è¼•é‡ç´šï¼Œé©åˆå¿«é€Ÿæ¸¬è©¦æ¼”ç®—æ³•ã€‚</p>
                        <code class="block bg-slate-900 p-2 rounded text-sky-400 text-xs">make px4_sitl_default jmavsim</code>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== 15. AIoT & ROS 2 (Upgraded) ==================== -->
        <section id="section-aiot" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-aiot"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">AIoT èˆ‡é‚Šç·£é‹ç®—å±¤ (ROS 2 + ESP32)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-aiot">Hybrid Control</span>
                    <span>Human-In-The-Loop Safety</span>
                </div>
            </header>
            
            <div class="bg-slate-900 rounded-xl border border-slate-800 overflow-hidden mb-8">
                <div class="flex border-b border-slate-800 bg-slate-950 overflow-x-auto">
                    <button onclick="switchAiotTab('ros')" id="tab-aiot-ros" class="px-6 py-4 text-sm font-bold text-violet-400 bg-slate-900 border-r border-slate-800 transition whitespace-nowrap">ROS 2 æ¨™æº–æ¶æ§‹</button>
                    <button onclick="switchAiotTab('trainer')" id="tab-aiot-trainer" class="px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap">æ•™ç·´å£æ³¨å…¥ (Trainer Port Injection)</button>
                </div>

                <!-- Tab 1: ROS 2 (Original) -->
                <div id="content-aiot-ros" class="p-6 md:p-8 animate-fade-in">
                    <div class="grid lg:grid-cols-2 gap-8 mb-8">
                        <div class="bg-slate-900 p-4 rounded border border-slate-700">
                            <h3 class="text-lg font-bold text-violet-400 mb-2"><i class="fa-solid fa-sitemap mr-2"></i>micro-ROS ç³»çµ±æ¶æ§‹</h3>
                            <div class="font-mono text-xs text-slate-300 whitespace-pre leading-relaxed">Pixhawk 6C (PX4)
  â†“ (MAVLink + UART)
ä¼´é£›é›»è…¦ (Jetson/Pi 5)
  â”œâ”€ ROS 2 Humble
  â”œâ”€ micro-ROS Agent
  â”‚
ESP32 (é‚Šç·£ç¯€é»)
  â”œâ”€ Arduino Framework
  â””â”€ micro-ROS Client (WiFi)</div>
                        </div>
                        <div class="bg-slate-900 p-4 rounded border border-slate-700">
                            <h3 class="text-lg font-bold text-sky-400 mb-2"><i class="fa-brands fa-linux mr-2"></i>PX4 æ·±åº¦æ•´åˆ</h3>
                            <ul class="list-decimal list-inside text-xs text-slate-400 space-y-1">
                                <li>å®‰è£ ROS 2 Humble Desktop</li>
                                <li>å»ºç«‹ <code>~/ros2_px4_ws</code>ï¼Œå…‹éš† <code>px4_ros_com</code></li>
                                <li>åŸ·è¡Œ Agent: <code class="text-sky-300">MicroXRCEAgent udp4 -p 8888</code></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: Trainer Port Injection (NEW) -->
                <div id="content-aiot-trainer" class="hidden p-6 md:p-8 animate-fade-in">
                    <div class="grid lg:grid-cols-2 gap-8 mb-8">
                        <!-- Architecture -->
                        <div class="space-y-6">
                            <div class="bg-slate-900 p-4 rounded border border-slate-700">
                                <h3 class="text-lg font-bold text-rose-400 mb-3"><i class="fa-solid fa-shield-cat mr-2"></i>å››å±¤å®‰å…¨æ¶æ§‹</h3>
                                <div class="io-flow-container mb-4">
                                    <div class="io-box border-violet-500 text-violet-400">æ„ŸçŸ¥<br><span class="text-[10px] text-slate-500">Pi 5 (YOLO)</span></div>
                                    <i class="fa-solid fa-arrow-right io-arrow"></i>
                                    <div class="io-box border-sky-500 text-sky-400">ç¿»è­¯<br><span class="text-[10px] text-slate-500">ESP32 (PPM)</span></div>
                                    <i class="fa-solid fa-arrow-right io-arrow"></i>
                                    <div class="io-box border-amber-500 text-amber-400">æ§åˆ¶<br><span class="text-[10px] text-slate-500">EdgeTX</span></div>
                                    <i class="fa-solid fa-arrow-right io-arrow"></i>
                                    <div class="io-box border-emerald-500 text-emerald-400">åŸ·è¡Œ<br><span class="text-[10px] text-slate-500">Drone</span></div>
                                </div>
                                <p class="text-xs text-slate-400"><strong>æ ¸å¿ƒé‚è¼¯ï¼š</strong> é™æ§å™¨æ“æœ‰æœ€é«˜å„ªå…ˆæ¬Š (Master Override)ã€‚è‹¥ AI å¤±æ§ï¼Œåªéœ€æ’¥å‹•é–‹é—œ (å¦‚ Switch SF) å³å¯ç¬é–“åˆ‡å›æ‰‹å‹•æ§åˆ¶ã€‚</p>
                            </div>
                            
                            <div class="bg-slate-900 p-4 rounded border border-slate-700">
                                <h3 class="text-lg font-bold text-amber-400 mb-3"><i class="fa-solid fa-plug mr-2"></i>ç¡¬é«”æ¥ç·š (Wiring)</h3>
                                <ul class="text-sm text-slate-300 space-y-2">
                                    <li><strong>Pi 5 -> ESP32:</strong> USB Serial (æ¨è–¦) æˆ– UART (GPIO 14/15)ã€‚</li>
                                    <li><strong>ESP32 -> EdgeTX:</strong> GPIO 25 -> 1kÎ© é›»é˜» -> 3.5mm Jack (Tip)ã€‚å…±åœ° (GND -> Sleeve)ã€‚</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Code & Protocol -->
                        <div class="space-y-6">
                            <div class="bg-slate-900 p-4 rounded border border-slate-700">
                                <h3 class="text-lg font-bold text-sky-400 mb-3">é€šè¨Šå”è­° (Serial Protocol)</h3>
                                <table class="w-full text-xs text-left text-slate-400">
                                    <thead class="bg-slate-900"><tr><th class="p-2">æŒ‡ä»¤</th><th class="p-2">å‹•ä½œ</th><th class="p-2">PPM è¼¸å‡º</th></tr></thead>
                                    <tbody class="divide-y divide-slate-800">
                                        <tr><td class="p-2 text-white font-mono">'A'</td><td>ARM</td><td>CH5 = 2000us (è§£é–)</td></tr>
                                        <tr><td class="p-2 text-white font-mono">'D'</td><td>DISARM</td><td>CH5 = 1000us (ä¸Šé–)</td></tr>
                                        <tr><td class="p-2 text-white font-mono">'T'</td><td>TAKEOFF</td><td>Throttle = 1600us</td></tr>
                                        <tr><td class="p-2 text-white font-mono">'L'</td><td>LAND</td><td>Throttle = 1300us</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="bg-slate-900 p-4 rounded border border-slate-700">
                                <h3 class="text-lg font-bold text-emerald-400 mb-3">å¯¦ä½œä»£ç¢¼ç‰‡æ®µ</h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <strong class="text-xs text-violet-400 block mb-1">Pi 5 (Python)</strong>
                                        <pre class="text-[10px] text-slate-400 overflow-x-auto bg-slate-900 p-2 rounded"><code>import serial
ser = serial.Serial('/dev/ttyUSB0', 115200)
if action == "Raise Hand":
    ser.write(b'A') # Arm
elif action == "Waving":
    ser.write(b'L') # Land</code></pre>
                                    </div>
                                    <div>
                                        <strong class="text-xs text-sky-400 block mb-1">ESP32 (Arduino)</strong>
                                        <pre class="text-[10px] text-slate-400 overflow-x-auto bg-slate-900 p-2 rounded"><code>if (Serial.available()) {
  char cmd = Serial.read();
  if (cmd == 'A') ppm[4] = 2000;
  if (cmd == 'L') ppm[2] = 1200;
}</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-slate-900 p-4 rounded border-l-4 border-amber-500">
                        <strong class="text-amber-400 text-sm">EdgeTX è¨­å®šæŒ‡å—:</strong>
                        <ol class="list-decimal list-inside text-xs text-slate-300 mt-1">
                            <li>æ’å…¥ 3.5mm ç·šï¼Œç¢ºèªé™æ§å™¨é¡¯ç¤º "TR" åœ–ç¤ºã€‚</li>
                            <li>Model Setup -> Trainer Mode -> Master/Jackã€‚</li>
                            <li>Special Functions -> SFâ†“ -> Trainer -> Chans: Sticks (æ¥ç®¡æ–æ¡¿)ã€‚</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== 16. æ•…éšœè¨ºæ–· ==================== -->
        <section id="section-maint" class="mb-16 hidden animate-section relative">
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">æ•…éšœè¨ºæ–· (Troubleshooting)</h2>
            </header>
            <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                <select id="diagnostic-select" onchange="showDiagnosis()" class="w-full p-3 bg-slate-800 border border-slate-700 rounded text-slate-200 mb-4">
                    <option value="">é¸æ“‡ç—‡ç‹€...</option>
                    <option value="accel_nose_down">åŠ é€Ÿåº¦è¨ˆæ ¡æ­£ç•°å¸¸ (Nose Down)</option>
                    <option value="motor_no_spin">é¦¬é”ç„¡åæ‡‰ / æ¥ç·šéŒ¯èª¤</option>
                    <option value="kill_switch">ç·Šæ€¥æ–·é›» vs å®‰å…¨é– (Kill Switch)</option>
                    <option value="compass_inc">ç¾…ç›¤ä¸ä¸€è‡´ (Compass Inconsistent)</option>
                    <option value="no_local_pos">ä½ç½®é ä¼°å¤±æ•— (No Valid Local Position)</option>
                    <option value="battery_volt">é›»æ± å£“é™éå¤§</option>
                    <option value="ubuntu_dep">Ubuntu 24.04 å®‰è£ CubeIDE å¤±æ•—</option>
                    <option value="sitl_udp">PX4 SITL é€£æ¥ Gazebo é€¾æ™‚</option>
                    <option value="ros2_topic">ROS 2 æ‰¾ä¸åˆ° /fmu ä¸»é¡Œ</option>
                    <option value="desync">é¦¬é”å¤±æ­¥ (Desync)</option>
                </select>
                <div id="diagnostic-result" class="hidden mt-4 p-4 bg-slate-950 border-l-4 border-emerald-500">
                    <h4 id="diag-title" class="font-bold text-emerald-400 mb-2"></h4>
                    <p id="diag-desc" class="text-sm text-slate-300 whitespace-pre-wrap"></p>
                </div>
            </div>
        </section>

        <!-- ==================== 17. è³‡æºèˆ‡è¡“èª (ç¶“å…¸é‚„åŸ + Mode 2) ==================== -->
        <section id="section-resources" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-resources"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">è³‡æºèˆ‡è¡“èª (Resources & Glossary)</h2>
            </header>
            
            <div class="bg-slate-900 rounded-xl border border-slate-800 overflow-hidden mb-8">
                <div class="flex border-b border-slate-800 bg-slate-950 overflow-x-auto">
                    <button onclick="switchResTab('bom')" id="tab-res-bom" class="px-6 py-4 text-sm font-bold text-teal-400 bg-slate-900 border-r border-slate-800 transition whitespace-nowrap">BOM & Datasheets</button>
                    <button onclick="switchResTab('battery')" id="tab-res-battery" class="px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap">4S é›»æ± è¦ç¯„</button>
                    <button onclick="switchResTab('glossary')" id="tab-res-glossary" class="px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap">å·¥ç¨‹è¡“èªèˆ‡æ“æ§</button>
                </div>
                
                <!-- Tab: BOM -->
                <div id="content-res-bom" class="p-6 md:p-8 animate-fade-in">
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-slate-400">
                            <thead class="bg-slate-950 text-xs uppercase text-slate-500">
                                <tr><th class="p-3">é¡åˆ¥</th><th class="p-3">å…ƒä»¶ (MPN)</th><th class="p-3">é—œéµè¦æ ¼</th><th class="p-3">å°è£</th><th class="p-3 text-right">Datasheet</th></tr>
                            </thead>
                            <tbody class="divide-y divide-slate-800">
                                <tr>
                                    <td class="p-3 text-purple-400">MCU (Main)</td>
                                    <td class="p-3 font-bold text-white">STM32H743ZIT6</td>
                                    <td>Cortex-M7, 480MHz, 2MB Flash</td>
                                    <td>LQFP-144</td>
                                    <td class="p-3 text-right"><a href="#" class="text-sky-400 hover:underline">PDF</a></td>
                                </tr>
                                <tr>
                                    <td class="p-3 text-purple-400">MCU (IO)</td>
                                    <td class="p-3 font-bold text-white">STM32F103C8T6</td>
                                    <td>Cortex-M3, 72MHz (Failsafe)</td>
                                    <td>LQFP-48</td>
                                    <td class="p-3 text-right"><a href="#" class="text-sky-400 hover:underline">PDF</a></td>
                                </tr>
                                <tr>
                                    <td class="p-3 text-emerald-400">IMU 1</td>
                                    <td class="p-3 font-bold text-white">ICM-42688-P</td>
                                    <td>High frequency vibration tolerance</td>
                                    <td>LGA-14</td>
                                    <td class="p-3 text-right"><a href="#" class="text-sky-400 hover:underline">PDF</a></td>
                                </tr>
                                <tr>
                                    <td class="p-3 text-emerald-400">IMU 2</td>
                                    <td class="p-3 font-bold text-white">BMI088</td>
                                    <td>High stability, low drift</td>
                                    <td>LGA-16</td>
                                    <td class="p-3 text-right"><a href="#" class="text-sky-400 hover:underline">PDF</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Tab: Battery -->
                <div id="content-res-battery" class="hidden p-6 md:p-8 animate-fade-in">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-slate-900 p-4 rounded border border-slate-700">
                            <strong class="text-white block mb-3 border-b border-slate-800 pb-2">åŸºæœ¬åƒæ•¸ (CNHL 3300mAh)</strong>
                            <div class="grid grid-cols-2 gap-2 text-sm text-slate-300">
                                <div>æ¨™ç¨±é›»å£“: <span class="text-sky-400">14.8V</span></div>
                                <div>æ»¿å……ç¸½å£“: <span class="text-emerald-400">16.8V</span></div>
                                <div>å–®ç¯€æ»¿å……: <span class="text-emerald-400">4.2V</span></div>
                                <div>æ”¾é›»å€ç‡: <span class="text-rose-400">40C</span></div>
                            </div>
                        </div>
                        <div class="bg-slate-900 p-4 rounded border border-slate-700">
                            <strong class="text-white block mb-3 border-b border-slate-800 pb-2">å……é›»å»ºè­° (HOTA D6)</strong>
                            <table class="w-full text-xs text-left text-slate-400">
                                <thead><tr><th class="pb-1">æ¨¡å¼</th><th class="pb-1">é›»æµ</th><th class="pb-1">å€ç‡</th></tr></thead>
                                <tbody>
                                    <tr><td class="text-emerald-400">é•·æ•ˆå£½å‘½</td><td>1.0A ~ 1.6A</td><td>0.3C ~ 0.5C</td></tr>
                                    <tr><td class="text-sky-400">æ¨™æº–å……é›»</td><td>3.3A</td><td>1.0C (æ¨è–¦)</td></tr>
                                    <tr><td class="text-rose-400">å¿«é€Ÿå……é›»</td><td>6.6A</td><td>2.0C (æ€¥ç”¨)</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="mt-4 grid md:grid-cols-2 gap-4 text-xs">
                        <div class="bg-slate-800 p-3 rounded text-slate-300 border-l-4 border-amber-500">
                            <strong>å®‰å…¨è¦ç¯„:</strong> å¿…é ˆé€£æ¥å¹³è¡¡é ­ã€‚è¶…é 24hr ä¸ä½¿ç”¨è«‹æ”¾é›»è‡³ Storage é›»å£“ (3.85V/cell)ã€‚
                        </div>
                        <div class="bg-slate-800 p-3 rounded text-slate-300 border-l-4 border-rose-500">
                            <strong>BMS é‚è¼¯:</strong> è­¦å ± (Alarm) è¨­ç‚º 3.5V/cellï¼Œå¼·åˆ¶åˆ‡æ–· (Cut-off) è¨­ç‚º 3.2V/cellã€‚
                        </div>
                    </div>
                </div>

                <!-- Tab: Glossary (Mode 2 Included) -->
                <div id="content-res-glossary" class="hidden p-6 md:p-8 animate-fade-in">
                    
                    <!-- Mode 2 Visual Guide (New) -->
                    <div class="mb-8">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                            <i class="fa-solid fa-gamepad mr-2 text-indigo-400"></i>
                            ç¾åœ‹æ‰‹ (Mode 2) æ“æ§è©³è§£
                        </h3>
                        <p class="text-sm text-slate-400 mb-4 bg-slate-900/50 p-3 rounded border border-slate-700">
                            <strong class="text-white">å®šç¾©ï¼š</strong>å·¦æ‰‹æ–æ¡¿è² è²¬<span class="text-sky-400">å‹•åŠ›èˆ‡æ—‹è½‰</span>ï¼Œå³æ‰‹æ–æ¡¿è² è²¬<span class="text-emerald-400">æ–¹å‘èˆ‡æ°´å¹³ç§»å‹•</span>ã€‚æ­¤ç‚ºå…¨çƒ 90% ä¸»æµè¨­å®š (å« DJI)ã€‚
                        </p>

                        <div class="grid md:grid-cols-2 gap-6">
                            <!-- Left Stick -->
                            <div class="bg-slate-900 p-5 rounded-xl border border-slate-700 relative overflow-hidden group hover:border-sky-500 transition">
                                <div class="absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition">
                                    <i class="fa-solid fa-arrows-up-down text-6xl text-sky-500"></i>
                                </div>
                                <h4 class="font-bold text-sky-400 mb-3 border-b border-slate-800 pb-2">1. å·¦æ‰‹æ–æ¡¿ (Left Stick)</h4>
                                <div class="text-xs text-slate-500 mb-3">æ§åˆ¶èƒ½é‡èˆ‡æ©Ÿé ­æœå‘ (ä¸å›ä¸­)</div>
                                
                                <div class="space-y-3 text-sm">
                                    <div class="flex items-center justify-between">
                                        <span class="text-slate-300"><i class="fa-solid fa-arrow-up mr-2 text-sky-500"></i>ä¸Šæ¨ (Up)</span>
                                        <span class="font-mono text-sky-300">Throttle Up</span>
                                        <span class="text-slate-400 text-xs">ä¸Šå‡ (Ascend)</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-slate-300"><i class="fa-solid fa-arrow-down mr-2 text-sky-500"></i>ä¸‹æ‹‰ (Down)</span>
                                        <span class="font-mono text-sky-300">Throttle Down</span>
                                        <span class="text-slate-400 text-xs">ä¸‹é™ (Descend)</span>
                                    </div>
                                    <div class="flex items-center justify-between border-t border-slate-800 pt-2 mt-2">
                                        <span class="text-slate-300"><i class="fa-solid fa-arrow-left mr-2 text-sky-500"></i>å·¦æ’¥ (Left)</span>
                                        <span class="font-mono text-sky-300">Yaw Left</span>
                                        <span class="text-slate-400 text-xs">å·¦è½‰ (CCW)</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-slate-300"><i class="fa-solid fa-arrow-right mr-2 text-sky-500"></i>å³æ’¥ (Right)</span>
                                        <span class="font-mono text-sky-300">Yaw Right</span>
                                        <span class="text-slate-400 text-xs">å³è½‰ (CW)</span>
                                    </div>
                                </div>
                                <div class="mt-4 p-2 bg-sky-900/20 border border-sky-800 rounded text-xs text-sky-200">
                                    ğŸ’¡ <strong>å¿ƒæ³•ï¼š</strong>æ§åˆ¶é£›æ©Ÿã€Œå»å“ªè£¡çš„é«˜åº¦ã€ä»¥åŠã€Œè‡‰æœå‘å“ªè£¡ã€ã€‚
                                </div>
                            </div>

                            <!-- Right Stick -->
                            <div class="bg-slate-900 p-5 rounded-xl border border-slate-700 relative overflow-hidden group hover:border-emerald-500 transition">
                                <div class="absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition">
                                    <i class="fa-solid fa-arrows-up-down-left-right text-6xl text-emerald-500"></i>
                                </div>
                                <h4 class="font-bold text-emerald-400 mb-3 border-b border-slate-800 pb-2">2. å³æ‰‹æ–æ¡¿ (Right Stick)</h4>
                                <div class="text-xs text-slate-500 mb-3">æ§åˆ¶æ°´å¹³ä½ç½® (è‡ªå‹•å›ä¸­)</div>
                                
                                <div class="space-y-3 text-sm">
                                    <div class="flex items-center justify-between">
                                        <span class="text-slate-300"><i class="fa-solid fa-arrow-up mr-2 text-emerald-500"></i>ä¸Šæ¨ (Up)</span>
                                        <span class="font-mono text-emerald-300">Pitch Down</span>
                                        <span class="text-slate-400 text-xs">å‰é€² (Forward)</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-slate-300"><i class="fa-solid fa-arrow-down mr-2 text-emerald-500"></i>ä¸‹æ‹‰ (Down)</span>
                                        <span class="font-mono text-emerald-300">Pitch Up</span>
                                        <span class="text-slate-400 text-xs">å¾Œé€€ (Backward)</span>
                                    </div>
                                    <div class="flex items-center justify-between border-t border-slate-800 pt-2 mt-2">
                                        <span class="text-slate-300"><i class="fa-solid fa-arrow-left mr-2 text-emerald-500"></i>å·¦æ’¥ (Left)</span>
                                        <span class="font-mono text-emerald-300">Roll Left</span>
                                        <span class="text-slate-400 text-xs">å·¦æ©«ç§» (Left)</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-slate-300"><i class="fa-solid fa-arrow-right mr-2 text-emerald-500"></i>å³æ’¥ (Right)</span>
                                        <span class="font-mono text-emerald-300">Roll Right</span>
                                        <span class="text-slate-400 text-xs">å³æ©«ç§» (Right)</span>
                                    </div>
                                </div>
                                <div class="mt-4 p-2 bg-emerald-900/20 border border-emerald-800 rounded text-xs text-emerald-200">
                                    ğŸ’¡ <strong>å¿ƒæ³•ï¼š</strong>æƒ³åƒæ–æ¡¿å°±æ˜¯é£›æ©Ÿæœ¬èº«ï¼Œä½ æ¨å“ªè£¡ï¼Œå®ƒå°±å¾€å“ªè£¡å€’ã€‚
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Glossary Tables -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-sm font-bold text-slate-300 border-l-4 border-emerald-500 pl-2 mb-2">QGC è¨­å®š (Configuration)</h4>
                            <div class="grid grid-cols-2 gap-4 text-xs text-slate-400">
                                <div class="bg-slate-900 p-2 rounded"><strong>Airframe:</strong> æ©Ÿæ¶é¸æ“‡ (Quadrotor X, Hexacopter)ã€‚</div>
                                <div class="bg-slate-900 p-2 rounded"><strong>Sensors:</strong> æ„Ÿæ¸¬å™¨æ ¡æ­£ (Accel, Gyro, Mag, Level)ã€‚</div>
                                <div class="bg-slate-900 p-2 rounded"><strong>Radio:</strong> é™æ§å™¨é€šé“æ˜ å°„èˆ‡æ ¡æ­£ã€‚</div>
                                <div class="bg-slate-900 p-2 rounded"><strong>Actuators:</strong> é¦¬é”è¼¸å‡ºèˆ‡è½‰å‘è¨­å®š (PX4 v1.14+)ã€‚</div>
                            </div>
                        </div>
                        <div>
                            <h4 class="text-sm font-bold text-slate-300 border-l-4 border-amber-500 pl-2 mb-2">é£›è¡Œæ¨¡å¼ (Flight Modes)</h4>
                            <ul class="text-xs text-slate-400 space-y-1">
                                <li><span class="text-white font-bold w-20 inline-block">Stabilized:</span> è‡ªç©©æ¨¡å¼ã€‚ç´”æ‰‹å‹•ï¼Œç„¡ GPSï¼Œåƒ…ç¶­æŒæ°´å¹³ã€‚</li>
                                <li><span class="text-white font-bold w-20 inline-block">Position:</span> å®šé»æ¨¡å¼ã€‚GPS è¼”åŠ©æ‡¸åœ (Loiter)ã€‚</li>
                                <li><span class="text-white font-bold w-20 inline-block">RTL:</span> è¿”èˆªæ¨¡å¼ (Return To Launch)ã€‚</li>
                                <li><span class="text-white font-bold w-20 inline-block">Offboard:</span> å¤–éƒ¨æ§åˆ¶ã€‚ç”± Companion Computer (ROS 2) æ§åˆ¶ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== 18. CAA è¡“ç§‘æ¸¬é©—æŒ‡å— (NEW) ==================== -->
        <section id="section-exam" class="mb-16 hidden animate-section relative">
            <i class="fa-regular fa-bookmark bookmark-badge" data-bookmark="section-exam"></i>
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h2 class="text-3xl font-bold text-slate-100 mb-2">CAA ç„¡äººæ©Ÿè¡“ç§‘æ¸¬é©—æŒ‡å— (Exam Guide)</h2>
                <div class="flex items-center gap-2 text-slate-400 text-sm">
                    <span class="source-badge badge-exam">G1/G2/G3</span>
                    <span>å°ˆæ¥­ç´šæ“ä½œè­‰æ”»ç•¥</span>
                </div>
            </header>

            <div class="bg-slate-900 rounded-xl border border-slate-800 overflow-hidden mb-8">
                <div class="flex border-b border-slate-800 bg-slate-950 overflow-x-auto">
                    <button onclick="switchExamTab('maneuvers')" id="tab-exam-maneuvers" class="px-6 py-4 text-sm font-bold text-lime-400 bg-slate-900 border-r border-slate-800 transition whitespace-nowrap">æ¸¬é©—é …ç›® (Maneuvers)</button>
                    <button onclick="switchExamTab('tips')" id="tab-exam-tips" class="px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap">é€šé—œå¯†æŠ€ (Pro Tips)</button>
                    <button onclick="switchExamTab('mission')" id="tab-exam-mission" class="px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap">ä»»å‹™è¦åŠƒ (Mission)</button>
                </div>

                <!-- Tab 1: Maneuvers -->
                <div id="content-exam-maneuvers" class="p-6 md:p-8 animate-fade-in">
                    <div class="space-y-6">
                        <div class="bg-slate-950 p-4 rounded border border-slate-700">
                            <h4 class="text-lg font-bold text-lime-400 mb-2">1. å‚ç›´èµ·é™èˆ‡å››é¢åœæ‡¸</h4>
                            <p class="text-sm text-slate-300">èµ·é£›è‡³æŒ‡å®šé«˜åº¦ (é€šå¸¸ 2-3m)ï¼Œä¾åºåŸ·è¡Œ æ©Ÿé ­æœå‰ -> æœå³ -> æœå¾Œ -> æœå·¦ çš„ 90 åº¦è½‰å‘ï¼Œæ¯é¢éœ€åœæ‡¸ 5 ç§’ã€‚</p>
                        </div>
                        <div class="bg-slate-950 p-4 rounded border border-slate-700">
                            <h4 class="text-lg font-bold text-lime-400 mb-2">2. å…«å­—æ°´å¹³åœ“ (Figure 8)</h4>
                            <p class="text-sm text-slate-300">é€™æ˜¯å¤§é­”ç‹é—œå¡ã€‚éœ€ä¿æŒæ©Ÿé ­æœå‰ï¼Œå·¦å³å¹³ç§»ç¹è¡Œå…©å€‹åœ“éŒï¼Œå½¢æˆ 8 å­—è»Œè·¡ã€‚å…¨ç¨‹ä¸å¯è¶Šç•Œï¼Œé«˜åº¦éœ€ç¶­æŒã€‚</p>
                        </div>
                        <div class="bg-slate-950 p-4 rounded border border-slate-700">
                            <h4 class="text-lg font-bold text-lime-400 mb-2">3. çŸ©å½¢èˆªç·š (Rectangular Circuit)</h4>
                            <p class="text-sm text-slate-300">G3 ç­‰ç´šå¿…è€ƒã€‚éœ€åŸ·è¡Œé †æ™‚é‡èˆ‡é€†æ™‚é‡çš„çŸ©å½¢é£›è¡Œï¼Œæ©Ÿé ­éœ€éš¨èˆªç·šè½‰å‘ (Bank Turn)ã€‚</p>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: Tips -->
                <div id="content-exam-tips" class="hidden p-6 md:p-8 animate-fade-in">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="bg-slate-900 p-5 rounded-xl border border-lime-800">
                            <h4 class="text-lg font-bold text-lime-400 mb-3"><i class="fa-solid fa-wind mr-2"></i>æŠ—é¢¨ä¿®æ­£å¿ƒæ³•</h4>
                            <ul class="text-sm text-slate-300 space-y-3">
                                <li><strong>é å…ˆè£œå„Ÿ:</strong> è‹¥é¢¨å¾å·¦é‚Šå¹ä¾†ï¼Œè½‰å‘ 90 åº¦å‰å…ˆç¨å¾®å¾€å·¦é£›ä¸€é»ï¼Œè½‰çš„ç¬é–“è®“é¢¨æŠŠä½ ã€Œå¹å›ã€ä¸­å¿ƒé»ã€‚</li>
                                <li><strong>æ…¢é€Ÿè½‰å‘:</strong> ä¸è¦è½‰å¤ªå¿«ï¼å»ºè­° 0.5 ç§’è½‰ 90 åº¦ï¼Œé€™æ¨£æ‰æœ‰æ™‚é–“é‚Šè½‰é‚Šä¿®æ­£ä½ç§»ã€‚</li>
                            </ul>
                        </div>
                        <div class="bg-slate-900 p-5 rounded-xl border border-lime-800">
                            <h4 class="text-lg font-bold text-lime-400 mb-3"><i class="fa-solid fa-infinity mr-2"></i>å…«å­—æ°´å¹³åœ“æ”»ç•¥</h4>
                            <ul class="text-sm text-slate-300 space-y-3">
                                <li><strong>å®šèˆµæ‰“æ¡¿:</strong> æ©Ÿé ­ä¿æŒæœå‰ã€‚å·¦æ‰‹æ–æ¡¿ (Yaw) å›ºå®šå¾®é‡ä¸å‹•ï¼Œä¸»è¦é å³æ‰‹æ–æ¡¿ (Roll/Pitch) ç•«åœ“ã€‚</li>
                                <li><strong>é«˜åº¦ç­–ç•¥:</strong> é›–ç„¶è¦å®š 1-2mï¼Œå»ºè­°é£›ä½ä¸€é» (ç´„ 1m)ï¼Œè¦–è¦ºèª¤å·®è¼ƒå°ï¼Œæ¯”è¼ƒå®¹æ˜“å°é½Šåœ“éŒã€‚</li>
                                <li><strong>é€Ÿåº¦æ§åˆ¶:</strong> ä¿æŒç´„ 1m/s çš„æ…¢é€Ÿï¼Œå¯§å¯æ…¢ä¹Ÿä¸è¦å¿½å¿«å¿½æ…¢ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Tab 3: Mission -->
                <div id="content-exam-mission" class="hidden p-6 md:p-8 animate-fade-in">
                    <div class="space-y-6">
                        <div class="bg-slate-950 p-4 rounded border border-slate-700">
                            <h4 class="text-lg font-bold text-slate-200 mb-2">APP é¸æ“‡: Litchi (è”æ)</h4>
                            <p class="text-sm text-slate-400 mb-3">è€ƒè©¦æ¨è–¦ä½¿ç”¨ Litchi é€²è¡Œèˆªé»è¦åŠƒï¼Œæ“ä½œæ¯” DJI Go æ›´ç›´è§€ã€‚</p>
                            <ul class="list-disc list-inside text-xs text-slate-500 space-y-1">
                                <li>åœ¨å®¶å…ˆç·´ç¿’ç•« G1/G2/G3 çš„åœ–å½¢ã€‚</li>
                                <li>è€ƒè©¦æ™‚è‹¥å¹³æ¿é«’æ±¡æˆ–è§¸æ§ä¸è‰¯ï¼Œè«‹å–„ç”¨æ‰‹æŒ‡æ›¿ä»£è§¸æ§ç­†ã€‚</li>
                                <li>ç•«å®Œå¾Œå‹™å¿…æª¢æŸ¥æ¯å€‹èˆªé»çš„é«˜åº¦èˆ‡é€Ÿåº¦è¨­å®šã€‚</li>
                            </ul>
                        </div>
                        <div class="bg-slate-900 p-4 rounded border-l-4 border-rose-500">
                            <strong class="text-rose-400 text-sm">ç·Šæ€¥ç¨‹åº (Emergency):</strong>
                            <p class="text-xs text-slate-300 mt-1">G1/G2/G3 éƒ½æœƒè€ƒã€‚ç•¶è€ƒå®˜å–Šã€Œç·Šæ€¥è¿«é™ã€æˆ–ã€Œè¿”èˆªã€æ™‚ï¼Œè«‹ä¿æŒå†·éœï¼Œåˆ‡æ›åˆ°å§¿æ…‹æ¨¡å¼ (Attitude) æˆ–ç›´æ¥åŸ·è¡Œ RTHï¼Œåˆ‡å‹¿çŒ¶è±«ã€‚</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        // ==================== 1. å…¨åŸŸè®Šæ•¸ ====================
        let currentSection = 'section-roadmap';
        let vehicleChartInstance = null;
        let pidChartInstance = null;
        let bookmarks = JSON.parse(localStorage.getItem('uas-bookmarks') || '[]');
        let tourStep = 0;

        // ==================== 2. æœå°‹è³‡æ–™ (å®Œæ•´ç‰ˆ) ====================
        const searchData = [
            { title: 'æŠ€è¡“è·¯ç·šåœ–', section: 'section-roadmap', keywords: ['roadmap', 'imx', 'rt1176', 'pab', 'rtk'] },
            { title: 'å®˜æ–¹æŠ€è¡“æ‰‹å†Š', section: 'section-official-docs', keywords: ['docs', 'spec', 'ports', 'jst', 'pinout', 'manual'] },
            { title: 'X500 ç¡¬é«”æ‹†è§£', section: 'section-teardown', keywords: ['x500', 'teardown', 'pixhawk', '6c'] },
            { title: 'X500 AIoT å»ºç½®', section: 'section-build-aiot', keywords: ['build', 'aiot', 'pi5', 'yolo', 'ubec'] },
            { title: 'å°ˆæ¡ˆå¯¦ä½œæ—¥èªŒ', section: 'section-logs', keywords: ['log', 'build', 'config', 'qgc', 'calibration', 'sop'] },
            { title: 'MCU æ¶æ§‹è©³è§£', section: 'section-mcu', keywords: ['mcu', 'stm32', 'h7', 'f103', 'io'] },
            { title: 'ç¡¬é«”è§£å‰–', section: 'section-hardware', keywords: ['hardware', 'anatomy'] },
            { title: 'Pixhawk 6X/6C', section: 'section-pixhawk', keywords: ['pixhawk', '6x', '6c'] },
            { title: 'è‡ªè£½ç¡¬é«”æŒ‡å—', section: 'section-design', keywords: ['design', 'diy', 'pinout'] },
            { title: 'BLDC é¦¬é”å¯¦é©—å®¤', section: 'section-bldc', keywords: ['bldc', 'motor', 'esc', 'foc'] },
            { title: 'ç³»çµ±æ¦‚è§€', section: 'section-intro', keywords: ['intro', 'overview', 'é£›è¡ŒåŸç†'] },
            { title: 'DShot é€šè¨Šæ™‚åº', section: 'section-protocols', keywords: ['dshot', 'protocol', 'rf', 'elrs'] },
            { title: 'PID æ§åˆ¶ç†è«–', section: 'section-pid', keywords: ['pid', 'control', 'tuning'] },
            { title: 'é–‹ç™¼ç’°å¢ƒ', section: 'section-devenv', keywords: ['dev', 'environment', 'ide', 'cubeide', 'platformio', 'checklist'] },
            { title: 'è»Ÿé«”æ£§ (PX4/ArduPilot)', section: 'section-software', keywords: ['software', 'stack', 'px4', 'ardupilot', 'uorb'] },
            { title: 'AIoT èˆ‡ ROS 2', section: 'section-aiot', keywords: ['aiot', 'ros2', 'esp32', 'micro-ros', 'humble', 'trainer', 'ppm'] },
            { title: 'æ•…éšœè¨ºæ–·', section: 'section-maint', keywords: ['debug', 'troubleshooting', 'ubuntu', 'sitl', 'accel', 'motor'] },
            { title: 'è³‡æºèˆ‡è¡“èª', section: 'section-resources', keywords: ['cost', 'bom', 'price', 'community', 'battery', 'lipo', 'glossary', 'throttle', 'yaw', 'pitch', 'roll', 'mode 2', 'stick', 'control'] },
            { title: 'CAA è¡“ç§‘æ¸¬é©—', section: 'section-exam', keywords: ['exam', 'caa', 'g1', 'g2', 'g3', 'license', 'test', 'å…«å­—'] }
        ];

        // ==================== 3. é é¢åŠ è¼‰åˆå§‹åŒ– ====================
        document.addEventListener('DOMContentLoaded', function() {
            initNavigation();
            initCharts();
            initPortDetails();
            initAnatomy();
            initMobileMenu();
            initScrollProgress();
            initBackToTop();
            initSearch();
            initBookmarks();
            initThemeToggle();
            updateBookmarkUI();
            initPinoutSearch(); // Initialize Pinout Table
            
            // ç¹ªè£½ DShot bits
            const db = document.getElementById('dshot-bits');
            if(db) {
                db.innerHTML = '';
                for(let i=0; i<16; i++) {
                    const b = document.createElement('div');
                    let color = i < 11 ? 'bg-emerald-500' : (i < 12 ? 'bg-amber-500' : 'bg-rose-500');
                    b.className = `bit-box w-5 h-8 md:w-6 md:h-10 ${color} rounded opacity-60 hover:opacity-100 border border-white/10 m-0.5 cursor-help`;
                    db.appendChild(b);
                }
            }
        });

        // ==================== 4. å´é‚Šæ¬„å°èˆªåŠŸèƒ½ ====================
        function initNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetSection = this.getAttribute('data-section');
                    showSection(targetSection);
                    
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    if (window.innerWidth < 768) {
                        document.getElementById('sidebar').classList.add('hidden');
                    }
                });
            });
        }

        function showSection(sectionId) {
            document.querySelectorAll('section').forEach(section => {
                section.classList.add('hidden');
            });
            
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
                targetSection.classList.add('animate-fade-in');
                currentSection = sectionId;
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // ==================== 5. åœ–è¡¨åˆå§‹åŒ– (Chart.js) ====================
        function initCharts() {
            const vehicleCtx = document.getElementById('vehicleChart');
            if (vehicleCtx) {
                vehicleChartInstance = new Chart(vehicleCtx, {
                    type: 'radar',
                    data: {
                        labels: ['é€Ÿåº¦', 'çºŒèˆª', 'è¼‰é‡', 'ç©©å®šæ€§', 'æˆæœ¬'],
                        datasets: [{
                            label: 'å¤šæ—‹ç¿¼',
                            data: [8, 6, 7, 9, 7],
                            borderColor: 'rgb(56, 189, 248)',
                            backgroundColor: 'rgba(56, 189, 248, 0.2)'
                        }, {
                            label: 'å›ºå®šç¿¼',
                            data: [9, 9, 6, 7, 6],
                            borderColor: 'rgb(16, 185, 129)',
                            backgroundColor: 'rgba(16, 185, 129, 0.2)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                beginAtZero: true, max: 10,
                                ticks: { color: '#64748b', display: false },
                                grid: { color: '#334155' },
                                pointLabels: { color: '#cbd5e1' }
                            }
                        },
                        plugins: { legend: { labels: { color: '#cbd5e1' } } }
                    }
                });
            }

            const pidCtx = document.getElementById('pidChart');
            if (pidCtx) {
                const timeData = Array.from({length: 50}, (_, i) => i * 0.1);
                pidChartInstance = new Chart(pidCtx, {
                    type: 'line',
                    data: {
                        labels: timeData,
                        datasets: [{
                            label: 'P Only',
                            data: timeData.map(t => 1 - Math.exp(-t) + 0.2 * Math.sin(3*t)),
                            borderColor: 'rgb(16, 185, 129)', backgroundColor: 'rgba(16, 185, 129, 0.1)', tension: 0.4
                        }, {
                            label: 'PD',
                            data: timeData.map(t => 1 - Math.exp(-1.5*t) + 0.05 * Math.sin(4*t)),
                            borderColor: 'rgb(56, 189, 248)', backgroundColor: 'rgba(56, 189, 248, 0.1)', tension: 0.4
                        }, {
                            label: 'PID',
                            data: timeData.map(t => 1 - Math.exp(-2*t)),
                            borderColor: 'rgb(251, 191, 36)', backgroundColor: 'rgba(251, 191, 36, 0.1)', tension: 0.4
                        }, {
                            label: 'Setpoint',
                            data: timeData.map(() => 1),
                            borderColor: 'rgb(148, 163, 184)', borderDash: [5, 5], pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: { display: false },
                            y: { ticks: { color: '#64748b' }, grid: { color: '#334155' } }
                        },
                        plugins: { legend: { labels: { color: '#cbd5e1' } } }
                    }
                });
            }
        }
        
        function updatePidChart(t) {
            const m = { 
                balanced: {d:[0, 0.6, 1.1, 0.95, 1.02, 0.99, 1, 1, 1], c:'#34d399'}, 
                highP: {d:[0, 0.8, 1.4, 0.6, 1.3, 0.8, 1.1, 0.95, 1], c:'#f43f5e'},
                lowD: {d:[0, 0.5, 1.3, 1.1, 1.05, 1.01, 1, 1, 1], c:'#fbbf24'}
            };
            const p = m[t];
            if (pidChartInstance) {
                // For a simple visual update, we are just regenerating data based on the key
                // Real simulation logic is simplified here for UI demo purposes
                // pidChartInstance.update();
            }
        }

        // ==================== 6. Port è©³ç´°è³‡è¨Šäº’å‹• ====================
        const portData = {
            power: { icon: '<i class="fa-solid fa-battery-full text-rose-500"></i>', title: 'POWER 1 & 2', content: '<table class="w-full pin-table"><tr><th>Pin</th><th>Function</th><th>Spec</th></tr><tr><td>1,2</td><td>VCC</td><td class="v-5">5V (3A Max)</td></tr><tr><td>3</td><td>I_SENS</td><td class="v-33">0-3.3V Analog</td></tr><tr><td>4</td><td>V_SENS</td><td class="v-33">0-3.3V Analog</td></tr></table>' },
            telem: { icon: '<i class="fa-solid fa-wifi text-sky-500"></i>', title: 'TELEM 1', content: '<table class="w-full pin-table"><tr><th>Pin</th><th>Function</th><th>Spec</th></tr><tr><td>1</td><td>VCC</td><td class="v-5">5V (1.5A Limit)</td></tr><tr><td>2,3</td><td>TX/RX</td><td class="v-33">UART7 (CMOS)</td></tr><tr><td>4,5</td><td>CTS/RTS</td><td class="v-33">Flow Control</td></tr></table>' },
            gps: { icon: '<i class="fa-solid fa-satellite text-emerald-500"></i>', title: 'GPS 1', content: '<table class="w-full pin-table"><tr><th>Pin</th><th>Function</th></tr><tr><td>1</td><td>VCC</td></tr><tr><td>2,3</td><td>TX/RX</td></tr><tr><td>4,5</td><td>I2C (Mag)</td></tr></table>' },
            fmu_pwm: { icon: '<i class="fa-solid fa-fan text-amber-500"></i>', title: 'FMU PWM (AUX)', content: 'ç”± H7 ç›´æ¥é©…å‹•ã€‚3.3V é‚è¼¯ã€‚<br><strong>æ³¨æ„ï¼š</strong> è‹¥ä½¿ç”¨ DShot è®€å– RPMï¼Œè«‹å°‡ ESC è¨Šè™Ÿç·šæ¥æ–¼æ­¤ã€‚' },
            io_pwm: { icon: '<i class="fa-solid fa-gears text-slate-400"></i>', title: 'IO PWM (MAIN)', content: 'ç”± F103 é©…å‹•ã€‚3.3V é‚è¼¯ã€‚<br><strong>ç‰¹é»ï¼š</strong> å…·å‚™å®‰å…¨é–‹é—œé–å®šèˆ‡æ–·è¨Šä¿è­·ï¼Œæ¨™æº– PWM å»ºè­°æ¥æ­¤ã€‚' },
            can: { icon: '<i class="fa-solid fa-network-wired text-indigo-500"></i>', title: 'CAN 1/2', content: '<table class="w-full pin-table"><tr><th>Pin</th><th>Function</th></tr><tr><td>1</td><td>VCC</td></tr><tr><td>2</td><td>CAN_H</td></tr><tr><td>3</td><td>CAN_L</td></tr></table>' }
        };

        function initPortDetails() {
            document.querySelectorAll('.port-connector').forEach(c => {
                c.addEventListener('click', function() {
                    const d = portData[this.getAttribute('data-port')];
                    if(d) {
                        document.getElementById('port-icon').innerHTML = d.icon;
                        document.getElementById('port-title').textContent = d.title;
                        document.getElementById('port-content').innerHTML = d.content;
                        document.querySelectorAll('.port-connector').forEach(el => el.classList.remove('ring-2', 'ring-sky-500'));
                        this.classList.add('ring-2', 'ring-sky-500');
                    }
                });
            });
        }

        function showBldcDetail(k) {
            const data = {
                mcu: { t:'STM32 G4', d:'CORDIC/FMAC æ•¸å­¸åŠ é€Ÿå™¨ï¼Œå°ˆç‚º FOC è¨­è¨ˆã€‚', s:['170MHz Cortex-M4', '3x ADC (åŒæ­¥æ¡æ¨£)', 'Advanced Timer'] },
                driver: { t:'Gate Driver', d:'é©…å‹• MOSFET é–˜æ¥µï¼Œæ§åˆ¶æ­»å€æ™‚é–“ (Deadtime)ã€‚', s:['Bootstrap é›»è·¯', 'ä¿è­·æ©Ÿåˆ¶ (OCP, OTP)', 'é©…å‹•é›»æµ > 1A'] },
                mosfet: { t:'MOSFETs', d:'ä¸‰ç›¸é€†è®Šæ©‹ï¼Œä½å°é€šé›»é˜»ã€‚', s:['Vds > é›»æ± é›»å£“ x 1.5', 'Rds(on) < 3mÎ©', 'DFN 5x6 å°è£'] }
            };
            const d = data[k];
            document.getElementById('bldc-title').innerText = d.t;
            document.getElementById('bldc-desc').innerText = d.d;
            document.getElementById('bldc-specs').innerHTML = d.s.map(i => `<li>> ${i}</li>`).join('');
            document.getElementById('bldc-detail-box').classList.remove('hidden');
        }

        // ==================== 7. å„ç¨®é ç±¤åˆ‡æ› ====================
        function switchDesignTab(tabId) {
            document.getElementById('content-design-modules').classList.add('hidden');
            document.getElementById('content-design-pinout').classList.add('hidden');
            document.getElementById(`content-design-${tabId}`).classList.remove('hidden');
            document.getElementById('tab-design-modules').className = tabId === 'modules' ? "px-6 py-4 text-sm font-bold text-pink-400 bg-slate-900 border-r border-slate-800 transition whitespace-nowrap" : "px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap";
            document.getElementById('tab-design-pinout').className = tabId === 'pinout' ? "px-6 py-4 text-sm font-bold text-pink-400 bg-slate-900 border-l border-slate-800 transition whitespace-nowrap" : "px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap";
        }
        function showDesignTab(id) { switchDesignTab(id); } // Alias

        function switchLogsTab(tabId) {
            document.getElementById('content-logs-status').classList.add('hidden');
            document.getElementById('content-logs-sop').classList.add('hidden');
            document.getElementById(`content-logs-${tabId}`).classList.remove('hidden');
            document.getElementById('tab-log-status').className = tabId === 'status' ? "px-6 py-4 text-sm font-bold text-amber-400 bg-slate-900 border-r border-slate-800 transition whitespace-nowrap" : "px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap";
            document.getElementById('tab-log-sop').className = tabId === 'sop' ? "px-6 py-4 text-sm font-bold text-amber-400 bg-slate-900 border-l border-slate-800 transition whitespace-nowrap" : "px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap";
        }

        function switchSoftTab(id) {
            document.getElementById('content-soft-px4').classList.add('hidden');
            document.getElementById('content-soft-ardupilot').classList.add('hidden');
            document.getElementById(`content-soft-${id}`).classList.remove('hidden');
            document.getElementById('tab-soft-px4').className = id === 'px4' ? 'flex-1 py-4 font-bold text-sky-400 bg-slate-900 border-r border-slate-800 transition' : 'flex-1 py-4 font-bold text-slate-500 bg-slate-950 transition';
            document.getElementById('tab-soft-ardupilot').className = id === 'ardupilot' ? 'flex-1 py-4 font-bold text-rose-400 bg-slate-900 transition' : 'flex-1 py-4 font-bold text-slate-500 bg-slate-950 transition';
        }

        // Updated for AIoT Tabs
        function switchAiotTab(id) {
            document.getElementById('content-aiot-ros').classList.add('hidden');
            document.getElementById('content-aiot-trainer').classList.add('hidden');
            document.getElementById(`content-aiot-${id}`).classList.remove('hidden');
            
            document.getElementById('tab-aiot-ros').className = id === 'ros' 
                ? 'px-6 py-4 text-sm font-bold text-violet-400 bg-slate-900 border-r border-slate-800 transition whitespace-nowrap'
                : 'px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap';
            
            document.getElementById('tab-aiot-trainer').className = id === 'trainer'
                ? 'px-6 py-4 text-sm font-bold text-pink-400 bg-slate-900 border-l border-slate-800 transition whitespace-nowrap'
                : 'px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap';
        }
        
        // NEW: Exam Tabs
        function switchExamTab(id) {
            document.getElementById('content-exam-maneuvers').classList.add('hidden');
            document.getElementById('content-exam-tips').classList.add('hidden');
            document.getElementById('content-exam-mission').classList.add('hidden');
            
            document.getElementById(`content-exam-${id}`).classList.remove('hidden');
            
            ['maneuvers', 'tips', 'mission'].forEach(tab => {
                document.getElementById(`tab-exam-${tab}`).className = 'px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap';
            });
            
            const activeClass = 'px-6 py-4 text-sm font-bold text-lime-400 bg-slate-900 border-x border-slate-800 transition whitespace-nowrap';
            document.getElementById(`tab-exam-${id}`).className = activeClass;
        }

        function switchProtoTab(id) {
            document.getElementById('content-proto-pwm').classList.add('hidden');
            document.getElementById('content-proto-dshot').classList.add('hidden');
            document.getElementById('content-proto-rf').classList.add('hidden');
            
            document.getElementById(`content-proto-${id}`).classList.remove('hidden');
            
            // Reset all tabs to inactive style
            ['pwm', 'dshot', 'rf'].forEach(tab => {
                document.getElementById(`tab-proto-${tab}`).className = 'px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap';
            });
            
            // Set active tab style
            const activeClass = 'px-6 py-4 text-sm font-bold text-blue-400 bg-slate-900 border-x border-slate-800 transition whitespace-nowrap';
            const rfClass = 'px-6 py-4 text-sm font-bold text-teal-400 bg-slate-900 border-l border-slate-800 transition whitespace-nowrap';
            
            if(id === 'rf') {
                document.getElementById('tab-proto-rf').className = rfClass;
            } else {
                document.getElementById(`tab-proto-${id}`).className = activeClass.replace('blue', id === 'dshot' ? 'sky' : 'blue');
            }
        }

        function switchResTab(tabId) {
            document.getElementById('content-res-bom').classList.add('hidden');
            document.getElementById('content-res-battery').classList.add('hidden');
            document.getElementById('content-res-glossary').classList.add('hidden');
            document.getElementById(`content-res-${tabId}`).classList.remove('hidden');
            
            ['bom', 'battery', 'glossary'].forEach(id => {
                document.getElementById(`tab-res-${id}`).className = "px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap";
            });
            document.getElementById(`tab-res-${tabId}`).className = "px-6 py-4 text-sm font-bold text-teal-400 bg-slate-900 border-x border-slate-800 transition whitespace-nowrap";
        }

        // NEW: Docs Tabs
        function switchDocsTab(id) {
            document.getElementById('content-docs-specs').classList.add('hidden');
            document.getElementById('content-docs-ports').classList.add('hidden');
            document.getElementById(`content-docs-${id}`).classList.remove('hidden');
            
            document.getElementById('tab-docs-specs').className = id === 'specs' 
                ? 'px-6 py-4 text-sm font-bold text-indigo-400 bg-slate-900 border-r border-slate-800 transition whitespace-nowrap' 
                : 'px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap';
            
            document.getElementById('tab-docs-ports').className = id === 'ports' 
                ? 'px-6 py-4 text-sm font-bold text-indigo-400 bg-slate-900 border-l border-slate-800 transition whitespace-nowrap' 
                : 'px-6 py-4 text-sm font-bold text-slate-500 bg-slate-950 transition whitespace-nowrap';
        }

        // ==================== 8. ç¡¬é«”è§£å‰–å­¸è³‡æ–™ ====================
        const anatomyDataArray = [
            { id: 'brain', icon: 'ğŸ§ ', title: 'FC (FMU H7)', desc: 'ç³»çµ±å¤§è…¦ï¼ŒåŸ·è¡Œ EKF3 èˆ‡æ§åˆ¶è¿´è·¯ã€‚', specs: ['<span class="text-white">IMU Bus:</span> SPI1 (10MHz)', '<span class="text-white">SD Card:</span> SDMMC1 (4-bit)', '<span class="text-white">RAM:</span> 1MB SRAM + 2MB Flash'] },
            { id: 'senses', icon: 'ğŸ‘ï¸', title: 'Sensors (IMU)', desc: 'ICM-42688-P (High Rate) + BMI088 (Stable)ã€‚', specs: ['<span class="text-white">ICM-42688:</span> Low noise, 4kHz loop', '<span class="text-white">BMI088:</span> Vibration robust', '<span class="text-white">Mag:</span> External I2C (BMM150)'] },
            { id: 'heart', icon: 'ğŸ”‹', title: 'Power (PMIC)', desc: 'LTC4417 ä¸‰è·¯é›»æºåˆ‡æ› (PowerPath)ã€‚', specs: ['<span class="text-white">Input:</span> 3x Sources (Batt1/2, USB)', '<span class="text-white">Limit:</span> 5.7V Max Input', '<span class="text-white">Monitor:</span> Analog V/I Sense'] },
            { id: 'muscle', icon: 'ğŸ’ª', title: 'IO (Failsafe)', desc: 'F103 å”è™•ç†å™¨ï¼Œè² è²¬ PWM èˆ‡ RCã€‚', specs: ['<span class="text-white">Proto:</span> SBUS/PPM/DSM', '<span class="text-white">PWM:</span> 8x Main Outputs', '<span class="text-white">Link:</span> UART @ 1.5Mbps'] }
        ];

        function initAnatomy() {
            const ag = document.getElementById('anatomy-grid');
            if(ag) {
                anatomyDataArray.forEach(d => {
                    const div = document.createElement('div');
                    div.className = 'interactive-card bg-slate-900 p-4 rounded-xl border border-slate-800 shadow-lg text-center group';
                    div.onclick = () => {
                        document.getElementById('detail-title').innerText = d.title;
                        document.getElementById('detail-desc').innerText = d.desc;
                        document.getElementById('detail-specs').innerHTML = d.specs.map(s => `<li>> ${s}</li>`).join('');
                        document.getElementById('anatomy-detail').classList.remove('hidden');
                    };
                    div.innerHTML = `<div class="text-3xl mb-2 grayscale group-hover:grayscale-0 transition">${d.icon}</div><h3 class="font-bold text-slate-200 text-sm">${d.title}</h3>`;
                    ag.appendChild(div);
                });
            }
        }

        // ==================== 9. è¼”åŠ©/æ¬¡è¦äº’å‹• ====================
        function initMobileMenu() {
            const menuBtn = document.getElementById('mobile-menu-btn');
            const sidebar = document.getElementById('sidebar');
            if (menuBtn && sidebar) {
                menuBtn.addEventListener('click', function() { sidebar.classList.toggle('hidden'); });
            }
        }

        function initScrollProgress() {
            const progressBar = document.getElementById('reading-progress');
            window.addEventListener('scroll', function() {
                const windowHeight = window.innerHeight;
                const documentHeight = document.documentElement.scrollHeight - windowHeight;
                const scrolled = window.scrollY;
                progressBar.style.width = (scrolled / documentHeight) * 100 + '%';
            });
        }

        function initBackToTop() {
            const btn = document.getElementById('back-to-top');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) btn.classList.add('visible'); 
                else btn.classList.remove('visible');
            });
            btn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
        }

        function initSearch() {
            const input = document.getElementById('search-input');
            const results = document.getElementById('search-results');
            
            input.addEventListener('input', function(e) {
                const query = e.target.value.toLowerCase().trim();
                if (query.length < 2) { results.classList.add('hidden'); return; }
                
                const res = searchData.filter(item => item.title.toLowerCase().includes(query) || item.keywords.some(k => k.includes(query)));
                
                if (res.length > 0) {
                    results.innerHTML = res.map(result => `
                        <div class="search-result-item" onclick="navigateToSection('${result.section}')">
                            <div class="font-bold text-slate-200 text-sm">${result.title}</div>
                        </div>
                    `).join('');
                    results.classList.remove('hidden');
                } else {
                    results.innerHTML = '<div class="search-result-item text-slate-500 text-sm">ç„¡æœå°‹çµæœ</div>';
                    results.classList.remove('hidden');
                }
            });
            
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.search-container')) { results.classList.add('hidden'); }
            });
        }

        function navigateToSection(sectionId) {
            showSection(sectionId);
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-section') === sectionId) item.classList.add('active');
            });
            document.getElementById('search-results').classList.add('hidden');
            document.getElementById('search-input').value = '';
            if (window.innerWidth < 768) document.getElementById('sidebar').classList.add('hidden');
        }

        function initBookmarks() {
            document.querySelectorAll('.bookmark-badge').forEach(b => {
                const sid = b.getAttribute('data-bookmark');
                if(bookmarks.includes(sid)) {
                    b.classList.add('bookmarked'); b.classList.remove('fa-regular'); b.classList.add('fa-solid');
                }
                
                b.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const index = bookmarks.indexOf(sid);
                    if (index > -1) {
                        bookmarks.splice(index, 1);
                        this.classList.remove('bookmarked', 'fa-solid'); this.classList.add('fa-regular');
                    } else {
                        bookmarks.push(sid);
                        this.classList.add('bookmarked', 'fa-solid'); this.classList.remove('fa-regular');
                    }
                    localStorage.setItem('uas-bookmarks', JSON.stringify(bookmarks));
                    updateBookmarkUI();
                });
            });
        }

        function updateBookmarkUI() {
            const list = document.getElementById('bookmark-list');
            document.getElementById('bookmark-count').innerText = bookmarks.length;
            
            if (bookmarks.length === 0) {
                list.innerHTML = '<div class="text-slate-600 italic">å°šç„¡æ›¸ç±¤</div>'; return;
            }
            list.innerHTML = bookmarks.map(bid => {
                const d = searchData.find(s => s.section === bid);
                return `
                    <div class="flex items-center justify-between p-2 bg-slate-800 rounded hover:bg-slate-700 cursor-pointer transition" onclick="navigateToSection('${bid}')">
                        <span class="text-slate-300">${d ? d.title : bid}</span>
                        <i class="fa-solid fa-chevron-right text-slate-600"></i>
                    </div>
                `;
            }).join('');
        }

        function initThemeToggle() {
            const t = document.getElementById('theme-toggle');
            const html = document.documentElement;
            
            if(localStorage.getItem('uas-theme') === 'light') { 
                html.classList.remove('dark'); t.classList.remove('active'); 
            }
            
            t.addEventListener('click', function() {
                html.classList.toggle('dark');
                this.classList.toggle('active');
                localStorage.setItem('uas-theme', html.classList.contains('dark') ? 'dark' : 'light');
            });
        }

        function showDiagnosis() {
            const v = document.getElementById('diagnostic-select').value;
            const r = document.getElementById('diagnostic-result');
            const t = document.getElementById('diag-title');
            const d = document.getElementById('diag-desc');
            
            if(!v) { r.classList.add('hidden'); return; }
            
            const db = {
                accel_nose_down: { t:'åŠ é€Ÿåº¦è¨ˆæ ¡æ­£å¤±æ•— (Nose Down Timeout)', d:'æ ¹å› ï¼šæ‰‹æŒéœ‡å‹• (Micro-movements) æˆ–æ•¸å‚³é »å¯¬ä¸è¶³ã€‚\nè§£æ³•ï¼š\n1. åŸ·è¡Œ Factory Resetã€‚\n2. æ”¹ç”¨ USB é€£ç·š (ç¢ºä¿é »å¯¬)ã€‚\n3. æ¡ç”¨ã€Œé ç‰†æ³•ã€ç‰©ç†å›ºå®šæ©Ÿèº«ã€‚' },
                motor_no_spin: { t:'é¦¬é”ç„¡åæ‡‰ (Safety/Wiring)', d:'æ ¹å› ï¼šå®‰å…¨é–‹é—œæœªè§¸ç™¼ã€æˆ– ESC æ¥éŒ¯è‡³ FMU AUXã€‚\nè§£æ³•ï¼š\n1. æš«æ™‚è¨­å®š CBRK_IO_SAFETY = 22027 ç¹éå®‰å…¨é–‹é—œã€‚\n2. ç¢ºèª ESC è¨Šè™Ÿç·šæ¥åœ¨ IO PWM (Main Outputs)ã€‚' },
                battery_volt: { t:'é›»æ± å£“é™éå¤§ (Voltage Drop)', d:'æª¢æŸ¥ï¼šèµ·é£›æ™‚å£“é™è‹¥ >1.5Vï¼Œä»£è¡¨é›»æ±  C æ•¸ä¸è¶³æˆ–è€åŒ–ã€‚\nå»ºè­°ï¼šæª¢æŸ¥å…§é˜» (æ‡‰ <5mÎ©/cell)ï¼Œæˆ–æ›´æ›é«˜ C æ•¸é›»æ± ã€‚' },
                ubuntu_dep: { t:'Ubuntu 24.04 å®‰è£ CubeIDE å¤±æ•—', d:'åŸå› ï¼šç¼ºå°‘ libncurses5/libpython2.7ã€‚\nè§£æ³•ï¼šéœ€æ‰‹å‹•ä¸‹è¼‰èˆŠç‰ˆ deb åŒ… (libncurses5_6.3 ç­‰) ä¸¦ä½¿ç”¨ dpkg å®‰è£ï¼Œç„¶å¾Œå†å®‰è£ CubeIDEã€‚' },
                sitl_udp: { t:'SITL é€£æ¥ Gazebo é€¾æ™‚', d:'è§£æ³•ï¼š1. æª¢æŸ¥é˜²ç«ç‰† (ufw allow 14550/udp)ã€‚\n2. è¨­å®š export PX4_SIM_HOST_ADDR=127.0.0.1ã€‚\n3. ä½¿ç”¨ make px4_sitl_default gazebo __verbose:=1 æŸ¥çœ‹è©³ç´°éŒ¯èª¤ã€‚' },
                ros2_topic: { t:'ROS 2 æ‰¾ä¸åˆ° /fmu ä¸»é¡Œ', d:'è§£æ³•ï¼š1. ç¢ºèª micro_xrce_dds_agent å·²å•Ÿå‹• (udp4 -p 8888)ã€‚\n2. ç¢ºèª PX4 SITL é‹è¡Œä¸­ã€‚\n3. é‡æ–° source /opt/ros/humble/setup.bashã€‚' },
                desync: { t:'é¦¬é”å¤±æ­¥ (Desync)', d:'å»ºè­°æ“ä½œï¼š1. åœ¨ BLHeli ä¸­å¢åŠ  Rampup Powerã€‚ 2. æª¢æŸ¥é¦¬é”æ¥ç·šæ˜¯å¦é¬†è„«ã€‚' },
                mag: { t:'ç¾…ç›¤å¹²æ“¾ (TBE)', d:'å»ºè­°æ“ä½œï¼š1. é‡æ–°æ ¡æº–ç£ç¾…ç›¤ã€‚ 2. å°‡ GPS æ”¯æ¶ç§»é›¢ PDB æˆ–é›»æºç·šã€‚' },
                kill_switch: { t:'ç·Šæ€¥æ–·é›» (Kill Switch) é‚è¼¯', d:'èªªæ˜ï¼šæŒ‰ä¸‹ Kill Switch é¦¬é”æœƒç¬é–“åœè½‰ï¼Œä½†ç³»çµ±ã€ä»ç¶­æŒ Armed ç‹€æ…‹ã€‘ã€‚\næ³¨æ„ï¼šè‹¥åœ¨ç©ºä¸­æ’¥å›é–‹é—œï¼Œé¦¬é”æœƒç«‹å³æ¢å¾©å…¨é€Ÿæ—‹è½‰ï¼' },
                compass_inc: { t:'ç¾…ç›¤ä¸ä¸€è‡´ (Compass Inconsistent)', d:'æ ¹å› ï¼šç’°å¢ƒç£å ´å¹²æ“¾ï¼Œå°è‡´ç¾…ç›¤èª¤å·®è¶…é 60 åº¦ã€‚\nè§£æ³•ï¼šç³»çµ±æœƒé¡¯ç¤ºç´…è‰² Not Readyã€‚è«‹é é›¢é‡‘å±¬/è¢å¹•ï¼Œä¸¦åœ¨ Sensors é é¢é‡æ–°å…­é¢æ ¡æ­£ã€‚' },
                no_local_pos: { t:'ä½ç½®é ä¼°å¤±æ•— (No Valid Local Position)', d:'æ ¹å› ï¼šå®¤å…§ç„¡ GPS è¨Šè™Ÿï¼ŒPosition æ¨¡å¼é–æ­»ã€‚\nè§£æ³•ï¼šé€éé™æ§å™¨åˆ‡æ›è‡³ Stabilized (è‡ªç©©) æ¨¡å¼ï¼Œç³»çµ±ç‡ˆè™Ÿè½‰ç‚ºè—è‰²å‘¼å¸ç‡ˆå¾Œå³å¯è§£é– (Arm)ã€‚' }
            };
            
            const data = db[v];
            if(data) { 
                t.innerText = data.t; d.innerText = data.d; r.classList.remove('hidden'); 
            }
        }

        // ==================== 10. äº’å‹•å¼å°è¦½ç³»çµ± ====================
        const steps = [
            { target: '[data-tour="sidebar"]', title: 'ç›®éŒ„å°èˆª', text: 'é€™è£¡åŒ…å«æ‰€æœ‰å·¥ç¨‹æ–‡ä»¶æ¨¡çµ„ã€‚' },
            { target: '[data-tour="search"]', title: 'å…¨å±€æœå°‹', text: 'æ”¯æ´å¿«æ·éµï¼Œå¯å¿«é€ŸæŸ¥æ‰¾è¡“èªèˆ‡è¨­å®šæª”ã€‚' },
            { target: '[data-tour="bookmarks"]', title: 'æ›¸ç±¤ç®¡ç†', text: 'å„²å­˜å¸¸ç”¨æ–‡ä»¶ï¼Œé—œé–‰ç¶²é ä¹Ÿä¸æœƒéºå¤±ã€‚' },
            { target: '#section-roadmap', title: 'é–±è®€æ–‡ä»¶', text: 'é»æ“Šå³ä¸Šæ–¹æ˜Ÿè™Ÿå³å¯åŠ å…¥æ›¸ç±¤ã€‚' }
        ];

        function startTour() {
            tourStep = 0;
            document.getElementById('tour-overlay').classList.add('active');
            showTourStep();
        }

        function showTourStep() {
            const step = steps[tourStep];
            const target = document.querySelector(step.target);
            
            document.querySelectorAll('.tour-highlight').forEach(el => {
                el.classList.remove('tour-highlight');
                el.style.zIndex = '';
            });

            if (target) {
                target.classList.add('tour-highlight');
                target.style.zIndex = '10001';
                target.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            const tooltip = document.createElement('div');
            tooltip.className = 'tour-tooltip animate-fade-in';
            
            if (target) {
                const rect = target.getBoundingClientRect();
                if (window.innerWidth - rect.right > 380) {
                    tooltip.style.left = `${rect.right + 20}px`;
                    tooltip.style.top = `${rect.top}px`;
                } else {
                    tooltip.style.left = `50%`;
                    tooltip.style.top = `50%`;
                    tooltip.style.transform = `translate(-50%, -50%)`;
                }
            } else {
                tooltip.style.left = `50%`;
                tooltip.style.top = `50%`;
                tooltip.style.transform = `translate(-50%, -50%)`;
            }

            tooltip.innerHTML = `
                <h3 class="font-bold text-white mb-2 text-lg">${step.title}</h3>
                <p class="text-slate-300 text-sm mb-6">${step.text}</p>
                <div class="flex justify-between items-center mt-4">
                    <span class="text-xs text-slate-500">${tourStep + 1} / ${steps.length}</span>
                    <div class="space-x-2">
                        ${tourStep > 0 ? `<button class="tour-btn tour-btn-secondary" onclick="prevTourStep()">ä¸Šä¸€æ­¥</button>` : ''}
                        <button class="tour-btn tour-btn-primary" onclick="nextTourStep()">${tourStep === steps.length - 1 ? 'å®Œæˆ' : 'ä¸‹ä¸€æ­¥'}</button>
                        <button class="tour-btn tour-btn-secondary" onclick="closeTour()">è·³é</button>
                    </div>
                </div>
            `;

            const oldTooltip = document.querySelector('.tour-tooltip');
            if (oldTooltip) oldTooltip.remove();
            document.body.appendChild(tooltip);
        }

        function nextTourStep() {
            if (tourStep < steps.length - 1) { tourStep++; showTourStep(); } 
            else { closeTour(); }
        }

        function prevTourStep() {
            if (tourStep > 0) { tourStep--; showTourStep(); }
        }

        function closeTour() {
            document.getElementById('tour-overlay').classList.remove('active');
            const tooltip = document.querySelector('.tour-tooltip');
            if (tooltip) tooltip.remove();
            document.querySelectorAll('.tour-highlight').forEach(el => {
                el.classList.remove('tour-highlight'); el.style.zIndex = '';
            });
        }

        // ==================== 11. Pinout Search Logic ====================
        const fullPinoutData = [
            { p: "PA0", f: "TIM5_CH1", u: "FMU_CH7" },
            { p: "PA1", f: "TIM5_CH2", u: "FMU_CH8" },
            { p: "PA2", f: "ADC1_INP14", u: "FMU_BAT2_I" },
            { p: "PA3", f: "USART2_RX", u: "FMU_USART2_RX_TEL3" },
            { p: "PA4", f: "ADC1_INP18", u: "FMU_SCALED_V5" },
            { p: "PA5", f: "SPI1_SCK", u: "FMU_SPI1_SCK_SENSOR" },
            { p: "PA6", f: "SPI1_MISO", u: "FMU_SPI1_MISO_SENSOR" },
            { p: "PA7", f: "SPI1_MOSI", u: "FMU_SPI1_MOSI_SENSOR" },
            { p: "PA8", f: "TIM1_CH1", u: "FMU_CH1" },
            { p: "PA9", f: "USB_OTG_FS_VBUS", u: "FMU_VBUS_SENSE" },
            { p: "PA10", f: "USART1_RX", u: "FMU_UART_RX_GPS1" },
            { p: "PA11", f: "USB_OTG_FS_DM", u: "FMU_USB_DM" },
            { p: "PA12", f: "USB_OTG_FS_DP", u: "FMU_USB_DP" },
            { p: "PA13", f: "SWDIO", u: "FMU_SWDIO" },
            { p: "PA14", f: "SWCLK", u: "FMU_SWCLK" },
            { p: "PA15", f: "GPIO", u: "N_BRICK1_VALID" },
            { p: "PB0", f: "TIM3_CH3", u: "FMU_BUZZER" },
            { p: "PB1", f: "ADC1_INP5", u: "FMU_BAT2_V" },
            { p: "PB2", f: "GPIO", u: "VDD_3V3_SENSORS_EN" },
            { p: "PB3", f: "SDMMC2_D2", u: "FMU_SDMMC2_D2" },
            { p: "PB4", f: "SDMMC2_D3", u: "FMU_SDMMC2_D3" },
            { p: "PB5", f: "CAN2_RX", u: "FMU_CAN2_RX" },
            { p: "PB6", f: "USART1_TX", u: "FMU_USART1_TX_GPS1" },
            { p: "PB7", f: "I2C1_SDA", u: "FMU_I2C1_SDA_GPS1_MAG_LED" },
            { p: "PB8", f: "I2C1_SCL", u: "FMU_I2C1_SCL_GPS1_MAG_LED" },
            { p: "PB9", f: "TIM17_CH1", u: "FMU_HEATER" },
            { p: "PB10", f: "I2C2_SCL", u: "FMU_I2C2_SCL_GPS2_MAG_LED" },
            { p: "PB11", f: "I2C2_SDA", u: "FMU_I2C2_SDA_GPS2_MAG_LED" },
            { p: "PB12", f: "GPIO", u: "N_BRICK2_VALID" },
            { p: "PB13", f: "CAN2_TX", u: "FMU_CAN2_TX" },
            { p: "PB14", f: "SDMMC2_D0", u: "FMU_SDMMC2_D0" },
            { p: "PB15", f: "SDMMC2_D1", u: "FMU_SDMMC2_D1" },
            { p: "PC0", f: "ADC3_INP10", u: "HW_REV_SENSE" },
            { p: "PC1", f: "ADC3_INP11", u: "HW_VER_SENSE" },
            { p: "PC2", f: "SPI2_MISO", u: "FMU_SPI2_MISO_FRAM" },
            { p: "PC3", f: "SPI2_MOSI", u: "FMU_SPI2_MOSI_FRAM" },
            { p: "PC4", f: "ADC1_INP4", u: "FMU_BAT1_I" },
            { p: "PC5", f: "ADC1_INP8", u: "FMU_BAT1_V" },
            { p: "PC6", f: "USART6_TX", u: "FMU_USART6_TX_TO_IO" },
            { p: "PC7", f: "USART6_RX", u: "FMU_USART6_RX_FROM_IO" },
            { p: "PC8", f: "UART5_RTS", u: "FMU_UART5_RTS_TEL2" },
            { p: "PC9", f: "UART5_CTS", u: "FMU_UART5_CTS_TEL2" },
            { p: "PC10", f: "GPIO", u: "N_VDD_5V_HIPOWER_EN" },
            { p: "PC11", f: "GPIO", u: "N_VDD_5V_HIPOWER_OC" },
            { p: "PC12", f: "UART5_TX", u: "FMU_UART5_TX_TEL2" },
            { p: "PC13", f: "GPIO", u: "FMU_SPI1_CS3_ICM42688" },
            { p: "PC14", f: "GPIO", u: "FMU_SPI1_CS2_BMI055_GYRO" },
            { p: "PC15", f: "GPIO", u: "FMU_SPI1_CS1_BMI055_ACC" },
            { p: "PD0", f: "CAN1_RX", u: "FMU_CAN1_RX" },
            { p: "PD1", f: "CAN1_TX", u: "FMU_CAN1_TX" },
            { p: "PD2", f: "UART5_RX", u: "FMU_UART5_RX_TEL2" },
            { p: "PD3", f: "SPI2_SCK", u: "FMU_SPI2_SCK_FRAM" },
            { p: "PD4", f: "GPIO", u: "FMU_SPI2_CS_FRAM" },
            { p: "PD5", f: "USART2_TX", u: "FMU_USART2_TX_TEL3" },
            { p: "PD6", f: "SDMMC2_CK", u: "FMU_SDMMC2_CK" },
            { p: "PD7", f: "SDMMC2_CMD", u: "FMU_SDMMC2_CMD" },
            { p: "PD8", f: "USART3_TX", u: "FMU_USART3_TX_DEBUG" },
            { p: "PD9", f: "USART3_RX", u: "FMU_USART3_RX_DEBUG" },
            { p: "PD10", f: "GPIO", u: "N_FMU_LED_RED" },
            { p: "PD11", f: "GPIO", u: "N_FMU_LED_BLUE" },
            { p: "PD12", f: "I2C4_SCL", u: "FMU_I2C4_SCL" },
            { p: "PD13", f: "I2C4_SDA", u: "FMU_I2C4_SDA" },
            { p: "PD14", f: "TIM4_CH3", u: "FMU_CH5" },
            { p: "PD15", f: "TIM4_CH4", u: "FMU_CH6" },
            { p: "PE0", f: "UART8_RX", u: "FMU_UART8_RX_GPS2" },
            { p: "PE1", f: "UART8_TX", u: "FMU_UART8_TX_GPS2" },
            { p: "PE2", f: "GPIO", u: "N_VDD_5V_PERIPH_EN" },
            { p: "PE3", f: "GPIO", u: "N_VDD_5V_PERIPH_OC" },
            { p: "PE4", f: "GPIO", u: "FMU_SPI1_DRDY1_BMI055_ACC" },
            { p: "PE5", f: "GPIO", u: "FMU_SPI1_DRDY2_BMI055_GYRO" },
            { p: "PE6", f: "GPIO", u: "FMU_SPI1_DRDY3_ICM42688" },
            { p: "PE7", f: "UART7_RX", u: "FMU_UART7_RX_TEL1" },
            { p: "PE8", f: "UART7_TX", u: "FMU_UART7_TX_TEL1" },
            { p: "PE9", f: "UART7_RTS", u: "FMU_UART7_RTS_TEL1" },
            { p: "PE10", f: "UART7_CTS", u: "FMU_UART7_CTS_TEL1" },
            { p: "PE11", f: "TIM1_CH2", u: "FMU_CH2" },
            { p: "PE12", f: "GPIO", u: "HW_VER_REV_DRIVE" },
            { p: "PE13", f: "TIM1_CH3", u: "FMU_CH3" },
            { p: "PE14", f: "TIM1_CH4", u: "FMU_CH4" },
            { p: "PE15", f: "GPIO", u: "N_USB_VBUS_VALID" }
        ];

        function initPinoutSearch() {
            const tableBody = document.querySelector('#pinout-table tbody');
            const searchInput = document.getElementById('pinout-search');
            
            if(!tableBody || !searchInput) return;

            function renderTable(data) {
                tableBody.innerHTML = data.map(row => `
                    <tr class="hover:bg-slate-800 transition border-b border-slate-800">
                        <td class="p-3 text-sky-400 font-bold">${row.p}</td>
                        <td class="p-3 text-emerald-400 font-mono text-xs">${row.f}</td>
                        <td class="p-3 text-slate-300 font-mono text-xs">${row.u}</td>
                    </tr>
                `).join('');
            }

            renderTable(fullPinoutData);

            searchInput.addEventListener('input', (e) => {
                const term = e.target.value.toUpperCase();
                const filtered = fullPinoutData.filter(item => 
                    item.p.includes(term) || 
                    item.f.includes(term) || 
                    item.u.includes(term)
                );
                renderTable(filtered);
            });
        }

        window.MathJax = { 
            tex: { 
                inlineMath: [['$', '$'], ['\\(', '\\)']], 
                displayMath: [['$$', '$$'], ['\\[', '\\]']] 
            } 
        };
    </script>
</body>
</html>
